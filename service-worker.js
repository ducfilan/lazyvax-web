const CACHE_NAME="lazyvax-v1",STATIC_ASSETS=["/","/index.html","/favicon.ico","/pwa-manifest.json","/icon48.png","/icon128.png","/icon-192.png","/icon-512.png","/apple-touch-icon.png"];self.addEventListener("install",e=>{e.waitUntil(caches.open(CACHE_NAME).then(e=>e.addAll(STATIC_ASSETS).catch(e=>{}))),self.skipWaiting()}),self.addEventListener("activate",e=>{e.waitUntil(caches.keys().then(e=>Promise.all(e.filter(e=>e!==CACHE_NAME).map(e=>caches.delete(e))))),self.clients.claim()}),self.addEventListener("fetch",e=>{if("GET"!==e.request.method)return;new URL(e.request.url).origin===location.origin&&e.respondWith(fetch(e.request).then(t=>{if(200===t.status){const n=t.clone();caches.open(CACHE_NAME).then(t=>{t.put(e.request,n)})}return t}).catch(()=>caches.match(e.request).then(t=>t||("document"===e.request.destination?caches.match("/"):new Response("Offline",{status:503})))))});