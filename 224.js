"use strict";(self.webpackChunklazyvax_ext=self.webpackChunklazyvax_ext||[]).push([[224],{2815:(e,t,n)=>{var r=n(85072),i=n.n(r),a=n(97825),o=n.n(a),c=n(77659),l=n.n(c),s=n(55056),u=n.n(s),d=n(10540),m=n.n(d),f=n(41113),p=n.n(f),v=n(96896),y={};y.styleTagTransform=p(),y.setAttributes=u(),y.insert=l().bind(null,"head"),y.domAPI=o(),y.insertStyleElement=m();var g=i()(v.default,y);if(!v.default.locals||e.hot.invalidate){var h=!v.default.locals,b=h?v:v.default.locals;e.hot.accept(96896,t=>{v=n(96896),function(e,t,n){if(!e&&t||e&&!t)return!1;var r;for(r in e)if((!n||"default"!==r)&&e[r]!==t[r])return!1;for(r in t)if(!(n&&"default"===r||e[r]))return!1;return!0}(b,h?v:v.default.locals,h)?(b=h?v:v.default.locals,g(v.default)):e.hot.invalidate()})}e.hot.dispose(function(){g()});v.default&&v.default.locals&&v.default.locals},7224:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Rt});var r=n(80296),i=(n(66329),n(96540)),a=n(97072),o=n(1849),c=n(98060),l=n(47852),s=n(29197),u=n(9027),d=n(83186),m=n(42569),f=n(95927),p=n(71468),v=n(96692),y=n(10467),g=n(54756),h=n.n(g),b=(n(2815),n(85015)),x=n(66048),E=n(25339),w=n(28073),_=n(91196),A=n(26362),k=n(32977),R=n(40261),N=n(93598),S=n(78854),D=n(49237),O=n(66221),I=n(68335),j=n(97665),T=n(33930),q=n(57097),C=n(47767),z=n(6463),P=n(12268),M=n(80337),L=n(54352),F=n(16172),B=n(86288),H=n(16899),K=n(62542),Q=n(86220),W=n(73634),G=n(86319),J=n(34338),V=n(19166),Y=(0,m.Ru)("Today"),Z=(0,m.Ru)("Goals");const U=function(){var e=(0,p.d4)(function(e){return e.global.weekStartsOn}),t=b.A.useApp().modal,n=(0,i.useState)(Y),o=(0,r.A)(n,2),l=o[0],s=o[1],u=(0,i.useState)(!0),d=(0,r.A)(u,2),f=d[0],g=d[1],U=(0,C.Zp)(),X=(0,j.jE)(),$=(0,p.d4)(function(e){return(0,v.LJ)(e.dailyReflection.currentReflection)}),ee=(0,p.d4)(function(e){return e.dailyReflection.todayEvents}),te=(0,p.d4)(function(e){return e.dailyReflection.selectedDate}),ne=i.useMemo(function(){return new Date(te)},[te]),re=(0,i.useMemo)(function(){return(0,z.o)(ne)},[ne]),ie=(0,i.useMemo)(function(){return(0,P.D)(ne)},[ne]),ae=(0,i.useMemo)(function(){return(0,M.k)(re,{weekStartsOn:e})},[re,e]),oe=(0,i.useMemo)(function(){return(0,L.$)(ie,{weekStartsOn:e})},[ie,e]),ce=(0,p.wA)(),le=(0,i.useState)(ee||[]),se=(0,r.A)(le,2),ue=se[0],de=se[1],me=(0,i.useState)(),fe=(0,r.A)(me,2),pe=fe[0],ve=fe[1],ye=(0,i.useState)(!1),ge=(0,r.A)(ye,2),he=ge[0],be=ge[1],xe=[{label:Y,value:Y,icon:i.createElement(A.A,null)},{label:Z,value:Z,icon:i.createElement(k.A,null)}];(0,i.useEffect)(function(){de(ee||[])},[ee]),(0,i.useEffect)(function(){},[ne]);var Ee=(0,T.I)({queryKey:["weekly-reflections",ae.toISOString(),oe.toISOString()],queryFn:function(){return(0,W.fM)({type:G.Qe,fromDate:ae,toDate:oe})},refetchOnReconnect:!1,refetchOnWindowFocus:!1}),we=Ee.data,_e=Ee.isLoading,Ae=(0,i.useMemo)(function(){var e=new Map;null==we||we.forEach(function(t){var n=(t.datetime.getDay()+6)%7;e.set(n,t)});for(var t=[],n=[],r=0;r<7;r++){var i=e.get(r);if(i){var a=i.meta.meta.mood;t.push(a),n.push(i.meta.meta.satisfyLevel||null)}else t.push(null),n.push(null)}if($){var o,c,l=($.datetime.getDay()+6)%7;if(l>=0)t[l]=(null===(o=$.meta)||void 0===o||null===(o=o.meta)||void 0===o?void 0:o.mood)||null,n[l]=(null===(c=$.meta)||void 0===c||null===(c=c.meta)||void 0===c?void 0:c.satisfyLevel)||null}return{moods:t,satisfyLevels:n}},[we,$]),ke=(0,T.I)({queryKey:["daily-reflection-goals",f],queryFn:function(){return f?(0,Q.i4)():(0,Q.DX)()},refetchOnReconnect:!1,refetchOnWindowFocus:!1}),Re=ke.data,Ne=ke.isLoading,Se=(0,q.n)({mutationFn:K.qM,onSuccess:function(){X.invalidateQueries({queryKey:["daily-reflection-events",re.toISOString(),ie.toISOString()]})}}),De=(0,q.n)({mutationFn:Q.Au,onSuccess:function(){X.invalidateQueries({queryKey:["daily-reflection-goals"]})}}),Oe=function(){ve(void 0),be(!0)},Ie=function(){var e=(0,y.A)(h().mark(function e(t){return h().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{ee&&ee.find(function(e){return e._id===t._id})?ce((0,v.xm)([{_id:t._id,title:t.title,description:t.description,startDate:t.startDate,endDate:t.endDate,status:t.status||G.c,priority:t.priority}])):t._id&&ce((0,v.yo)([(0,v.CY)(t)]))}catch(e){}case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return i.createElement("div",{className:"daily-reflection-sider"},i.createElement("div",{className:"sider-header"},i.createElement(E.A,{options:xe,value:l,onChange:function(e){return s(e.toString())}})),i.createElement("div",{className:"sider-content"},i.createElement("div",{className:"tab-content"},i.createElement(I.P.div,{key:"today",initial:!1,animate:{opacity:l===Y?1:0,y:l===Y?0:20,pointerEvents:l===Y?"auto":"none",visibility:l===Y?"visible":"hidden"},transition:{duration:.2}},i.createElement("div",{className:"today-content"},i.createElement("div",{className:"section"},i.createElement(x.A.Title,{level:5,className:"section-title"},(0,m.Ru)("mood_this_week")),_e?i.createElement(a.A,{active:!0,paragraph:{rows:3}}):i.createElement(B.Ay,{type:"week",moods:Ae.moods,satisfyLevels:Ae.satisfyLevels})),i.createElement("div",{className:"section"},i.createElement(x.A.Title,{level:5,className:"section-title"},(0,m.Ru)("today_activities"),"\xa0",i.createElement(E.A,{options:[(0,m.Ru)("common_today"),(0,m.Ru)("common_tomorrow")].map(function(e){return e.toLowerCase()}),size:"small",onChange:function(){var e=(0,y.A)(h().mark(function e(t){var n,r;return h().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==(0,m.Ru)("common_today").toLowerCase()){e.next=1;break}de(ee||[]),e.next=3;break;case 1:return n=(0,F.f)(ne,1),e.next=2,(0,K.J7)((0,z.o)(n),(0,P.D)(n));case 2:r=e.sent,de(r||[]);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()})),i.createElement("div",{className:"tasks-list"},ue&&ue.length>0?i.createElement(i.Fragment,null,ue.map(function(e){return i.createElement("div",{key:e._id,className:"task-item-wrapper"},i.createElement(H.A,{label:e.title,isChecked:e.status===G.vV,onCheckChange:function(t){ce((0,v.xm)([{_id:e._id,status:t?G.vV:G.c}])),Se.mutate({_id:e._id,status:t?G.vV:G.c})}}),i.createElement(w.A,{content:i.createElement("div",{className:"event-actions flex-col gap-y-4 align-start"},i.createElement(c.Ay,{type:"text",icon:i.createElement(R.A,null),onClick:function(){return ve(e),void be(!0)},block:!0,className:"justify-start"},(0,m.Ru)("event_edit")),i.createElement(c.Ay,{type:"text",danger:!0,icon:i.createElement(N.A,null),onClick:function(){var n,r;e._id&&(n=e._id,t.confirm({title:(0,m.Ru)("event_remove"),content:(0,m.Ru)("event_remove_confirm"),okText:(0,m.Ru)("common_yes"),cancelText:(0,m.Ru)("common_no"),okButtonProps:{danger:!0,className:"is-deep"},onOk:(r=(0,y.A)(h().mark(function e(){return h().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=1,(0,K.SX)(n);case 1:ue&&ce((0,v.Lz)(n)),e.next=3;break;case 2:e.prev=2,e.catch(0);case 3:case"end":return e.stop()}},e,null,[[0,2]])})),function(){return r.apply(this,arguments)}),cancelButtonProps:{className:"is-deep"}}))},block:!0,className:"justify-start"},(0,m.Ru)("event_remove"))),trigger:"click",placement:"bottomRight"},i.createElement(c.Ay,{type:"text",icon:i.createElement(S.A,null),size:"small"})))})):i.createElement(x.A.Text,{type:"secondary"},(0,m.Ru)("no_activities_today")),i.createElement("div",{className:"add-task-button"},i.createElement(c.Ay,{className:"is-deep",type:"primary",icon:i.createElement(D.A,null),onClick:Oe},(0,m.Ru)("add_activity"))))))),i.createElement(I.P.div,{key:"goals",initial:!1,animate:{opacity:l===Z?1:0,y:l===Z?0:20,pointerEvents:l===Z?"auto":"none",visibility:l===Z?"visible":"hidden"},transition:{duration:.2}},i.createElement("div",{className:"goals-content"},i.createElement("div",{className:"goals-filter"},i.createElement(_.A,{checked:f,onChange:function(e){return g(e.target.checked)}},(0,m.Ru)("Show ongoing only"))),Ne?i.createElement(a.A,{active:!0,paragraph:{rows:5}}):Re&&Re.length>0?i.createElement("div",{className:"goals-list"},i.createElement(O.N,{mode:"popLayout"},(Re||[]).map(function(e,t){return i.createElement(I.P.div,{key:e._id,className:"goal-item",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.2,delay:.05*t,ease:"easeOut"},whileHover:{scale:1.002},whileTap:{scale:.95}},i.createElement(J.Q,{goal:e,onArchive:function(e){return De.mutate(e)},onClick:function(e){return U("/goals/".concat(e))}}))}))):i.createElement("div",{className:"flex-col gap-x-16"},f?i.createElement(x.A.Text,{type:"secondary"},(0,m.Ru)("no_ongoing_goals_found")):i.createElement(i.Fragment,null,i.createElement(x.A.Text,{type:"secondary"},(0,m.Ru)("no_goals_found")),i.createElement("div",{className:"flex justify-center flex-1"},i.createElement(c.Ay,{type:"primary",onClick:function(){return U("/goals")},className:"is-deep"},(0,m.Ru)("Add goal"))))))))),i.createElement(V.A,{visible:he,event:pe,onClose:function(){ve(void 0),be(!1)},onSave:Ie}))};var X=n(45458),$=(n(85405),n(38349)),ee=n(62977),te=n(232),ne=n(27197),re=n(88652),ie=n(92089),ae=n(69821),oe=n(50329),ce=n(68e3),le=n(74353),se=n.n(le),ue=n(2622),de=n(66672),me=n(72767),fe=n(65587),pe=n(66407),ve=n(82960),ye="text",ge="greeting",he="bot-daily-reflection",be="satisfaction-slider",xe="confirm-message",Ee="reschedule-question",we="reschedule-confirm-question",_e="reschedule-suggestions",Ae="reschedule-confirm",ke=n(64467),Re=n(863),Ne=n(51802),Se=n(71099),De=n(89480);function Oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(n),!0).forEach(function(t){(0,ke.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oe(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var je={1:"\u{1f622}",4:"\u{1f642}",7:"\u{1f604}",10:"\u{1f973}"};const Te=function(){var e,t,n,o=(0,f.S)().user,l=(0,j.jE)(),s=(0,p.d4)(function(e){return e.dailyReflection.currentReflection}),u=(0,p.d4)(function(e){return e.dailyReflection.selectedDate}),d=i.useMemo(function(){return new Date(u)},[u]),g=(0,p.d4)(function(e){return e.dailyReflection.appConversation}),b=(0,i.useState)((null==s||null===(e=s.meta)||void 0===e||null===(e=e.meta)||void 0===e?void 0:e.satisfyLevel)||5),E=(0,r.A)(b,2),w=E[0],_=E[1],A=(0,p.wA)(),k=function(e){var t={id:"user-response-".concat(Date.now()),side:"outgoing",contentType:"text",content:e};A((0,v.hE)(t))},R=(0,q.n)({mutationFn:function(e){return(0,W.It)(e)},onSuccess:function(){l.invalidateQueries({queryKey:["weekly-reflections","day-reflection"]})},onError:function(e){A((0,v.ni)(!1))}}),N=(0,q.n)({mutationFn:function(e){return(0,W.dm)(e)},onError:function(e){A((0,v.ni)(!1))}}),S=function(){var e,t;return{id:"confirm-task-review",side:"incoming",contentType:"confirm-message",meta:{text:(0,ue.JT)((0,m.Ru)("reflection_review_activities_message"),[{key:"user_name",value:null!==(e=null!==(t=null==o?void 0:o.givenName)&&void 0!==t?t:null==o?void 0:o.name)&&void 0!==e?e:""}])}}},D=function(){var e=(0,y.A)(h().mark(function e(t){var n,r,i,a,o;return h().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(A((0,v.ni)(!0)),k("".concat(t,"/10")),n=De.R[t],e.prev=1,null==s||!s._id){e.next=3;break}return e.next=2,N.mutateAsync({_id:s._id,meta:{type:G.Qe,meta:Ie(Ie({},null===(r=s.meta)||void 0===r?void 0:r.meta),{},{satisfyLevel:t,mood:n,emoji:De.S[t]})}});case 2:A((0,v.pm)({satisfyLevel:t,mood:n,emoji:De.S[t]})),e.next=5;break;case 3:return i={datetime:(0,Se.ZB)(d),type:G.Qe,meta:{type:G.Qe,meta:{satisfyLevel:t,mood:n,emoji:De.S[t]}},conversation:{conversationId:g._id}},e.next=4,R.mutateAsync(i);case 4:(a=e.sent)&&A((0,v.jF)((0,v.Ko)(a)));case 5:o=S(),A((0,v.hE)(o)),A((0,v.ni)(!1)),e.next=7;break;case 6:e.prev=6,e.catch(1),A((0,v.ni)(!1));case 7:case"end":return e.stop()}},e,null,[[1,6]])}));return function(t){return e.apply(this,arguments)}}();return g?i.createElement("div",{className:"reflection-question"},i.createElement(x.A.Text,{className:"font-size-16"},(0,m.Ru)("reflection_satisfaction_question")),i.createElement("div",{className:"satisfaction-slider bot-8px"},i.createElement(Re.A,{min:1,max:10,marks:je,step:1,defaultValue:5,value:w,onChange:function(e){return _(e)},tooltip:{autoAdjustOverflow:!1,formatter:function(e){return De.R[e]}},disabled:!(null==s||null===(t=s.meta)||void 0===t||null===(t=t.meta)||void 0===t||!t.satisfyLevel)}),!(null!=s&&null!==(n=s.meta)&&void 0!==n&&null!==(n=n.meta)&&void 0!==n&&n.satisfyLevel)&&i.createElement(I.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},className:"submit-satisfaction"},i.createElement(c.Ay,{type:"primary",icon:i.createElement(Ne.A,null),onClick:function(){return D(w)},className:"is-deep"},(0,m.Ru)("common_next"))))):i.createElement(a.A,{active:!0})};var qe=n(37515),Ce=n(16532),ze=n(75704),Pe=n(69778),Me=n(85018),Le=n(35604),Fe=n(57697),Be=n(66653),He=n(43439),Ke=n(61841),Qe=n(36552),We=n(26067);const Ge=function(e){var t=e.content,n=e.onConfirm,r=e.loading,a=void 0!==r&&r,o=e.confirmLabel;return i.createElement("div",{className:"flex-col gap-x-8"},"string"==typeof t?i.createElement(x.A.Text,{className:"font-size-16"},t):t,i.createElement(Qe.A,{className:"no-margin"}),i.createElement("div",{className:"flex justify-center"},i.createElement(I.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},className:"submit-confirmation"},i.createElement(c.Ay,{type:"primary",icon:i.createElement(We.A,null),onClick:n,className:"is-deep",loading:a},o||(0,m.Ru)("common_next")))))};function Je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Je(Object(n),!0).forEach(function(t){(0,ke.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Je(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const Ye=function(){var e,t,n,r,a=(0,f.S)().user,o=(0,p.wA)(),c=(0,p.d4)(function(e){return e.dailyReflection}).todayEvents,l=(0,p.d4)(function(e){return e.dailyReflection.selectedDate}),s=i.useMemo(function(){return new Date(l)},[l]),u=(0,p.d4)(function(e){return e.dailyReflection.currentReflection}),d=(0,p.d4)(function(e){return e.dailyReflection.appConversation}),g=(null==u||null===(e=u.meta)||void 0===e||null===(e=e.meta)||void 0===e||null===(e=e.mood)||void 0===e?void 0:e.toLowerCase())||"",b=(0,T.I)({queryKey:["daily-events-recap",s.toISOString(),g],queryFn:(r=(0,y.A)(h().mark(function e(){var t,n;return h().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,null==u||null===(t=u.conversation)||void 0===t||!t.eventRecapSummary){e.next=1;break}return e.abrupt("return",null);case 1:return e.next=2,(0,K.qu)(g,s);case 2:return(n=e.sent)&&o((0,v.jF)(Ve(Ve({},u),{},{conversation:{conversationId:d._id,eventRecapSummary:n.summary,eventRecapComment:n.comment}}))),e.abrupt("return",n);case 3:throw e.prev=3,e.catch(0);case 4:case"end":return e.stop()}},e,null,[[0,3]])})),function(){return r.apply(this,arguments)}),enabled:!1,refetchOnReconnect:!1,refetchOnWindowFocus:!1,retry:3}),x=function(){var e={id:"".concat(Ae,"-").concat(Date.now()),side:"incoming",contentType:Ae};o((0,v.hE)(e))},E=function(){var e={id:"gratitude-question-".concat(Date.now()),side:"incoming",contentType:ye,content:(0,m.Ru)("reflection_gratitude_question")};o((0,v.hE)(e))},w=(0,i.useCallback)((0,y.A)(h().mark(function e(){var t,n,r,i,a;return h().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o((0,v.ni)(!0)),e.prev=1,e.next=2,b.refetch();case 2:t=e.sent,null!=(n=t.data)&&n.summary&&(r=At("incoming","recap-summary",n.summary),o((0,v.hE)(r))),null!=n&&n.comment&&(i=At("incoming","recap-comment",n.comment),o((0,v.hE)(i))),null!=(a=null==c?void 0:c.filter(function(e){return e.status===G.c}))&&a.length?x():E(),e.next=4;break;case 3:e.prev=3,e.catch(1);case 4:return e.prev=4,o((0,v.ni)(!1)),e.finish(4);case 5:case"end":return e.stop()}},e,null,[[1,3,4,5]])})),[b,c]);return i.createElement(Ge,{content:(0,ue.JT)((0,m.Ru)("reflection_review_activities_message"),[{key:"user_name",value:null!==(t=null!==(n=null==a?void 0:a.givenName)&&void 0!==n?n:null==a?void 0:a.name)&&void 0!==t?t:""}]),onConfirm:w})};var Ze=n(31656),Ue=n(25948),Xe=n(76531),$e=n(25508);n(31869);function et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function tt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?et(Object(n),!0).forEach(function(t){(0,ke.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):et(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var nt=(0,$e.Mz)(function(e){return e.dailyReflection.todayEvents},function(e){return(e||[]).reduce(function(e,t){return t._id&&(e[t._id]=t),e},{})}),rt=function(e){var t=e.events,n=(0,f.S)().user,a=(0,j.jE)(),o=(0,p.wA)(),s=(0,p.d4)(function(e){return e.dailyReflection.appConversation}),u=(0,p.d4)(function(e){return e.dailyReflection.selectedDate}),d=(0,p.d4)(function(e){return e.dailyReflection.currentReflection}),g=(0,p.d4)(nt),b=(0,i.useState)(t||[]),x=(0,r.A)(b,2),E=x[0],w=x[1],_=E.filter(function(e){return!e.canDiscard}),A=E.filter(function(e){return e.canDiscard}),k=function(){var e=(0,y.A)(h().mark(function e(t){var n,r;return h().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=E.find(function(e){return e.eventId===t})){e.next=1;break}return e.abrupt("return");case 1:r=tt(tt({},n),{},{canDiscard:!n.canDiscard}),w(E.map(function(e){return e.eventId===t?r:e})),a.invalidateQueries({queryKey:["day-events"]});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=(0,y.A)(h().mark(function e(t,n){return h().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return w(E.map(function(e){return e.eventId===t?tt(tt({},e),{},{priority:n}):e})),e.next=1,(0,K.qM)({_id:t,priority:n});case 1:a.invalidateQueries({queryKey:["day-events"]});case 2:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),N=function(e){var t=g[e.eventId],n=e.priority||(null==t?void 0:t.priority);return i.createElement("div",{key:e.eventId,className:"event-item-wrapper"},i.createElement("div",{className:"event-item flex".concat(e.canDiscard?" discarded":"").concat(n?" priority-".concat(n):"")},i.createElement("div",{className:"event-title"},e.eventTitle),i.createElement("div",{className:"event-actions flex gap-x-8"},i.createElement(Ue.A,{suffixIcon:null,value:n,onChange:function(t){R(e.eventId,t)},optionRender:function(e){return i.createElement("div",{style:{textAlign:"center"}},e.label)},labelRender:function(e){return i.createElement("div",{style:{textAlign:"center"}},e.label)},options:Xe.Z,onClick:function(e){return e.stopPropagation()}}))),i.createElement(ee.A,{title:e.canDiscard?(0,m.Ru)("reschedule_to_reschedule"):(0,m.Ru)("reschedule_discard")},i.createElement(c.Ay,{type:"text",shape:"circle",icon:e.canDiscard?i.createElement(Ze.A,null):i.createElement(l.A,{style:{color:"red"}}),onClick:function(){return k(e.eventId)},className:"toggle-discard-btn"})))};return i.createElement("div",{className:"reschedule-confirm-questions flex-col gap-x-16"},i.createElement("span",{className:"font-size-16"},(0,m.Ru)("reschedule_to_reschedule_description")),i.createElement("div",{className:"reschedule-section"},i.createElement("div",{className:"section-title"},(0,m.Ru)("reschedule_to_reschedule_title")),i.createElement("div",{className:"events-list flex-col gap-x-12"},_.length>0?_.map(N):i.createElement("div",{className:"reschedule-no-events flex justify-center"},i.createElement("span",{className:"font-size-16"},(0,m.Ru)("reschedule_suggestions_no_suggestions"))))),i.createElement("div",{className:"reschedule-section"},i.createElement("div",{className:"section-title"},(0,m.Ru)("reschedule_to_discard_title")),i.createElement("div",{className:"events-list flex-col gap-x-12"},A.length>0?A.map(N):i.createElement("div",{className:"reschedule-no-events flex justify-center"},i.createElement("span",{className:"font-size-16"},(0,m.Ru)("reschedule_suggestions_no_suggestions"))))),i.createElement("div",{className:"flex justify-center"},i.createElement(c.Ay,{type:"primary",icon:i.createElement(Ne.A,null),onClick:function(){var e;!function(e){var t={id:"user-response-".concat(Date.now()),side:"outgoing",contentType:"text",content:e};o((0,v.hE)(t))}((0,m.Ru)("common_confirm"));var t={day:u,mood:null==d||null===(e=d.meta)||void 0===e||null===(e=e.meta)||void 0===e?void 0:e.mood,eventIds:_.map(function(e){return e.eventId})};_.length>0&&(0,K.b$)(_.map(function(e){return{_id:e.eventId,priority:e.priority}})).then(function(e){e.success&&o((0,v.xm)(e.updated))});var r=(0,ze.u1)(He.f3,JSON.stringify(t),n._id);(0,Me._z)(r,s._id)},className:"is-deep"},(0,m.Ru)("common_next"))))},it=n(82284),at=n(53986),ot=(n(79520),n(36449)),ct=n(83937),lt=n(49222),st=n(20011),ut=n(7142),dt=n(47152),mt=n(16370),ft=n(15622),pt=n(49785),vt=n(38342),yt=n(18373);function gt(e){var t=function(e,t){if("object"!=(0,it.A)(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=(0,it.A)(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==(0,it.A)(t)?t:t+""}function ht(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function bt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ht(Object(n),!0).forEach(function(t){(0,ke.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ht(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var xt=function(e){var t=e.slots,n=(0,f.S)().user,a=(0,p.wA)(),o=(0,j.jE)(),s=ct.A.useForm(),u=(0,r.A)(s,1)[0],g=(0,f.S)().screenWidth,b=(0,i.useState)(!1),x=(0,r.A)(b,2),E=x[0],_=x[1];(0,i.useEffect)(function(){_(g<=d.NU.sm)},[g]);var A=(0,p.d4)(function(e){return e.dailyReflection.appConversation}),k=(0,p.d4)(function(e){return(e.dailyReflection.todayEvents||[]).reduce(function(e,t){return t._id&&(e[t._id]=t),e},{})}),R=(0,p.d4)(function(e){return e.dailyReflection.selectedDate}),N=(0,i.useState)(t),O=(0,r.A)(N,2),I=O[0],T=O[1],q=(0,i.useState)({}),C=(0,r.A)(q,2),z=C[0],P=C[1],M=(0,i.useState)({}),L=(0,r.A)(M,2),F=L[0],B=L[1],H=(0,i.useState)({visible:!1,eventId:"",title:"",date:"",startTime:"",duration:60,isLoading:!1,error:void 0}),K=(0,r.A)(H,2),Q=K[0],W=K[1];(0,i.useEffect)(function(){T(t)},[t]),(0,i.useEffect)(function(){var e={};I.forEach(function(t){var n=Array.from(new Set(t.recommendedSlots.map(function(e){return e.date}))).sort(function(e,t){return new Date(e).getTime()-new Date(t).getTime()}),r=n.map(function(e){return{value:e,label:(0,ie.GP)(new Date(e),"EEE, dd MMM")}}),i={};n.forEach(function(e){var n,r=(null===(n=t.recommendedSlots.find(function(t){return t.date===e}))||void 0===n?void 0:n.slots)||[];i[e]=r.map(function(e){return{value:"".concat(new Date(e.start).getTime(),"-").concat(new Date(e.end).getTime()),label:"".concat((0,ie.GP)(new Date(e.start),"HH:mm")," - ").concat((0,ie.GP)(new Date(e.end),"HH:mm"))}})}),e[t.eventId]={dateOptions:r,timeSlotsByDate:i}}),B(e)},[I]),(0,i.useMemo)(function(){var e={};I.forEach(function(t){if(!z[t.eventId]&&t.recommendedSlots.length>0){var n=t.recommendedSlots[0],r=n.slots[0];e[t.eventId]={date:n.date,timeSlot:r?"".concat(new Date(r.start).getTime(),"-").concat(new Date(r.end).getTime()):null}}}),Object.keys(e).length>0&&P(function(t){return bt(bt({},t),e)})},[I]);var G=function(e){var t=(0,ze.u1)(He.pL,e,n._id);(0,Me._z)(t,A._id);var r={id:"user-response-".concat(Date.now()),side:"outgoing",contentType:"text",content:e};a((0,v.hE)(r))},J=function(){var e=(0,y.A)(h().mark(function e(){var t,i,o;return h().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,G((0,m.Ru)("common_save")),a((0,v.ni)(!0)),!((t=I.map(function(e){var t=z[e.eventId];if(null==t||!t.timeSlot)return null;var n=t.timeSlot.split("-"),i=(0,r.A)(n,2),a=i[0],o=i[1];return{_id:e.eventId,startDate:new Date(parseInt(a)),endDate:new Date(parseInt(o))}}).filter(function(e){return null!==e})).length>0)){e.next=2;break}return i={events:t},o=(0,ze.u1)(He.fh,JSON.stringify(i),n._id),e.next=1,(0,Me._z)(o,A._id,30);case 1:t.forEach(function(e){(0,re.r)(e.startDate,new Date(R))||(a((0,v.Lz)(e._id)),T(function(t){return t.filter(function(t){return t.eventId!==e._id})}))});case 2:e.next=4;break;case 3:e.prev=3,e.catch(0);case 4:return e.prev=4,a((0,v.ni)(!1)),e.finish(4);case 5:case"end":return e.stop()}},e,null,[[0,3,4,5]])}));return function(){return e.apply(this,arguments)}}(),V=function(e,t){var n=t.split("-"),i=(0,r.A)(n,2),a=i[0],o=i[1],c=(0,ie.GP)(new Date(parseInt(a)),"yyyy-MM-dd"),l=(0,ie.GP)(new Date(parseInt(a)),"HH:mm"),s=(0,ie.GP)(new Date(parseInt(o)),"HH:mm");B(function(n){return bt(bt({},n),{},(0,ke.A)({},e,bt(bt({},n[e]),{},{timeSlotsByDate:bt(bt({},n[e].timeSlotsByDate),{},(0,ke.A)({},c,[{value:t,label:"".concat(l," - ").concat(s)}]))})))}),P(function(n){return bt(bt({},n),{},(0,ke.A)({},e,bt(bt({},n[e]),{},{date:c,timeSlot:t})))})},Y=function(e){var t=z[e],n=I.find(function(t){return t.eventId===e});if(n&&t){var i="10:00",a=(0,ie.GP)(new Date,d.np),o=60;if(a=t.date,t.timeSlot){var c=t.timeSlot.split("-"),l=(0,r.A)(c,2),s=l[0],m=l[1];i=(0,ie.GP)(new Date(parseInt(s)),"HH:mm");var f=new Date(parseInt(s)),p=new Date(parseInt(m));o=(0,pt.o)(p,f)}W({visible:!0,eventId:e,title:n.eventTitle,date:a,startTime:i,duration:o,isLoading:!1,error:void 0}),setTimeout(function(){u.setFieldsValue({duration:o,startTime:se()(i,"HH:mm"),onDate:se()(a,"YYYY-MM-DD")})},0)}};return i.createElement("div",{className:"reschedule-suggestions flex-col gap-x-16"},i.createElement("span",{className:"font-size-16"},(0,m.Ru)("reschedule_suggestions_description")),i.createElement("div",{className:"reschedule-section"},i.createElement("div",{className:"section-title"},(0,m.Ru)("reschedule_suggestions_title")),i.createElement("div",{className:"events-list flex-col gap-x-12"},I.length>0?I.map(function(e){var t=z[e.eventId],n=F[e.eventId],r=k[e.eventId],a=null!=r&&r.startDate?(0,ie.GP)(new Date(r.startDate),"HH:mm, MMM dd"):"",l=null!=t&&t.date&&null!=r&&r.startDate?(0,yt.c)(new Date(t.date),new Date(r.startDate)):0,s=[{key:"remove",label:(0,m.Ru)("common_remove"),onClick:function(){return t=e.eventId,T(function(e){return e.filter(function(e){return e.eventId!==t})}),P(function(e){return e[t],(0,at.A)(e,[t].map(gt))}),void o.invalidateQueries({queryKey:["day-events"]});var t}},{key:"suggest-more",label:(0,m.Ru)("common_suggest_more"),onClick:function(){e.eventId}}];return i.createElement("div",{key:e.eventId,className:"flex event-item".concat(null!=r&&r.priority?" priority-".concat(null==r?void 0:r.priority):"")},i.createElement("div",{className:"flex gap-x-8 full-width"},i.createElement("div",{className:"event-title flex-1"},e.eventTitle),i.createElement(w.A,{placement:"bottomRight",content:i.createElement("div",{className:"flex-col"},s.map(function(e){return i.createElement(c.Ay,{key:e.key,type:"text",onClick:e.onClick},e.label)})),trigger:"click"},i.createElement(c.Ay,{type:"text",icon:i.createElement(S.A,null)}))),r?i.createElement("div",{className:"event-actions flex w-full gap-x-8 flex-col align-center"},i.createElement("div",{className:"reschedule-info"},function(e,t){for(var n=e.split(/:([\w]+)/),r=[],a=function(e){if(e%2==0)r.push(n[e]);else{var i,a=null===(i=t.find(function(t){return t.key===n[e]}))||void 0===i?void 0:i.value;a&&r.push(a)}},o=0;o<n.length;o++)a(o);return i.createElement(i.Fragment,null,r)}((0,m.Ru)("reschedule_from_to"),[{key:"old_datetime",value:i.createElement("b",null,a)}])),i.createElement("div",{className:"flex gap-x-8"},i.createElement(Ue.A,{className:E?"w-full":"",value:null==t?void 0:t.date,onChange:function(t){return n=e.eventId,r=t,o=(null===(a=((null===(i=F[n])||void 0===i?void 0:i.timeSlotsByDate[r])||[])[0])||void 0===a?void 0:a.value)||null,void P(function(e){return bt(bt({},e),{},(0,ke.A)({},n,{date:r,timeSlot:o}))});var n,r,i,a,o},options:null==n?void 0:n.dateOptions,optionFilterProp:"label",dropdownRender:function(t){return i.createElement("div",{className:"flex gap-x-8 full-width justify-center"},i.createElement("div",null,t),i.createElement(Qe.A,{style:{margin:0}}),i.createElement("div",{className:"full-width"},i.createElement(c.Ay,{type:"primary",className:"full-width",onClick:function(){return Y(e.eventId)}},(0,m.Ru)("reschedule_suggestions_let_me_pick"))))}}),i.createElement(Ue.A,{className:"flex-1",value:null==t?void 0:t.timeSlot,onChange:function(t){return V(e.eventId,t)},options:null!=t&&t.date?null==n?void 0:n.timeSlotsByDate[t.date]:[],dropdownRender:function(t){return i.createElement("div",{className:"flex gap-x-8 full-width justify-center"},i.createElement("div",null,t),i.createElement(Qe.A,{style:{margin:0}}),i.createElement("div",{className:"full-width"},i.createElement(c.Ay,{type:"primary",className:"full-width",onClick:function(){return Y(e.eventId)}},(0,m.Ru)("reschedule_suggestions_let_me_pick"))))}})),l>0&&i.createElement("div",{className:"days-later"},"(",(0,ue.JT)((0,m.Ru)("reschedule_days_later"),[{key:"days",value:l.toString()}]),")")):i.createElement("span",null,(0,m.Ru)("reschedule_rescheduled")))}):i.createElement("div",{className:"reschedule-no-events flex justify-center"},i.createElement("span",{className:"font-size-16"},(0,m.Ru)("reschedule_suggestions_no_suggestions"))))),i.createElement("div",{className:"flex justify-between"},i.createElement(c.Ay,{icon:i.createElement(l.A,null),onClick:function(){},className:"is-deep"},(0,m.Ru)("common_skip")),i.createElement(c.Ay,{type:"primary",icon:i.createElement(Ne.A,null),onClick:J,className:"is-deep"},(0,m.Ru)("common_next"))),i.createElement(lt.A,{title:(0,m.Ru)("reschedule_suggestions_customize_time"),open:Q.visible,onCancel:function(){return W(function(e){return bt(bt({},e),{},{visible:!1})})},footer:null,width:400},i.createElement(ct.A,{form:u,layout:"vertical"},i.createElement("div",{className:"time-picker-modal"},z[Q.eventId]&&i.createElement("div",{className:"selected-time-summary"},i.createElement("div",{className:"summary-content"},(0,m.Ru)("reschedule_suggestions_summary")," ",i.createElement("strong",null,(0,ie.GP)(new Date(z[Q.eventId].date),"EEE, dd MMM"))," ".concat(function(e){if(!e)return"";var t=e.split("-"),n=(0,r.A)(t,2),i=n[0],a=n[1];return(0,ue.JT)((0,m.Ru)("time_from_to"),[{key:"start",value:(0,ie.GP)(new Date(parseInt(i)),"HH:mm")},{key:"end",value:(0,ie.GP)(new Date(parseInt(a)),"HH:mm")}])}(z[Q.eventId].timeSlot)),i.createElement("span",{className:"duration-text"},"\n(".concat(function(e){if(!e)return"";var t=e.split("-"),n=(0,r.A)(t,2),i=n[0],a=n[1];return(0,Se.U0)({toDate:new Date(parseInt(a)),fromDate:new Date(parseInt(i)),resetTime:!1,locale:(0,d.vv)()})}(z[Q.eventId].timeSlot),")")))),i.createElement(Qe.A,{style:{margin:"12px 0"}}),i.createElement("div",{className:"duration-control"},i.createElement(c.Ay,{icon:i.createElement(ot.A,null),onClick:function(){var e=u.getFieldValue("duration")||Q.duration,t=Math.max(15,e-15);u.setFieldValue("duration",t)}}),i.createElement(ct.A.Item,{label:(0,m.Ru)("week_view_activity_duration"),name:"duration",rules:[{required:!0,message:(0,m.Ru)("common_required_field")}],initialValue:Q.duration,className:"flex-1 m-0"},i.createElement(st.A.Compact,null,i.createElement(ut.A,{min:15,step:15,style:{width:"100%"}}),(0,m.Ru)("week_view_activity_duration_minutes"))),i.createElement(c.Ay,{icon:i.createElement(D.A,null),onClick:function(){var e=(u.getFieldValue("duration")||Q.duration)+15;u.setFieldValue("duration",e)}})),i.createElement(dt.A,{gutter:16},i.createElement(mt.A,{span:12},i.createElement(ct.A.Item,{label:(0,m.Ru)("common_start_time"),name:"startTime",rules:[{required:!0,message:(0,m.Ru)("common_required_field")}],initialValue:se()(Q.startTime,"HH:mm")},i.createElement(ft.A,{format:"HH:mm",minuteStep:15,style:{width:"100%"},needConfirm:!1}))),i.createElement(mt.A,{span:12},i.createElement(ct.A.Item,{label:(0,m.Ru)("week_view_activity_on_date"),name:"onDate",rules:[{required:!0,message:(0,m.Ru)("common_required_field")}],initialValue:se()(Q.date,"YYYY-MM-DD")},i.createElement(te.A,{format:"DD MMM YYYY",style:{width:"100%"},disabledDate:function(e){return e&&e<se()().startOf("day")}})))),Q.error&&i.createElement("div",{className:"error-message",style:{color:"red",marginBottom:"16px"}},Q.error),i.createElement(c.Ay,{type:"primary",block:!0,className:"is-deep",onClick:function(){u.validateFields().then(function(e){W(function(e){return bt(bt({},e),{},{isLoading:!0,error:void 0})});try{var t=e.duration,n=e.startTime,r=e.onDate.toDate(),i=new Date(r);i.setHours(n.hour(),n.minute(),0,0);var a=(0,vt.z)(i,t);V(Q.eventId,"".concat(i.getTime(),"-").concat(a.getTime())),W(function(e){return bt(bt({},e),{},{visible:!1,isLoading:!1})})}catch(e){W(function(e){return bt(bt({},e),{},{isLoading:!1,error:(0,m.Ru)("error_creating_activity_message")})})}}).catch(function(){})},loading:Q.isLoading},(0,m.Ru)("common_save"))))))};const Et=function(){var e=(0,f.S)().user,t=(0,p.d4)(function(e){return e.dailyReflection}).todayEvents,n=(0,p.d4)(function(e){return e.dailyReflection.selectedDate}),o=i.useMemo(function(){return new Date(n)},[n]),c=(0,p.d4)(function(e){return e.dailyReflection.currentReflection}),l=(0,p.d4)(function(e){return e.dailyReflection.appConversation}),s=(0,i.useState)([]),u=(0,r.A)(s,2),d=u[0],v=u[1];(0,i.useEffect)(function(){v((null==t?void 0:t.filter(function(e){return e.status!==G.vV}))||[])},[t]);return t?0===d.length?i.createElement("span",{className:"font-size-16"},(0,m.Ru)("reflection_reschedule_no_events")):i.createElement(Ge,{content:(0,m.Ru)("reflection_reschedule_confirm_question"),onConfirm:function(){if(d&&d.length>0&&e){var t,n={day:o,mood:null==c||null===(t=c.meta)||void 0===t||null===(t=t.meta)||void 0===t?void 0:t.mood,eventIds:d.map(function(e){return e._id})},r=(0,ze.u1)(He.K_,JSON.stringify(n),e._id);null!=l&&l._id&&(0,Me._z)(r,l._id)}}}):i.createElement(a.A,{active:!0})};var wt=function(){var e,t=(0,p.d4)(function(e){return e.dailyReflection.selectedDate}),n=(0,T.I)({queryKey:["daily-reflection-bot",t],queryFn:(e=(0,y.A)(h().mark(function e(){return h().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,(0,W.Sx)(t);case 1:return e.abrupt("return",e.sent);case 2:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)}),refetchOnReconnect:!1,refetchOnWindowFocus:!1}),r=n.data;return n.isLoading?i.createElement("div",{className:"flex justify-center items-center w-full"},i.createElement(a.A,{active:!0}),i.createElement("div",{style:{opacity:0,height:0,wordBreak:"break-all"}},"__________________________________________________________")):i.createElement("div",{className:"font-size-16"},r)},_t=n(36841),At=function(e,t,n){return{id:"".concat(t,"-").concat(Date.now()),side:e,contentType:"text",content:n}};const kt=function(){var e,t=(0,f.S)().user,n=(0,p.wA)(),o=(0,j.jE)(),l=(0,p.d4)(function(e){return e.dailyReflection.selectedDate}),s=i.useMemo(function(){return new Date(l)},[l]),u=(0,p.d4)(function(e){return e.dailyReflection.reflectionConversation}),d=(0,p.d4)(function(e){return e.dailyReflection.appConversation}),g=(0,p.d4)(function(e){return e.dailyReflection.currentReflection}),b=(0,p.d4)(function(e){return e.dailyReflection.isThinking}),E=(0,i.useMemo)(function(){return(0,re.r)(s,new Date)},[s]),w=(0,p.d4)(function(e){return e.dailyReflection.todayEvents}),_=(0,i.useState)(Pe.QE),A=(0,r.A)(_,2),k=A[0],R=A[1],N=(0,i.useState)([]),S=(0,r.A)(N,2),D=S[0],O=S[1],I=(0,i.useState)(!1),q=(0,r.A)(I,2),C=q[0],M=q[1],L=(0,i.useState)(!1),B=(0,r.A)(L,2),H=B[0],Q=B[1],J=(0,i.useState)(0),V=(0,r.A)(J,2),Y=V[0],Z=V[1],U=(0,i.useState)([]),le=(0,r.A)(U,2),ke=le[0],Re=le[1],Ne=(0,i.useState)(!1),Se=(0,r.A)(Ne,2),De=Se[0],Oe=Se[1];(0,i.useEffect)(function(){D.length?n((0,v.ni)(!0)):n((0,v.ni)(!1))},[D]),(0,i.useEffect)(function(){return n((0,v.dR)()),M(!1),Q(!1),Re([]),Oe(!1),o.invalidateQueries({queryKey:["day-reflection","daily-reflection-events","daily-reflection-free-messages"]}),function(){M(!1),Q(!1),Re([]),Oe(!1)}},[l]),(0,i.useEffect)(function(){R(Pe.QE);var e=(0,Pe.Bk)(function(e){R(e),"connected"===e?Z(0):"connecting"!==e&&"reconnecting"!==e||"reconnecting"===e&&Z(function(e){return e+1})});return function(){e(),(0,Pe.G1)(),(0,Pe.A4)()}},[]),(0,i.useEffect)(function(){if(t&&s){(0,Pe.s_)(t.email),(0,Pe.Ng)();var e=(0,Pe.SG)((0,y.A)(h().mark(function e(){var r,i;return h().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={type:G.ZS,meta:{date:(0,ie.GP)(s,"yyyy-MM-dd")}},e.next=1,(0,ve.Vm)(G.ZS,JSON.stringify(r));case 1:if(i=e.sent){e.next=3;break}return i=(0,ze.Bc)(G.ZS,[null==t?void 0:t._id],r),e.next=2,(0,Me.cK)(i);case 2:i=e.sent;case 3:n((0,v.Xz)(i)),(0,Le.lA)(Pe.sZ,t._id,function(e,n){n.authorId!==t._id&&et(n)}),(0,Le.cK)(Pe.sZ,function(e){O(function(t){return[].concat((0,X.A)(t),[e])})}),(0,Le.Ro)(Pe.sZ,function(e){O(function(t){return t.filter(function(t){return t!==e})})}),(0,Me.Sh)(i._id).then(function(e){}).catch(function(e){});case 4:case"end":return e.stop()}},e)})));return function(){(0,Pe.mb)(Fe.W5),(0,Pe.mb)(Fe.ig),(0,Pe.mb)(Fe.v7),e&&e()}}},[t,s]),(0,i.useEffect)(function(){var e;d&&g&&(null!==(e=d.meta)&&void 0!==e&&null!==(e=e.meta)&&void 0!==e&&e.reflectionId||(0,ve.aw)(d._id,g._id))},[d,g]);var Ie,je,Qe,We=(0,T.I)({queryKey:["daily-reflection-free-messages",null==d?void 0:d._id],queryFn:(Ie=(0,y.A)(h().mark(function e(){var n;return h().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,(0,ve.VL)(d._id,null==t?void 0:t._id,0,100);case 1:return n=e.sent,e.abrupt("return",n||[]);case 2:case"end":return e.stop()}},e)})),function(){return Ie.apply(this,arguments)}),refetchOnReconnect:!1,refetchOnWindowFocus:!1,enabled:!(null==d||!d._id)}),Ge=We.data,Je=We.isLoading,Ve=(0,T.I)({queryKey:["day-reflection",l],queryFn:(je=(0,y.A)(h().mark(function e(){var t;return h().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,(0,W.fM)({type:G.Qe,fromDate:(0,z.o)(s),toDate:(0,P.D)(s)});case 1:if((t=e.sent)&&t.length){e.next=2;break}return e.abrupt("return",[]);case 2:return n((0,v.jF)((0,v.Ko)(t[0]))),e.abrupt("return",t);case 3:case"end":return e.stop()}},e)})),function(){return je.apply(this,arguments)}),refetchOnReconnect:!1,refetchOnWindowFocus:!1}),Ze=Ve.isLoading,Ue=(0,T.I)({queryKey:["daily-reflection-events",l],queryFn:(Qe=(0,y.A)(h().mark(function e(){var t;return h().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,(0,K.J7)((0,z.o)(s),(0,P.D)(s));case 1:return t=e.sent,n((0,v.Js)(t)),e.abrupt("return",t);case 2:case"end":return e.stop()}},e)})),function(){return Qe.apply(this,arguments)}),refetchOnReconnect:!1,refetchOnWindowFocus:!1}),Xe=Ue.isLoading,$e=function(e){var t="user-response-".concat(Date.now()),r={id:t,side:"outgoing",contentType:"text",content:e};if(n((0,v.hE)(r)),"connected"!==k){Re(function(e){return[].concat((0,X.A)(e),[t])});var i=(0,Pe.Bk)(function(e){"connected"===e&&setTimeout(function(){Re(function(e){return e.filter(function(e){return e!==t})}),i()},1e3)})}return t},et=function(e){var t=ye,r={};if(e.type===He.Ke)t=we,r={analyzedEvents:(0,Ke.Bl)(e.content,{analyzedEvents:[]}).analyzedEvents};else if(e.type===He.By){t=_e,r={slots:(0,Ke.Bl)(e.content,{eventsWithRecommendedSlots:[]}).eventsWithRecommendedSlots}}else if(e.type===He.fh)t=ye,e.content=(0,m.Ru)("common_confirm");else if(e.type===He.jC)t=ye,e.content=(0,m.Ru)("reflection_gratitude_question");else if(e.type===He.MP){var i=(0,Ke.Bl)(e.content,{reaction:"",targetMessageId:"",sender:""}),a=i.reaction,o=i.targetMessageId,c=i.sender;return void(o&&n((0,v.QJ)({messageId:o,emoji:a,sender:c})))}var l={id:e._id,side:"incoming",contentType:t,content:e.content,meta:r};n((0,v.hE)(l))},tt=(0,i.useCallback)(function(){var e,r,i=[function(){var e=(0,ue.JT)((0,m.Ru)("time_in_day_greeting"),[{key:"greeting_string",value:"".concat((0,ue.nr)(),",")}]);return{id:"greeting",side:"incoming",contentType:"greeting",content:e,meta:{greeting:e,userName:(null==t?void 0:t.givenName)||(null==t?void 0:t.name)||""}}}()],a={id:"bot-daily-reflection-".concat(l),side:"incoming",contentType:"bot-daily-reflection"};i.push(a);var o={id:"satisfaction-slider-".concat(l),side:"incoming",contentType:"satisfaction-slider"};if(i.push(o),n((0,v.L7)(i)),null!=g&&null!==(e=g.meta)&&void 0!==e&&null!==(e=e.meta)&&void 0!==e&&e.satisfyLevel){var c=g.meta.meta,s=c.satisfyLevel,u=c.mood,d=c.emoji;$e((0,ue.JT)((0,m.Ru)("common_it_s_something"),[{key:"something",value:"".concat(s,"/10 (").concat(u," ").concat(d,")")}]))}if(g)if(null!==(r=g.conversation)&&void 0!==r&&r.eventRecapSummary){var f=g.conversation,p=f.eventRecapSummary,y=f.eventRecapComment,h=At("incoming","recap",p);if(n((0,v.hE)(h)),y){var b=At("incoming","recap-comment",y);n((0,v.hE)(b))}Oe(!0)}else{var x={id:"confirm-task-review",side:"incoming",contentType:"confirm-message"};n((0,v.hE)(x))}},[g]);(0,i.useEffect)(function(){!d||Ze||C||M(!0)},[d,g,Ze,C]),(0,i.useEffect)(function(){C&&tt()},[C]);var nt=(0,i.useCallback)(function(){null==Ge||Ge.forEach(function(e){var r=(0,Ke.Bl)(e.content.content,{type:"",content:""}),i="text",a={},o=r.content||e.content.content;switch(r.type){case He.K_:case He.fh:return;case He.MP:var c=(0,Ke.Bl)(r.content,{reaction:"",targetMessageId:"",sender:""}),l=c.reaction,s=c.targetMessageId,u=c.sender;return void(s&&n((0,v.QJ)({messageId:s,emoji:l,sender:u})));case He.jC:o=(0,m.Ru)("reflection_gratitude_question");break;case He.Gf:o=(0,m.Ru)("reflection_no_reschedule_events");break;case He.f3:o=(0,m.Ru)("common_confirm");break;case He.By:var d=(0,Ke.Bl)(r.content,{eventsWithRecommendedSlots:[]}).eventsWithRecommendedSlots;i=_e,a={slots:d};break;case He.Ke:var f=(0,Ke.Bl)(r.content,{analyzedEvents:[]}).analyzedEvents;f.forEach(function(e){var t,n=null==w?void 0:w.find(function(t){return t._id===e.eventId});n&&(e.priority=null!==(t=n.priority)&&void 0!==t?t:e.priority)}),i=we,a={analyzedEvents:f}}var p={id:e.id,side:e.senderId===(null==t?void 0:t._id)?"outgoing":"incoming",contentType:i,content:o,meta:a};n((0,v.hE)(p))})},[w,Ge,n,null==t?void 0:t._id]);(0,i.useEffect)(function(){w&&t&&C&&void 0!==Ge&&!H&&(Q(!0),nt())},[t,C,Ge,w,nt]),(0,i.useEffect)(function(){if(void 0!==w&&!Je&&void 0!==Ge&&De){var e,t,r=Ge.map(function(e){return(0,Ke.Bl)(e.content.content,{type:"",content:""})}).find(function(e){return e.type===He.K_}),i=u.find(function(e){return e.contentType===Ae}),a=null==w?void 0:w.filter(function(e){return e.status===G.c});null!=a&&a.length?!i&&!r&&(t={id:"".concat(Ae,"-").concat(Date.now()),side:"incoming",contentType:Ae},n((0,v.hE)(t))):(e={id:"gratitude-question-".concat(Date.now()),side:"incoming",contentType:ye,content:(0,m.Ru)("reflection_gratitude_question")},n((0,v.hE)(e)))}},[Ge,Je,De,w]);var it=function(e){s&&n((0,v.un)((0,z.o)(e).toISOString()))},at=ke.length>0;return!t||Ze||Xe?i.createElement(a.A,{active:!0}):i.createElement("div",{className:"daily-reflection-main"},i.createElement($.A,{variant:"borderless",className:"conversation-card"},i.createElement("div",{className:"reflection-date"},i.createElement(ee.A,{title:(0,m.Ru)("previous_day")},i.createElement(c.Ay,{type:"default",shape:"circle",icon:i.createElement(oe.A,null),onClick:function(){s&&it((0,ae.e)(s,1))}})),i.createElement("div",{className:"date-display flex-col"},i.createElement(te.A,{value:s?se()(s):null,onChange:function(e){return e&&it(e.toDate())},format:"ddd, MMMM DD",allowClear:!1,variant:"borderless",suffixIcon:null,className:"date-picker-button",disabledDate:function(e){return e>se()().startOf("day")}}),i.createElement(x.A.Text,{type:"secondary"},(0,m.Ru)("daily_reflection_subtitle"))),i.createElement("div",{className:"flex-row align-center"},s&&!E&&i.createElement(ee.A,{title:(0,m.Ru)("next_day")},i.createElement(c.Ay,{type:"default",shape:"circle",icon:i.createElement(ce.A,null),onClick:function(){s&&it((0,F.f)(s,1))}})))),"reconnecting"===k&&Y>1&&i.createElement(ne.A,{message:(0,m.Ru)("socket_reconnecting_message"),type:"info",showIcon:!0,closable:!0,banner:!0,style:{marginBottom:16}}),"disconnected"===k&&i.createElement(ne.A,{message:(0,m.Ru)("socket_disconnect_message"),type:"warning",showIcon:!0,action:i.createElement(c.Ay,{size:"small",type:"primary",onClick:function(){return(0,Pe.Ng)()}},(0,m.Ru)("socket_disconnect_button")),closable:!0,banner:!0,style:{marginBottom:16}}),i.createElement("div",{className:"conversation-wrapper"},i.createElement(me.m,{conversation:u.map(function(e){var t=i.createElement(i.Fragment,null);return!function(e){return e.contentType===be}(e)?!function(e){return e.contentType===Ae}(e)?!function(e){return e.contentType===xe}(e)?!function(e){return e.contentType===Ee}(e)?!function(e){return e.contentType===we}(e)?!function(e){return e.contentType===_e}(e)?!function(e){return e.contentType===ge}(e)?!function(e){return e.contentType===he}(e)?function(e){return e.contentType===ye}(e)&&(t=i.createElement("div",{className:"font-size-16"},i.createElement(_t.Ay,null,e.content))):t=i.createElement(wt,null):t=i.createElement("div",{className:"reflection-greeting"},i.createElement("div",{className:"greeting-text"},e.meta.greeting),i.createElement(de.A,null,"".concat(e.meta.userName," \u{1f929}"))):t=i.createElement(xt,{slots:e.meta.slots}):t=i.createElement(rt,{events:e.meta.analyzedEvents}):t=i.createElement(Be.A,{question:e.meta.question,onYes:e.meta.onRescheduleAgree,onNo:e.meta.onRescheduleDisagree}):t=i.createElement(Ye,null):t=i.createElement(Et,null):t=i.createElement(Te,null),{id:e.id,side:e.side,content:t,reactions:e.reactions}}),onReactMessage:function(e,t,r){e&&n((0,v.QJ)({messageId:e,emoji:t,sender:r}))},incomingSideImg:i.createElement("img",{src:(0,m.ID)(Ce),width:48}),outgoingSideImg:i.createElement(pe.A,{imageUrl:null==t?void 0:t.pictureUrl,fallbackCharacter:(null==t||null===(e=t.name)||void 0===e?void 0:e[0])||"?",size:64}),incomingBubbleStyle:{backgroundColor:"var(--color-bg-gray-ultralight)",color:"var(--color-text)",borderColor:"var(--color-bg-gray-ultralight)"},outgoingBubbleStyle:{backgroundColor:"var(--color-blue)",color:"var(--color-white)",borderColor:"var(--color-blue)"},smallTail:!0,isThinking:b,thinkingContent:i.createElement(fe.A,{active:!0})})),i.createElement(qe.E,{onSend:function(){var e=(0,y.A)(h().mark(function e(r,i){var a,o,c;return h().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=$e(r),o=(0,ze.u1)(i,r,t._id),null==d||!d._id){e.next=2;break}return e.next=1,(0,Me._z)(o,d._id);case 1:(c=e.sent)&&n((0,v.q8)({messageId:a,newId:c}));case 2:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),suggestions:["End this session","What's on tomorrow?"],disabled:"disconnected"===k,connectionState:k,conversationId:null==d?void 0:d._id}),at&&i.createElement("div",{className:"pending-messages-notice"},i.createElement(ne.A,{message:(0,m.Ru)("pending_messages_notice"),type:"info",showIcon:!0,style:{marginTop:16}}))))};const Rt=function(){var e=(0,f.S)(),t=e.user,n=e.themeColor,y=e.screenWidth,g=(0,i.useState)(20),h=(0,r.A)(g,2),b=h[0],x=h[1],E=(0,i.useState)(!1),w=(0,r.A)(E,2),_=w[0],A=w[1],k=(0,p.wA)(),R=(0,p.d4)(function(e){return e.dailyReflection.drawerVisible}),N=(0,p.d4)(function(e){return e.dailyReflection.selectedDate}),S=i.useMemo(function(){return new Date(N)},[N]);if((0,i.useEffect)(function(){A(y<=d.NU.sm)},[y]),(0,i.useEffect)(function(){S||k((0,v.un)((0,z.o)(new Date).toISOString()))},[k,S]),(0,i.useLayoutEffect)(function(){if(!_){var e=document.querySelector(".daily-reflection-wrapper [data-panel-group]"),t=document.querySelectorAll(".daily-reflection-wrapper [data-panel-resize-handle]"),n=new ResizeObserver(function(){if(e){var n=e.offsetWidth;t.forEach(function(e){n-=e.offsetWidth}),x(320/n*100)}});return e&&(n.observe(e),t.forEach(function(e){n.observe(e)})),function(){n.disconnect()}}},[_]),!t)return i.createElement(a.A,{active:!0});var D=i.createElement("div",{className:"daily-reflection-content"},i.createElement(kt,null)),O=i.createElement("div",{className:"sider-panel"},i.createElement(U,null));return i.createElement(i.Fragment,null,i.createElement("div",{className:"daily-reflection-wrapper"},_?i.createElement(i.Fragment,null,D,i.createElement(o.A,{title:(0,m.Ru)("hidden_gem"),rootClassName:"lazyvax lzv-theme-".concat(n),placement:"right",onClose:function(){return k((0,v.qf)(!1))},open:R,width:"100vw",styles:{body:{padding:8}}},O)):i.createElement(u.YZ,{direction:"horizontal"},i.createElement(u.Zk,{defaultSize:80,minSize:50},D),i.createElement(u.TW,{className:"panel-resize-handle"}),i.createElement(u.Zk,{defaultSize:20,minSize:b},O))),_&&i.createElement("div",{style:{position:"fixed",right:8,top:8,zIndex:9999}},i.createElement(c.Ay,{style:{color:"var(--color-primary-bg)"},size:"large",icon:R?i.createElement(l.A,null):i.createElement(s.A,null),onClick:function(){return k((0,v.qf)(!R))},type:"text"})))}},24228:(e,t,n)=>{n.r(t),n.d(t,{default:()=>c});var r=n(31601),i=n.n(r),a=n(76314),o=n.n(a)()(i());o.push([e.id,".daily-reflection-main{height:100%;overflow-y:auto;margin-right:8px}@media(max-width: 768px){.daily-reflection-main .elegant-conversation-content{padding:0;margin-right:-8px}.daily-reflection-main .elegant-conversation-content .conversation-messages .conversation-message>div:not(.conversation-avatar)::before{content:unset}}.daily-reflection-main .conversation-card{height:100%;display:flex;flex-direction:column;box-shadow:0 2px 8px rgba(0,0,0,.03);border-radius:12px;background-color:var(--color-white)}.daily-reflection-main .conversation-card>.ant-card-body{display:flex;flex-direction:column;gap:0;max-height:100%;padding:16px;flex:1}.daily-reflection-main .conversation-card .reflection-date{display:flex;align-items:center;justify-content:space-between;gap:16px;padding-bottom:16px;border-bottom:1px solid var(--color-border)}.daily-reflection-main .conversation-card .reflection-date .date-display{text-align:center}.daily-reflection-main .conversation-card .reflection-date .date-display .date-picker-button .ant-picker-input input{text-align:center;font-size:18px;font-weight:500;color:var(--color-text);cursor:pointer;transition:color .2s ease}.daily-reflection-main .conversation-card .reflection-date .date-display .date-picker-button .ant-picker-input input:hover{color:var(--color-primary)}.daily-reflection-main .conversation-card .reflection-date .ant-btn{transition:all .3s ease;border-color:var(--color-border)}.daily-reflection-main .conversation-card .reflection-date .ant-btn:hover{color:var(--color-primary);border-color:var(--color-primary);transform:scale(1.05)}.daily-reflection-main .conversation-wrapper{flex:1;overflow-y:auto;padding:8px}@media(max-width: 768px){.daily-reflection-main .conversation-wrapper{padding:0;padding-top:16px}}.daily-reflection-main .reflection-greeting{display:flex;gap:8px}.daily-reflection-main .reflection-greeting .greeting-text{font-size:16px}.daily-reflection-main .reflection-question{display:flex;flex-direction:column;gap:12px;min-width:min(100vw,500px)}@media(max-width: 768px){.daily-reflection-main .reflection-question{min-width:unset}}.daily-reflection-main .daily-summary{display:flex;flex-direction:column;gap:16px;width:100%}.daily-reflection-main .daily-summary .summary-section{display:flex;flex-direction:column;gap:8px}.daily-reflection-main .daily-summary .summary-title{font-weight:600;font-size:15px}.daily-reflection-main .daily-summary .summary-list{padding-left:20px;margin:0}.daily-reflection-main .daily-summary .summary-list li{padding:6px 0;transition:all .3s ease}.daily-reflection-main .daily-summary .summary-list li.completed-item{color:var(--color-success)}.daily-reflection-main .daily-summary .summary-list li.completed-item .status-icon{margin-right:6px}.daily-reflection-main .satisfaction-question{display:flex;flex-direction:column;gap:16px}.daily-reflection-main .satisfaction-question .satisfaction-buttons{display:flex;gap:12px;margin-top:8px}.satisfaction-slider{display:flex;flex-direction:column;gap:16px;background-color:var(--color-bg-gray-ultralight);border-radius:8px}.satisfaction-slider .ant-slider{margin:16px 8px}.satisfaction-slider .ant-slider .ant-slider-mark-text{font-size:18px}.satisfaction-slider .submit-satisfaction{display:flex;justify-content:center;margin-top:8px}",""]);const c=o},31869:(e,t,n)=>{var r=n(85072),i=n.n(r),a=n(97825),o=n.n(a),c=n(77659),l=n.n(c),s=n(55056),u=n.n(s),d=n(10540),m=n.n(d),f=n(41113),p=n.n(f),v=n(91208),y={};y.styleTagTransform=p(),y.setAttributes=u(),y.insert=l().bind(null,"head"),y.domAPI=o(),y.insertStyleElement=m();var g=i()(v.default,y);if(!v.default.locals||e.hot.invalidate){var h=!v.default.locals,b=h?v:v.default.locals;e.hot.accept(91208,t=>{v=n(91208),function(e,t,n){if(!e&&t||e&&!t)return!1;var r;for(r in e)if((!n||"default"!==r)&&e[r]!==t[r])return!1;for(r in t)if(!(n&&"default"===r||e[r]))return!1;return!0}(b,h?v:v.default.locals,h)?(b=h?v:v.default.locals,g(v.default)):e.hot.invalidate()})}e.hot.dispose(function(){g()});v.default&&v.default.locals&&v.default.locals},66329:(e,t,n)=>{var r=n(85072),i=n.n(r),a=n(97825),o=n.n(a),c=n(77659),l=n.n(c),s=n(55056),u=n.n(s),d=n(10540),m=n.n(d),f=n(41113),p=n.n(f),v=n(81268),y={};y.styleTagTransform=p(),y.setAttributes=u(),y.insert=l().bind(null,"head"),y.domAPI=o(),y.insertStyleElement=m();var g=i()(v.default,y);if(!v.default.locals||e.hot.invalidate){var h=!v.default.locals,b=h?v:v.default.locals;e.hot.accept(81268,t=>{v=n(81268),function(e,t,n){if(!e&&t||e&&!t)return!1;var r;for(r in e)if((!n||"default"!==r)&&e[r]!==t[r])return!1;for(r in t)if(!(n&&"default"===r||e[r]))return!1;return!0}(b,h?v:v.default.locals,h)?(b=h?v:v.default.locals,g(v.default)):e.hot.invalidate()})}e.hot.dispose(function(){g()});v.default&&v.default.locals&&v.default.locals},79520:(e,t,n)=>{var r=n(85072),i=n.n(r),a=n(97825),o=n.n(a),c=n(77659),l=n.n(c),s=n(55056),u=n.n(s),d=n(10540),m=n.n(d),f=n(41113),p=n.n(f),v=n(92517),y={};y.styleTagTransform=p(),y.setAttributes=u(),y.insert=l().bind(null,"head"),y.domAPI=o(),y.insertStyleElement=m();var g=i()(v.default,y);if(!v.default.locals||e.hot.invalidate){var h=!v.default.locals,b=h?v:v.default.locals;e.hot.accept(92517,t=>{v=n(92517),function(e,t,n){if(!e&&t||e&&!t)return!1;var r;for(r in e)if((!n||"default"!==r)&&e[r]!==t[r])return!1;for(r in t)if(!(n&&"default"===r||e[r]))return!1;return!0}(b,h?v:v.default.locals,h)?(b=h?v:v.default.locals,g(v.default)):e.hot.invalidate()})}e.hot.dispose(function(){g()});v.default&&v.default.locals&&v.default.locals},81268:(e,t,n)=>{n.r(t),n.d(t,{default:()=>c});var r=n(31601),i=n.n(r),a=n(76314),o=n.n(a)()(i());o.push([e.id,".daily-reflection-wrapper{pointer-events:auto;display:flex;flex-direction:column;height:calc(100vh - 90px);width:100%;max-width:100vw}@media(max-width: 768px){.daily-reflection-wrapper{height:calc(100% - 140px);height:calc(100vh - 140px);height:calc(100dvh - 140px)}}.daily-reflection-wrapper .daily-reflection-content{overflow-y:auto;height:100%}.daily-reflection-wrapper .panel-resize-handle{width:4px;background-color:var(--color-border);touch-action:none;pointer-events:auto}.daily-reflection-wrapper .panel-resize-handle:hover{background-color:var(--color-primary)}.daily-reflection-wrapper .sider-panel{height:100%;overflow-y:auto;background:var(--color-primary-bg);border-radius:10px;padding:16px;margin-left:8px}",""]);const c=o},85405:(e,t,n)=>{var r=n(85072),i=n.n(r),a=n(97825),o=n.n(a),c=n(77659),l=n.n(c),s=n(55056),u=n.n(s),d=n(10540),m=n.n(d),f=n(41113),p=n.n(f),v=n(24228),y={};y.styleTagTransform=p(),y.setAttributes=u(),y.insert=l().bind(null,"head"),y.domAPI=o(),y.insertStyleElement=m();var g=i()(v.default,y);if(!v.default.locals||e.hot.invalidate){var h=!v.default.locals,b=h?v:v.default.locals;e.hot.accept(24228,t=>{v=n(24228),function(e,t,n){if(!e&&t||e&&!t)return!1;var r;for(r in e)if((!n||"default"!==r)&&e[r]!==t[r])return!1;for(r in t)if(!(n&&"default"===r||e[r]))return!1;return!0}(b,h?v:v.default.locals,h)?(b=h?v:v.default.locals,g(v.default)):e.hot.invalidate()})}e.hot.dispose(function(){g()});v.default&&v.default.locals&&v.default.locals},91208:(e,t,n)=>{n.r(t),n.d(t,{default:()=>c});var r=n(31601),i=n.n(r),a=n(76314),o=n.n(a)()(i());o.push([e.id,".reschedule-confirm-questions .reschedule-section{display:flex;flex-direction:column;gap:16px;margin-bottom:24px}.reschedule-confirm-questions .reschedule-section .reschedule-no-events{border:1px dashed var(--color-dark-border);border-radius:8px;padding:8px}.reschedule-confirm-questions .reschedule-section .section-title{font-size:16px;font-weight:600;color:var(--color-text)}.reschedule-confirm-questions .reschedule-section .events-list{display:flex;flex-direction:column;gap:12px}.reschedule-confirm-questions .reschedule-section .events-list .event-item-wrapper{position:relative;display:flex;align-items:center;overflow:hidden;border-radius:8px;transition:all .3s ease}.reschedule-confirm-questions .reschedule-section .events-list .event-item-wrapper:hover .event-item{padding-right:60px}.reschedule-confirm-questions .reschedule-section .events-list .event-item-wrapper:hover .toggle-discard-btn{transform:translateX(0);opacity:1;pointer-events:auto}.reschedule-confirm-questions .reschedule-section .events-list .event-item-wrapper .event-item{background-color:var(--color-primary-bg);border-radius:8px;padding:12px 16px;box-shadow:0 2px 4px rgba(0,0,0,.1);flex-direction:column;gap:12px;border-left:3px solid var(--color-light-blue);justify-content:space-between;width:100%;transition:all .3s cubic-bezier(0.175, 0.885, 0.32, 1.275)}.reschedule-confirm-questions .reschedule-section .events-list .event-item-wrapper .event-item.priority-0{border-left-color:var(--color-blue-bg)}.reschedule-confirm-questions .reschedule-section .events-list .event-item-wrapper .event-item.priority-1{border-left-color:var(--color-gold)}.reschedule-confirm-questions .reschedule-section .events-list .event-item-wrapper .event-item.priority-2{border-left-color:var(--color-orange)}.reschedule-confirm-questions .reschedule-section .events-list .event-item-wrapper .event-item.priority-3{border-left-color:var(--color-red-light)}.reschedule-confirm-questions .reschedule-section .events-list .event-item-wrapper .event-item.discarded{border-color:var(--color-border)}.reschedule-confirm-questions .reschedule-section .events-list .event-item-wrapper .event-item.discarded .event-title{text-decoration:line-through;color:var(--color-text-secondary)}.reschedule-confirm-questions .reschedule-section .events-list .event-item-wrapper .event-item .event-title{font-weight:600;font-size:15px;color:var(--color-text);transition:all .2s ease;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.reschedule-confirm-questions .reschedule-section .events-list .event-item-wrapper .event-item .ant-select{transition:all .2s ease;min-width:120px}@media(max-width: 768px){.reschedule-confirm-questions .reschedule-section .events-list .event-item-wrapper .event-item .ant-select{width:100%}}.reschedule-confirm-questions .reschedule-section .events-list .event-item-wrapper .event-item .ant-select .ant-select-selector{border-radius:8px;border:1px solid var(--color-border);transition:all .2s ease;height:32px !important;padding:0 12px !important;background:var(--color-white)}.reschedule-confirm-questions .reschedule-section .events-list .event-item-wrapper .event-item .ant-select .ant-select-selector .ant-select-selection-item{line-height:30px;font-size:14px;font-weight:500;color:var(--color-text)}.reschedule-confirm-questions .reschedule-section .events-list .event-item-wrapper .event-item .ant-select.ant-select-focused .ant-select-selector{border-color:var(--color-primary) !important;box-shadow:0 0 0 2px rgba(var(--color-primary-rgb), 0.1) !important}.reschedule-confirm-questions .reschedule-section .events-list .event-item-wrapper .event-item .event-actions{flex-wrap:wrap}.reschedule-confirm-questions .reschedule-section .events-list .event-item-wrapper .toggle-discard-btn{position:absolute;right:16px;transform:translateX(100%);opacity:0;pointer-events:none;transition:transform .3s cubic-bezier(0.175, 0.885, 0.32, 1.275),opacity .3s ease;z-index:5}.reschedule-confirm-questions .reschedule-section .events-list .event-item-wrapper .toggle-discard-btn:hover{background-color:rgba(0,0,0,.05)}@media(max-width: 768px){.reschedule-confirm-questions .reschedule-section .events-list .event-item-wrapper .event-item .event-actions{flex-direction:column;align-items:flex-start;gap:8px}}",""]);const c=o},92517:(e,t,n)=>{n.r(t),n.d(t,{default:()=>c});var r=n(31601),i=n.n(r),a=n(76314),o=n.n(a)()(i());o.push([e.id,".reschedule-suggestions .section-title{font-weight:bold;font-size:16px;margin-bottom:16px}.reschedule-suggestions .reschedule-no-events{border:1px dashed var(--color-dark-border);border-radius:16px;padding:8px}.reschedule-suggestions .event-item{background-color:var(--color-primary-bg);border-radius:8px;padding:12px;box-shadow:0 2px 4px rgba(0,0,0,.1);flex-direction:column;gap:8px;border-left:3px solid rgba(0,0,0,0);justify-content:space-between}.reschedule-suggestions .event-item.priority-0{border-left-color:var(--color-blue-bg)}.reschedule-suggestions .event-item.priority-1{border-left-color:var(--color-gold)}.reschedule-suggestions .event-item.priority-2{border-left-color:var(--color-orange)}.reschedule-suggestions .event-item.priority-3{border-left-color:var(--color-red-light)}.reschedule-suggestions .event-item .event-title{font-weight:600;font-size:15px}.reschedule-suggestions .event-item .event-actions{flex-wrap:wrap}.time-picker-modal{padding:0 8px}.time-picker-modal .selected-time-summary{background-color:var(--color-layout-bg);padding:12px;border-radius:8px;margin-bottom:12px}.time-picker-modal .selected-time-summary .summary-content{text-align:center;font-size:15px;white-space:pre-line}.time-picker-modal .selected-time-summary .summary-content .duration-text{color:var(--color-text-secondary);font-style:italic}.time-picker-modal .duration-control{display:flex;align-items:flex-end;gap:12px;margin-bottom:24px}.time-picker-modal .duration-control .ant-form-item{margin-bottom:0;flex:1}.time-picker-modal .duration-control .ant-input-number-group-wrapper{width:100%}.time-picker-modal .duration-control .ant-input-number{width:100%}.time-picker-modal .duration-control .ant-input-number-group-addon{white-space:nowrap}.time-picker-modal .duration-control .ant-btn{display:flex;align-items:center;justify-content:center;height:32px;width:32px;margin-bottom:0}.time-picker-modal .duration-control .ant-btn .anticon{font-size:12px}.time-picker-modal .ant-form-item .ant-form-item-label{padding-bottom:8px}.time-picker-modal .ant-form-item .ant-form-item-label label{font-size:14px;color:rgba(0,0,0,.65)}",""]);const c=o},96896:(e,t,n)=>{n.r(t),n.d(t,{default:()=>c});var r=n(31601),i=n.n(r),a=n(76314),o=n.n(a)()(i());o.push([e.id,".daily-reflection-sider{display:flex;flex-direction:column;width:100%;height:100%;min-height:400px}.daily-reflection-sider .sider-header{display:flex;justify-content:center;margin-bottom:16px}@media(max-width: 768px){.daily-reflection-sider .sider-header{margin:8px 0 !important}}.daily-reflection-sider .sider-header .ant-segmented{background:var(--color-layout-bg);padding:4px;border-radius:8px}.daily-reflection-sider .sider-header .ant-segmented .ant-segmented-item{transition:all .3s ease;border-radius:6px;color:var(--color-text-secondary)}.daily-reflection-sider .sider-header .ant-segmented .ant-segmented-item:hover{color:var(--color-text)}.daily-reflection-sider .sider-header .ant-segmented .ant-segmented-item.ant-segmented-item-selected{background:var(--color-primary);color:var(--color-white)}.daily-reflection-sider .sider-header .ant-segmented .ant-segmented-item.ant-segmented-item-selected svg path{fill:var(--color-white)}.daily-reflection-sider .sider-header .ant-segmented .ant-segmented-item .ant-segmented-item-label{align-items:center;display:flex}.daily-reflection-sider .sider-header .ant-segmented .ant-segmented-item .ant-segmented-item-icon{font-size:16px;margin-right:6px;display:inline-flex}.daily-reflection-sider .sider-content{flex:1;position:relative}.daily-reflection-sider .sider-content .tab-content{position:absolute;top:0;left:0;width:100%;height:100%}.daily-reflection-sider .sider-content .tab-content>div{width:100%;height:100%;position:absolute;top:0;left:0;overflow-y:auto;overflow:visible}.daily-reflection-sider .sider-content .tab-content>div::-webkit-scrollbar{display:block;width:12px}.daily-reflection-sider .sider-content .tab-content>div::-webkit-scrollbar-track{background:rgba(0,0,0,0)}.daily-reflection-sider .sider-content .tab-content>div::-webkit-scrollbar-thumb{background-color:var(--color-scrollbar-thumb);border-radius:10px;border:4px solid rgba(0,0,0,0);background-clip:padding-box}.daily-reflection-sider .sider-content .tab-content>div::-webkit-scrollbar-thumb:hover{background-color:var(--color-scrollbar-thumb-hover)}.daily-reflection-sider .sider-content .tab-content>div::-webkit-scrollbar-corner{background:rgba(0,0,0,0)}.daily-reflection-sider .task-item-wrapper{display:flex;justify-content:space-between;align-items:center;padding:4px 0}.daily-reflection-sider .task-item-wrapper .ant-btn-text{opacity:.5;transition:opacity .2s}.daily-reflection-sider .task-item-wrapper:hover .ant-btn-text{opacity:1}.daily-reflection-sider .add-task-button{margin-top:12px;display:flex;justify-content:center}.today-content .section{margin-bottom:24px}.today-content .section .section-title{font-size:16px;font-weight:500;margin:0;margin-bottom:12px;color:var(--color-text)}.today-content .tasks-list{display:flex;flex-direction:column;gap:8px}.goals-content .goals-filter{margin-bottom:16px}.goals-content .goals-list{display:flex;flex-direction:column;gap:16px}.goals-content .goals-list .goal-item{transform-origin:center}",""]);const c=o}}]);