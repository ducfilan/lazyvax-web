"use strict";(self.webpackChunklazyvax_ext=self.webpackChunklazyvax_ext||[]).push([[443],{31845:(e,t,r)=>{var n=r(85072),a=r.n(n),o=r(97825),s=r.n(o),l=r(77659),i=r.n(l),c=r(55056),u=r.n(c),p=r(10540),d=r.n(p),f=r(41113),g=r.n(f),m=r(93688),h={};h.styleTagTransform=g(),h.setAttributes=u(),h.insert=i().bind(null,"head"),h.domAPI=s(),h.insertStyleElement=d();var v=a()(m.default,h);if(!m.default.locals||e.hot.invalidate){var b=!m.default.locals,x=b?m:m.default.locals;e.hot.accept(93688,t=>{m=r(93688),function(e,t,r){if(!e&&t||e&&!t)return!1;var n;for(n in e)if((!r||"default"!==n)&&e[n]!==t[n])return!1;for(n in t)if(!(r&&"default"===n||e[n]))return!1;return!0}(x,b?m:m.default.locals,b)?(x=b?m:m.default.locals,v(m.default)):e.hot.invalidate()})}e.hot.dispose(function(){v()});m.default&&m.default.locals&&m.default.locals},32443:(e,t,r)=>{r.r(t),r.d(t,{default:()=>I});var n=r(45458),a=r(10467),o=r(80296),s=r(54756),l=r.n(s),i=(r(31845),r(96540)),c=r(85015),u=r(98060),p=r(17308),d=r(90357),f=r(49222),g=r(25948),m=r(97072),h=r(78995),v=r(47852),b=r(49237),x=r(42877),y=r(84801),w=r(33930),k=r(97665),_=r(57097),A=r(694),E=r(86220),N=r(42569),R=r(37),C=r(24337),z=r(84976),S=r(72754),T=r(44225);const I=function(){var e=c.A.useApp().message,t=(0,k.jE)(),r=(0,z.ok)(),s=(0,o.A)(r,2),I=s[0],q=s[1],D=(0,i.useState)(""),O=(0,o.A)(D,2),j=O[0],F=O[1],K=(0,i.useState)([]),M=(0,o.A)(K,2),P=M[0],L=M[1],Q=(0,i.useState)(),B=(0,o.A)(Q,2),G=B[0],U=B[1],X=(0,i.useState)("newest"),H=(0,o.A)(X,2),J=H[0],V=H[1],W=(0,i.useState)(!1),Y=(0,o.A)(W,2),Z=Y[0],$=Y[1],ee=(0,i.useState)(),te=(0,o.A)(ee,2),re=te[0],ne=te[1],ae=(0,T.d)(j,300);(0,S.vC)("n",function(e){e.preventDefault(),ye()},{enableOnFormTags:!1}),(0,i.useEffect)(function(){var t=I.get("noteId");if(t){var r=function(){var r=(0,a.A)(l().mark(function r(){var n;return l().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=1,(0,A.jU)(t);case 1:n=r.sent,ne(n),$(!0),q({},{replace:!0}),r.next=3;break;case 2:r.prev=2,r.catch(0),e.error((0,N.Ru)("note_error_fetch")),q({},{replace:!0});case 3:case"end":return r.stop()}},r,null,[[0,2]])}));return function(){return r.apply(this,arguments)}}();r()}},[I,q,e]);var oe,se,le,ie={keyword:ae||void 0,tags:P.length>0?P:void 0,goalId:G},ce=(0,w.I)({queryKey:["notes",ie],queryFn:(oe=(0,a.A)(l().mark(function e(){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,A.CS)(ie));case 1:case"end":return e.stop()}},e)})),function(){return oe.apply(this,arguments)})}),ue=ce.data,pe=ce.isLoading,de=(0,w.I)({queryKey:["goals"],queryFn:(se=(0,a.A)(l().mark(function e(){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,E.DX)());case 1:case"end":return e.stop()}},e)})),function(){return se.apply(this,arguments)})}),fe=de.data,ge=(0,w.I)({queryKey:["notes",{}],queryFn:(le=(0,a.A)(l().mark(function e(){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,A.CS)({}));case 1:case"end":return e.stop()}},e)})),function(){return le.apply(this,arguments)})}),me=ge.data,he=(0,i.useMemo)(function(){var e=(me||[]).flatMap(function(e){return e.tags||[]}).reduce(function(e,t){return e[t]=(e[t]||0)+1,e},{});return Object.entries(e).sort(function(e,t){return t[1]-e[1]}).slice(0,8).map(function(e){return(0,o.A)(e,1)[0]})},[me]),ve=(0,i.useMemo)(function(){if(!ue)return[];var e=(0,n.A)(ue);switch(J){case"newest":return e.sort(function(e,t){return new Date(t.updatedAt).getTime()-new Date(e.updatedAt).getTime()});case"oldest":return e.sort(function(e,t){return new Date(e.updatedAt).getTime()-new Date(t.updatedAt).getTime()});case"title":return e.sort(function(e,t){return(e.title||"").localeCompare(t.title||"")});default:return e}},[ue,J]),be=(0,_.n)({mutationFn:A.Iy,onSuccess:function(){e.success((0,N.Ru)("note_deleted_success")),t.invalidateQueries({queryKey:["notes"]})},onError:function(){e.error((0,N.Ru)("note_error_delete"))}}),xe=function(e,t){f.A.confirm({title:(0,N.Ru)("note_delete_confirm_title"),content:(0,N.Ru)("note_delete_confirm_message"),okText:(0,N.Ru)("note_card_delete"),cancelText:(0,N.Ru)("note_editor_cancel_button"),okButtonProps:{danger:!0},onOk:function(){return be.mutate(e)}})},ye=function(){ne(void 0),$(!0)},we=function(e){ne(e),$(!0)},ke=function(){$(!1),ne(void 0)},_e=function(e){P.includes(e)?L(P.filter(function(t){return t!==e})):L([].concat((0,n.A)(P),[e]))},Ae=function(){F(""),L([]),U(void 0)},Ee=j||P.length>0||G,Ne=null==fe?void 0:fe.find(function(e){return e._id===G});return i.createElement("div",{className:"notes-page"},i.createElement("div",{className:"notes-header"},i.createElement("h1",{className:"notes-title"},(0,N.Ru)("notes_page_title")),i.createElement(u.Ay,{type:"primary",icon:i.createElement(b.A,null),onClick:ye,className:"is-deep"},(0,N.Ru)("notes_create_button"),i.createElement("kbd",{className:"shortcut-hint"},"N"))),i.createElement("div",{className:"notes-filters"},i.createElement("div",{className:"filters-row"},i.createElement(d.A,{placeholder:(0,N.Ru)("notes_search_placeholder"),prefix:i.createElement(x.A,null),value:j,onChange:function(e){return F(e.target.value)},className:"notes-search",allowClear:!0}),i.createElement(g.A,{placeholder:(0,N.Ru)("notes_filter_by_goal"),value:G,onChange:U,className:"notes-goal-select",allowClear:!0},(fe||[]).map(function(e){return i.createElement(g.A.Option,{key:e._id,value:e._id},e.title)})),i.createElement(g.A,{value:J,onChange:V,className:"notes-sort-select",suffixIcon:i.createElement(y.A,null)},i.createElement(g.A.Option,{value:"newest"},(0,N.Ru)("notes_sort_newest")),i.createElement(g.A.Option,{value:"oldest"},(0,N.Ru)("notes_sort_oldest")),i.createElement(g.A.Option,{value:"title"},(0,N.Ru)("notes_sort_title")))),he.length>0&&i.createElement("div",{className:"tag-chips"},he.map(function(e){return i.createElement(h.A,{key:e,className:"tag-chip ".concat(P.includes(e)?"active":""),onClick:function(){return _e(e)}},e)})),Ee&&i.createElement("div",{className:"active-filters"},i.createElement("span",{className:"active-filters-label"},(0,N.Ru)("notes_active_filters"),":"),j&&i.createElement(h.A,{closable:!0,onClose:function(){return F("")}},"\u201c",j,"\u201d"),P.map(function(e){return i.createElement(h.A,{key:e,closable:!0,onClose:function(){return _e(e)}},e)}),Ne&&i.createElement(h.A,{closable:!0,onClose:function(){return U(void 0)}},"\u{1f3af} ",Ne.title),i.createElement(u.Ay,{type:"link",size:"small",onClick:Ae,icon:i.createElement(v.A,null)},(0,N.Ru)("notes_clear_all")))),i.createElement("div",{className:"notes-list"},pe?i.createElement("div",{className:"notes-grid"},(0,n.A)(Array(6)).map(function(e,t){return i.createElement("div",{key:t,className:"note-skeleton"},i.createElement(m.A,{active:!0,title:{width:"60%"},paragraph:{rows:2}}))})):ve.length>0?i.createElement("div",{className:"notes-grid"},ve.map(function(e){return i.createElement(C.T,{key:e._id,note:e,onEdit:we,onDelete:xe})})):i.createElement("div",{className:"notes-empty"},i.createElement(p.A,{image:p.A.PRESENTED_IMAGE_SIMPLE,description:Ee?(0,N.Ru)("notes_no_results"):(0,N.Ru)("notes_no_notes")},Ee?i.createElement(u.Ay,{onClick:Ae},(0,N.Ru)("notes_clear_filters")):i.createElement(u.Ay,{type:"primary",icon:i.createElement(b.A,null),onClick:ye,className:"is-deep"},(0,N.Ru)("notes_create_first"))))),i.createElement(R.P,{visible:Z,note:re,onClose:ke,onSaved:function(){t.invalidateQueries({queryKey:["notes"]}),ke()}}))}},93688:(e,t,r)=>{r.r(t),r.d(t,{default:()=>l});var n=r(31601),a=r.n(n),o=r(76314),s=r.n(o)()(a());s.push([e.id,".notes-page{padding:24px;height:calc(100vh - 88px);display:flex;flex-direction:column;overflow:hidden;background:var(--color-primary-bg);border-radius:18px}.notes-page .notes-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;flex-shrink:0}.notes-page .notes-header .notes-title{margin:0;font-size:24px;font-weight:600;color:var(--color-text)}.notes-page .notes-header .shortcut-hint{margin-left:8px;padding:2px 6px;font-size:11px;font-family:inherit;background:hsla(0,0%,100%,.2);border-radius:4px;opacity:.8}.notes-page .notes-filters{flex-shrink:0;margin-bottom:20px;position:sticky;top:0;z-index:10;background:var(--color-primary-bg);padding-bottom:4px}.notes-page .notes-filters .filters-row{display:flex;gap:12px;margin-bottom:12px}.notes-page .notes-filters .filters-row .notes-search{flex:1;max-width:320px}.notes-page .notes-filters .filters-row .notes-goal-select{width:200px}.notes-page .notes-filters .filters-row .notes-goal-select .ant-select-selector{border-radius:8px}.notes-page .notes-filters .filters-row .notes-sort-select{width:140px}.notes-page .notes-filters .filters-row .notes-sort-select .ant-select-selector{border-radius:8px}@media(max-width: 768px){.notes-page .notes-filters .filters-row{flex-wrap:wrap}.notes-page .notes-filters .filters-row .notes-search{max-width:100%;width:100%}.notes-page .notes-filters .filters-row .notes-goal-select,.notes-page .notes-filters .filters-row .notes-sort-select{flex:1;width:auto;min-width:120px}}.notes-page .notes-filters .tag-chips{display:flex;flex-wrap:wrap;gap:8px;margin-bottom:12px}.notes-page .notes-filters .tag-chips .tag-chip{cursor:pointer;border-radius:16px;padding:4px 12px;font-size:12px;border:1px solid var(--color-border);background:rgba(0,0,0,0);color:var(--color-text-secondary);transition:all .15s ease;margin:0}.notes-page .notes-filters .tag-chips .tag-chip:hover{border-color:var(--color-primary);color:var(--color-primary)}.notes-page .notes-filters .tag-chips .tag-chip.active{background:var(--color-primary);border-color:var(--color-primary);color:var(--color-white)}.notes-page .notes-filters .active-filters{display:flex;align-items:center;flex-wrap:wrap;gap:8px;padding:8px 12px;background:var(--color-bg-gray-ultralight);border-radius:8px}.notes-page .notes-filters .active-filters .active-filters-label{font-size:12px;color:var(--color-text-secondary);margin-right:4px}.notes-page .notes-filters .active-filters .ant-tag{margin:0;border-radius:4px}.notes-page .notes-filters .active-filters .ant-btn-link{padding:0;height:auto;font-size:12px}.notes-page .notes-list{flex:1;overflow-y:auto}.notes-page .notes-list::-webkit-scrollbar{display:block;width:12px}.notes-page .notes-list::-webkit-scrollbar-track{background:rgba(0,0,0,0)}.notes-page .notes-list::-webkit-scrollbar-thumb{background-color:var(--color-scrollbar-thumb);border-radius:10px;border:4px solid rgba(0,0,0,0);background-clip:padding-box}.notes-page .notes-list::-webkit-scrollbar-thumb:hover{background-color:var(--color-scrollbar-thumb-hover)}.notes-page .notes-list::-webkit-scrollbar-corner{background:rgba(0,0,0,0)}.notes-page .notes-list .notes-grid{display:grid;grid-template-columns:repeat(auto-fill, minmax(280px, 1fr));gap:16px}@media(max-width: 600px){.notes-page .notes-list .notes-grid{grid-template-columns:1fr}}.notes-page .notes-list .note-skeleton{background:var(--color-primary-bg);border:1px solid var(--color-border);border-radius:16px;padding:16px}.notes-page .notes-list .notes-empty{display:flex;justify-content:center;align-items:center;min-height:300px}.lzv-theme-dark .notes-page .notes-header .shortcut-hint{background:hsla(0,0%,100%,.1)}.lzv-theme-dark .notes-page .notes-filters .tag-chips .tag-chip.active{color:var(--color-white)}.lzv-theme-dark .notes-page .notes-filters .active-filters{background:var(--color-bg-gray-light)}.lzv-theme-dark .notes-page .note-skeleton{background:var(--color-bg-gray-ultralight)}",""]);const l=s}}]);