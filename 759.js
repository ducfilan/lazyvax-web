"use strict";(self.webpackChunklazyvax_ext=self.webpackChunklazyvax_ext||[]).push([[759],{94759:(e,n,t)=>{t.r(n),t.d(n,{PetPage:()=>an,default:()=>on});var r,a,o,i=t(5544),l=t(57528),c=t(96540),s=t(21250),u=t(87959),p=t(1849),m=t(42652),f=t(21468),d=t(49222),g=t(16621),h=t(49349),b=t(14685),y=t(73560),x=t(7694),v=s.Ay.div(r||(r=(0,l.A)(["\n  position: absolute;\n  inset: 0;\n  background: linear-gradient(180deg, #e0f2fe 0%, #f0fdf4 50%, #ecfdf5 100%);\n"]))),E=s.Ay.div(a||(a=(0,l.A)(["\n  position: absolute;\n  inset: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background: linear-gradient(180deg, #e0f2fe 0%, #f0fdf4 50%, #ecfdf5 100%);\n"]))),A=s.Ay.div(o||(o=(0,l.A)(["\n  width: 50px;\n  height: 50px;\n  border: 4px solid #e2e8f0;\n  border-top-color: #8b5cf6;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n  \n  @keyframes spin {\n    to {\n      transform: rotate(360deg);\n    }\n  }\n"])));function k(){return c.createElement(E,null,c.createElement(A,null))}function w(e){var n=e.children;return c.createElement(v,null,c.createElement(c.Suspense,{fallback:c.createElement(k,null)},c.createElement(y.Hl,{camera:{position:[0,2,6],fov:50,near:.1,far:100},shadows:!0,dpr:[1,2],gl:{antialias:!0,alpha:!0}},n,c.createElement(x.N,{enablePan:!1,enableZoom:!0,minDistance:4,maxDistance:12,minPolarAngle:Math.PI/6,maxPolarAngle:Math.PI/2.2,target:[0,.8,0]}))))}var S=t(14094),P=t(80561),C=t(2321);function M(e){var n=e.children,t=e.showProps,r=void 0===t||t;return c.createElement(c.Fragment,null,c.createElement("ambientLight",{intensity:.6}),c.createElement("directionalLight",{position:[5,8,5],intensity:1.2,castShadow:!0,"shadow-mapSize":[1024,1024]}),c.createElement("pointLight",{position:[-5,5,-5],intensity:.4,color:"#a78bfa"}),c.createElement("pointLight",{position:[5,3,5],intensity:.3,color:"#fbbf24"}),c.createElement(S.Zc,{args:[20,20],rotation:[-Math.PI/2,0,0],position:[0,0,0],receiveShadow:!0},c.createElement("meshStandardMaterial",{color:"#e8f5e9",roughness:.9,metalness:0})),c.createElement(P._,{position:[0,.01,0],opacity:.5,scale:12,blur:2.5,far:4,color:"#1a1a2e"}),r&&c.createElement(c.Fragment,null,c.createElement("group",{position:[-1.5,0,1]},c.createElement("mesh",{position:[0,.08,0]},c.createElement("cylinderGeometry",{args:[.25,.2,.15,32]}),c.createElement("meshStandardMaterial",{color:"#64748b",metalness:.8,roughness:.2})),c.createElement("mesh",{position:[0,.12,0]},c.createElement("cylinderGeometry",{args:[.22,.22,.08,32]}),c.createElement("meshStandardMaterial",{color:"#fbbf24",roughness:.5}))),c.createElement("mesh",{position:[1.8,.15,.5],castShadow:!0},c.createElement("sphereGeometry",{args:[.15,32,32]}),c.createElement("meshStandardMaterial",{color:"#ef4444",roughness:.3})),c.createElement("group",{position:[1.2,.05,-.8],rotation:[0,Math.PI/4,0]},c.createElement("mesh",null,c.createElement("capsuleGeometry",{args:[.04,.15,8,16]}),c.createElement("meshStandardMaterial",{color:"#fef3c7",roughness:.7})),c.createElement("mesh",{position:[-.1,0,0]},c.createElement("sphereGeometry",{args:[.05,16,16]}),c.createElement("meshStandardMaterial",{color:"#fef3c7",roughness:.7})),c.createElement("mesh",{position:[.1,0,0]},c.createElement("sphereGeometry",{args:[.05,16,16]}),c.createElement("meshStandardMaterial",{color:"#fef3c7",roughness:.7}))),[[-2,0,-1.5],[2.5,0,1],[-1,0,2],[1.5,0,-1.2]].map(function(e,n){return c.createElement("mesh",{key:n,position:e},c.createElement("coneGeometry",{args:[.08,.2,8]}),c.createElement("meshStandardMaterial",{color:"#22c55e",roughness:.8}))})),c.createElement(C.OH,{preset:"apartment"}),n)}var R,_,j,z,I,N,T,O,H,G,D,L,Y,U,$,W,X,F,B,Z,J,K,V,q,Q,ee=t(68335),ne=t(66221),te=t(82726),re=t(2790),ae=t(34247),oe=t(27649),ie=t(6490),le=s.Ay.div(R||(R=(0,l.A)(['\n  position: absolute;\n  inset: 0;\n  pointer-events: none;\n  display: flex;\n  flex-direction: column;\n  font-family: "Nunito", "Segoe UI", sans-serif;\n']))),ce=s.Ay.div(_||(_=(0,l.A)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  padding: 20px 24px;\n  pointer-events: auto;\n"]))),se=s.Ay.div(j||(j=(0,l.A)(["\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  background: rgba(255, 255, 255, 0.95);\n  padding: 8px 14px;\n  border-radius: 20px;\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);\n  font-weight: 700;\n  color: #1a1a2e;\n\n  .anticon {\n    color: #fbbf24;\n    font-size: 18px;\n  }\n"]))),ue=s.Ay.div(z||(z=(0,l.A)(["\n  font-size: 28px;\n  font-weight: 900;\n  letter-spacing: 6px;\n  color: #1a1a2e;\n  text-transform: uppercase;\n  text-shadow: 0 2px 10px rgba(255, 255, 255, 0.5);\n"]))),pe=s.Ay.div(I||(I=(0,l.A)(["\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  background: rgba(255, 255, 255, 0.95);\n  padding: 8px 14px;\n  border-radius: 20px;\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);\n  font-weight: 700;\n  color: #1a1a2e;\n\n  span {\n    font-size: 16px;\n  }\n"]))),me=s.Ay.div(N||(N=(0,l.A)(["\n  display: flex;\n  justify-content: center;\n  gap: 32px;\n  padding: 0 24px;\n  pointer-events: auto;\n"]))),fe=s.Ay.div(T||(T=(0,l.A)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 6px;\n"]))),de=s.Ay.div(O||(O=(0,l.A)(["\n  display: flex;\n  gap: 4px;\n  font-size: 18px;\n"]))),ge=s.Ay.div(H||(H=(0,l.A)(["\n  font-size: 11px;\n  font-weight: 800;\n  color: #1a1a2e;\n  letter-spacing: 1.5px;\n  text-transform: uppercase;\n"]))),he=s.Ay.div(G||(G=(0,l.A)(["\n  width: 8px;\n  height: 8px;\n  border-radius: 50%;\n  background: ",";\n  box-shadow: 0 0 8px ",";\n  margin-top: 4px;\n"])),function(e){var n=e.$level;return n>66?"#22c55e":n>33?"#fbbf24":"#ef4444"},function(e){var n=e.$level;return n>66?"#22c55e":n>33?"#fbbf24":"#ef4444"}),be=s.Ay.div(D||(D=(0,l.A)(["\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-end;\n  align-items: center;\n  padding-bottom: 20px;\n  pointer-events: none;\n"]))),ye=(0,s.Ay)(ee.P.div)(L||(L=(0,l.A)(["\n  background: linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%);\n  color: white;\n  padding: 12px 32px;\n  border-radius: 24px;\n  font-size: 18px;\n  font-weight: 800;\n  letter-spacing: 3px;\n  text-transform: uppercase;\n  box-shadow: 0 8px 25px rgba(139, 92, 246, 0.4);\n  pointer-events: auto;\n"]))),xe=(0,s.Ay)(ee.P.div)(Y||(Y=(0,l.A)(['\n  position: absolute;\n  top: 160px;\n  left: 50%;\n  transform: translateX(-50%);\n  background: white;\n  padding: 12px 24px;\n  border-radius: 20px;\n  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);\n  font-weight: 700;\n  color: #1a1a2e;\n  font-size: 16px;\n  white-space: nowrap;\n  z-index: 20;\n  pointer-events: none;\n\n  &:after {\n    content: "";\n    position: absolute;\n    bottom: -10px;\n    left: 50%;\n    transform: translateX(-50%);\n    border-width: 10px 10px 0;\n    border-style: solid;\n    border-color: white transparent;\n  }\n']))),ve=s.Ay.div(U||(U=(0,l.A)(["\n  padding: 0 24px 24px;\n  pointer-events: auto;\n"]))),Ee=s.Ay.div($||($=(0,l.A)(["\n  display: flex;\n  justify-content: center;\n  gap: 24px;\n  margin-bottom: 20px;\n"]))),Ae=(0,s.Ay)(ee.P.button)(W||(W=(0,l.A)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 6px;\n  background: rgba(255, 255, 255, 0.95);\n  border: none;\n  padding: 12px 16px;\n  border-radius: 16px;\n  cursor: pointer;\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);\n  position: relative;\n  min-width: 70px;\n\n  &:hover {\n    transform: translateY(-4px);\n    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.12);\n  }\n\n  ","\n"])),function(e){return e.$hasNew&&"\n    &:after {\n      content: 'NEW!';\n      position: absolute;\n      bottom: -8px;\n      right: -4px;\n      background: #22c55e;\n      color: white;\n      font-size: 9px;\n      font-weight: 800;\n      padding: 2px 6px;\n      border-radius: 8px;\n    }\n  "}),ke=s.Ay.div(X||(X=(0,l.A)(["\n  font-size: 28px;\n"]))),we=s.Ay.div(F||(F=(0,l.A)(["\n  font-size: 10px;\n  font-weight: 800;\n  color: #1a1a2e;\n  letter-spacing: 1px;\n  text-transform: uppercase;\n"]))),Se=s.Ay.div(B||(B=(0,l.A)(["\n  background: white;\n  padding: 16px 20px;\n  border-radius: 20px;\n  box-shadow: 0 -4px 25px rgba(0, 0, 0, 0.08);\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n"]))),Pe=s.Ay.div(Z||(Z=(0,l.A)(["\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n"]))),Ce=s.Ay.div(J||(J=(0,l.A)(["\n  font-size: 20px;\n  font-weight: 800;\n  color: #1a1a2e;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n"]))),Me=s.Ay.div(K||(K=(0,l.A)(["\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  font-size: 14px;\n  color: #64748b;\n  font-weight: 600;\n"]))),Re=s.Ay.div(V||(V=(0,l.A)(["\n  width: 120px;\n  height: 8px;\n  background: #e2e8f0;\n  border-radius: 4px;\n  overflow: hidden;\n"]))),_e=(0,s.Ay)(ee.P.div)(q||(q=(0,l.A)(["\n  height: 100%;\n  background: linear-gradient(90deg, #8b5cf6, #6366f1);\n  border-radius: 4px;\n  width: ","%;\n"])),function(e){return e.$percent}),je=(0,s.Ay)(ee.P.button)(Q||(Q=(0,l.A)(["\n  background: ",";\n  color: white;\n  border: none;\n  padding: 12px 20px;\n  border-radius: 16px;\n  font-weight: 700;\n  font-size: 14px;\n  cursor: pointer;\n  box-shadow: 0 4px 15px ",";\n\n  &:hover {\n    transform: scale(1.05);\n  }\n"])),function(e){return e.$isSleeping?"#fbbf24":"#8b5cf6"},function(e){return e.$isSleeping?"rgba(251, 191, 36, 0.4)":"rgba(139, 92, 246, 0.4)"});function ze(e,n,t){var r=Math.ceil(e/100*3);return c.createElement(de,null,[1,2,3].map(function(e){return c.createElement(n,{key:e,style:{color:e<=r?t:"#e2e8f0"}})}))}function Ie(e){var n=e.petName,t=e.level,r=e.coins,a=e.xp,o=e.maxXp,i=e.hunger,l=e.happiness,s=e.energy,u=e.isSleeping,p=e.message,m=e.onTreat,f=e.onSnacks,d=e.onExercise,g=e.onShop,h=e.onSleep,b=a/o*100;return c.createElement(le,null,c.createElement(ce,null,c.createElement(se,null,c.createElement(te.A,null),c.createElement("span",null,t)),c.createElement(ue,null,"POKIPET"),c.createElement(pe,null,c.createElement("span",null,"\u{1fa99}"),c.createElement("span",null,r))),c.createElement(me,null,c.createElement(fe,null,ze(l,re.A,"#fbbf24"),c.createElement(ge,null,"HAPPY"),c.createElement(he,{$level:l})),c.createElement(fe,null,ze(i,ae.A,"#ef4444"),c.createElement(ge,null,"HUNGRY"),c.createElement(he,{$level:i})),c.createElement(fe,null,ze(s,oe.A,"#3b82f6"),c.createElement(ge,null,"ENERGY"),c.createElement(he,{$level:s}))),c.createElement(ne.N,null,p&&c.createElement(xe,{initial:{opacity:0,y:10,scale:.8},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.8}},p)),c.createElement(be,null,c.createElement(ye,{whileHover:{scale:1.05},whileTap:{scale:.95}},"Level ",t)),c.createElement(ve,null,c.createElement(Ee,null,c.createElement(Ae,{onClick:m,whileHover:{y:-4},whileTap:{scale:.95}},c.createElement(ke,null,"\u{1f36c}"),c.createElement(we,null,"TREAT")),c.createElement(Ae,{onClick:f,whileHover:{y:-4},whileTap:{scale:.95}},c.createElement(ke,null,"\u{1f9c0}"),c.createElement(we,null,"SNACKS")),c.createElement(Ae,{onClick:d,whileHover:{y:-4},whileTap:{scale:.95}},c.createElement(ke,null,"\u{1f45f}"),c.createElement(we,null,"EXERCISE")),c.createElement(Ae,{onClick:g,whileHover:{y:-4},whileTap:{scale:.95},$hasNew:!0},c.createElement(ke,null,"\u{1f3ea}"),c.createElement(we,null,"SHOP"))),c.createElement(Se,null,c.createElement(Pe,null,c.createElement(Ce,null,n,c.createElement(ie.A,{style:{color:"#fbbf24",fontSize:18}})),c.createElement(Me,null,c.createElement("span",null,"\u{1f382} ",t," poki years"),c.createElement(Re,null,c.createElement(_e,{$percent:b,initial:{width:0},animate:{width:"".concat(b,"%")},transition:{duration:.5}})))),c.createElement(je,{$isSleeping:u,onClick:h,whileHover:{scale:1.05},whileTap:{scale:.95}},u?"\u2600\ufe0f Wake Up":"\u{1f634} Sleep"))))}var Ne=t(58168),Te=t(53986),Oe=t(89506),He=t(15225),Ge=t(10426),De=t(16237),Le=["animation","onClick","onPetStart","onPetEnd","onPetMove"];function Ye(e){var n=e.animation,t=void 0===n?"Robot_Idle":n,r=e.onClick,a=e.onPetStart,o=e.onPetEnd,i=e.onPetMove,l=(0,Te.A)(e,Le),s=(0,c.useRef)(null),u=(0,He.p)("/Robot.glb"),p=u.scene,m=u.animations,f=c.useMemo(function(){return De.t.clone(p)},[p]),d=(0,Oe.G)(f),g=d.nodes,h=d.materials,b=(0,Ge.f)(m,s).actions,y=(0,c.useRef)(null),x=(0,c.useRef)(!1);(0,c.useEffect)(function(){if(b&&t){var e=b[t];if(e){if(y.current&&y.current!==t){var n=b[y.current];null==n||n.fadeOut(.3)}return e.reset().fadeIn(.3).play(),y.current=t,function(){e.fadeOut(.3)}}}},[t,b]);return c.createElement("group",(0,Ne.A)({ref:s},l,{dispose:null,onClick:function(e){e.stopPropagation(),x.current||null==r||r(e)},onPointerDown:function(e){e.stopPropagation(),x.current=!0,null==a||a()},onPointerUp:function(e){e.stopPropagation(),x.current&&(x.current=!1,null==o||o())},onPointerMove:function(e){x.current&&(e.stopPropagation(),null==i||i())},onPointerLeave:function(){x.current&&(x.current=!1,null==o||o())}}),c.createElement("group",{name:"Scene"},c.createElement("group",{name:"RobotArmature"},c.createElement("primitive",{object:g.Bone}),c.createElement("group",{name:"HandL"},c.createElement("skinnedMesh",{name:"Cylinder022",geometry:g.Cylinder022.geometry,material:h.Main,skeleton:g.Cylinder022.skeleton}),c.createElement("skinnedMesh",{name:"Cylinder022_1",geometry:g.Cylinder022_1.geometry,material:h.Grey,skeleton:g.Cylinder022_1.skeleton})),c.createElement("group",{name:"HandR"},c.createElement("skinnedMesh",{name:"Cylinder015",geometry:g.Cylinder015.geometry,material:h.Main,skeleton:g.Cylinder015.skeleton}),c.createElement("skinnedMesh",{name:"Cylinder015_1",geometry:g.Cylinder015_1.geometry,material:h.Grey,skeleton:g.Cylinder015_1.skeleton})))))}function Ue(e){var n=e.animation,t=e.onReaction,r=e.onPetStart,a=e.onPetEnd,o=e.position,i=void 0===o?[0,0,0]:o,l=e.scale,s=void 0===l?1:l,u=(0,c.useCallback)(function(){null==t||t()},[t]);return c.createElement(Ye,{animation:n,onClick:u,onPetStart:r,onPetEnd:a,position:i,scale:s})}He.p.preload("/Robot.glb");var $e=t(64467),We=t(67466);function Xe(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function Fe(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Xe(Object(t),!0).forEach(function(n){(0,$e.A)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Xe(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var Be=[{id:"apple",name:"Apple",emoji:"\u{1f34e}",price:10,effect:{hunger:10,xp:2},description:"A healthy snack."},{id:"burger",name:"Burger",emoji:"\u{1f354}",price:30,effect:{hunger:30,happiness:5,xp:5},description:"Yummy but heavy."},{id:"steak",name:"Steak",emoji:"\u{1f969}",price:80,effect:{hunger:60,happiness:10,xp:15},description:"A royal feast!"},{id:"potion",name:"Energy Potion",emoji:"\u26a1",price:50,effect:{energy:50,xp:5},description:"Instant energy boost."},{id:"ball",name:"Tennis Ball",emoji:"\u{1f3be}",price:40,effect:{happiness:20,xp:10},description:"Fun to play with."},{id:"bone",name:"Golden Bone",emoji:"\u{1f9b4}",price:200,effect:{happiness:50,xp:50},description:"Lava's favorite treasure."}];var Ze,Je=["Robot_Dance","Robot_ThumbsUp","Robot_Jump","Robot_Wave"],Ke=["Robot_Idle","Robot_Standing","Robot_Walking"],Ve=["Robot_Sitting","Robot_No"],qe=["Robot_Wave","Robot_ThumbsUp","Robot_Jump","Robot_Yes","Robot_Dance"],Qe=["Robot_ThumbsUp","Robot_Yes","Robot_Dance"];function en(e){return e[Math.floor(Math.random()*e.length)]}function nn(e){switch(e){case"happy":return Je;case"sad":return Ve;default:return Ke}}var tn=s.Ay.div(Ze||(Ze=(0,l.A)(["\n  position: relative;\n  width: 100%;\n  height: calc(100dvh - 80px);\n  min-height: 600px;\n  overflow: hidden;\n"]))),rn="Lava";function an(){var e=(0,c.useState)(""),n=(0,i.A)(e,2),t=n[0],r=n[1],a=(0,c.useState)(!1),o=(0,i.A)(a,2),l=o[0],s=o[1],y=(0,c.useState)(!1),x=(0,i.A)(y,2),v=x[0],E=x[1],A=(0,c.useState)(!1),k=(0,i.A)(A,2),S=k[0],P=k[1],C=(0,c.useState)(null),R=(0,i.A)(C,2),_=R[0],j=R[1],z=u.Ay.useMessage(),I=(0,i.A)(z,2),N=I[0],T=I[1],O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.onLevelUp,t=e.onMoodChange,r=(0,We.A)("pet-hunger",50),a=(0,i.A)(r,2),o=a[0],l=a[1],s=(0,We.A)("pet-happiness",50),u=(0,i.A)(s,2),p=u[0],m=u[1],f=(0,We.A)("pet-energy",80),d=(0,i.A)(f,2),g=d[0],h=d[1],y=(0,We.A)("pet-xp",0),x=(0,i.A)(y,2),v=x[0],E=x[1],A=(0,We.A)("pet-level",1),k=(0,i.A)(A,2),w=k[0],S=k[1],P=(0,We.A)("pet-coins",100),C=(0,i.A)(P,2),M=C[0],R=C[1],_=(0,We.A)("pet-inventory",{}),j=(0,i.A)(_,2),z=j[0],I=j[1],N=(0,We.A)("pet-sleeping",!1),T=(0,i.A)(N,2),O=T[0],H=T[1],G=(0,c.useRef)("normal"),D=100*w,L=(0,c.useMemo)(function(){var e=(o+p+g)/3;return e>60?"happy":e>30?"normal":"sad"},[o,p,g]);(0,c.useEffect)(function(){L!==G.current&&(G.current=L,null==t||t(L))},[L,t]),(0,c.useEffect)(function(){var e=setInterval(function(){O?(h(function(e){return Math.min(100,e+2)}),l(function(e){return Math.max(0,e-.2)})):(l(function(e){return Math.max(0,e-.5)}),m(function(e){return Math.max(0,e-.3)}),h(function(e){return Math.max(0,e-.2)}))},3e3);return function(){return clearInterval(e)}},[O,l,m,h]);var Y=(0,c.useCallback)(function(e){E(function(t){var r=t+e,a=100*w;return r>=a?(S(function(e){var t=e+1;return null==n||n(t),t}),R(function(e){return e+50}),(0,b.A)({particleCount:100,spread:70,origin:{y:.6}}),r-a):r})},[w,E,S,R,n]),U=(0,c.useCallback)(function(e){var n,t,r;if(o>=100&&!e)return!1;var a=null!==(n=null==e?void 0:e.effect.hunger)&&void 0!==n?n:10,i=null!==(t=null==e?void 0:e.effect.happiness)&&void 0!==t?t:2,c=null!==(r=null==e?void 0:e.effect.xp)&&void 0!==r?r:2;return l(function(e){return Math.min(100,e+a)}),m(function(e){return Math.min(100,e+i)}),null!=e&&e.effect.energy&&h(function(n){return Math.min(100,n+e.effect.energy)}),Y(c),!0},[o,l,m,h,Y]),$=(0,c.useCallback)(function(){return!(g<10||(m(function(e){return Math.min(100,e+10)}),h(function(e){return Math.max(0,e-10)}),l(function(e){return Math.max(0,e-5)}),Y(5),0))},[g,m,h,l,Y]),W=(0,c.useCallback)(function(){H(function(e){return!e})},[H]),X=(0,c.useCallback)(function(e){return!(M<e.price||(R(function(n){return n-e.price}),I(function(n){return Fe(Fe({},n),{},(0,$e.A)({},e.id,(n[e.id]||0)+1))}),(0,b.A)({particleCount:30,spread:50,origin:{y:.8},colors:["#FFD700"]}),0))},[M,R,I]),F=(0,c.useCallback)(function(e){return!(!z[e.id]||z[e.id]<=0||(I(function(n){return Fe(Fe({},n),{},(0,$e.A)({},e.id,n[e.id]-1))}),U(e),0))},[z,I,U]);return{hunger:o,happiness:p,energy:g,xp:v,level:w,coins:M,inventory:z,mood:L,maxXp:D,isSleeping:O,feed:U,play:$,toggleSleep:W,buyItem:X,useItem:F,addXp:Y,setHunger:l,setHappiness:m,setEnergy:h}}({onLevelUp:(0,c.useCallback)(function(e){G("Level Up! I'm now level ".concat(e,"!"),4e3)},[]),onMoodChange:(0,c.useCallback)(function(e){H.setMoodAnimation(e)},[])}),H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.initialMood,t=void 0===n?"normal":n,r=e.idleVarietyInterval,a=void 0===r?8e3:r,o=(0,c.useState)("Robot_Idle"),l=(0,i.A)(o,2),s=l[0],u=l[1],p=(0,c.useState)(!1),m=(0,i.A)(p,2),f=m[0],d=m[1],g=(0,c.useState)(t),h=(0,i.A)(g,2),b=h[0],y=h[1],x=(0,c.useRef)(null),v=(0,c.useRef)(null),E=(0,c.useRef)(!1),A=(0,c.useCallback)(function(){x.current&&(clearTimeout(x.current),x.current=null)},[]),k=(0,c.useCallback)(function(){v.current&&(clearTimeout(v.current),v.current=null)},[]),w=(0,c.useCallback)(function(){E.current=!1;var e=nn(b);u(en(e))},[b]),S=(0,c.useCallback)(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3;A(),k(),E.current=!0,u(e),x.current=setTimeout(function(){w()},n)},[A,k,w]),P=(0,c.useCallback)(function(){var e=en(qe);S(e,2500)},[S]),C=(0,c.useCallback)(function(){S("Robot_Yes",1500),x.current=setTimeout(function(){S("Robot_ThumbsUp",2e3)},1500)},[S]),M=(0,c.useCallback)(function(e){if(y(e),!E.current){var n=nn(e);u(en(n))}},[]),R=(0,c.useCallback)(function(){d(!0),A(),k();var e=en(Qe);u(e)},[A,k]),_=(0,c.useCallback)(function(){d(!1),S("Robot_ThumbsUp",1500)},[S]);return(0,c.useEffect)(function(){if(!E.current&&!f){var e=function(){v.current=setTimeout(function(){if(!E.current&&!f){var n=nn(b);u(en(n))}e()},a+4e3*Math.random())};return e(),function(){return k()}}},[b,f,a,k]),(0,c.useEffect)(function(){return function(){A(),k()}},[A,k]),{currentAnimation:s,playAnimation:S,playReaction:P,playFeedAnimation:C,setMoodAnimation:M,handlePetStart:R,handlePetEnd:_,isPetting:f}}({initialMood:O.mood});(0,c.useEffect)(function(){H.setMoodAnimation(O.mood)},[O.mood]),(0,c.useEffect)(function(){O.hunger<20?G("I'm hungry...",3e3):O.energy<15?G("So tired...",3e3):O.happiness<20&&G("I'm bored...",3e3)},[O.hunger,O.energy,O.happiness]);var G=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3;r(e),setTimeout(function(){return r("")},n)},D=function(e){var n=["rock","paper","scissors"][Math.floor(3*Math.random())],t="";t=e===n?"draw":"rock"===e&&"scissors"===n||"paper"===e&&"rock"===n||"scissors"===e&&"paper"===n?"win":"lose",j("You: ".concat(e," vs ").concat(rn,": ").concat(n,". ")+("win"===t?"You Win!":"lose"===t?"".concat(rn," Wins!"):"Draw!")),"win"===t?(O.setHappiness(function(e){return Math.min(100,e+10)}),O.addXp(10),H.playAnimation("Robot_No",2e3),(0,b.A)()):"lose"===t?(O.setHappiness(function(e){return Math.min(100,e+20)}),H.playAnimation("Robot_Dance",3e3)):H.playAnimation("Robot_Standing",2e3)};return c.createElement(tn,null,T,c.createElement(w,null,c.createElement(M,null,c.createElement(Ue,{animation:H.currentAnimation,onReaction:function(){G("Hello!",1500),H.playReaction(),O.setHappiness(function(e){return Math.min(100,e+2)})},onPetStart:function(){H.handlePetStart()},onPetEnd:function(){H.handlePetEnd(),G("That feels nice!",2e3),O.setHappiness(function(e){return Math.min(100,e+5)})}}))),c.createElement(Ie,{petName:rn,level:O.level,coins:O.coins,xp:O.xp,maxXp:O.maxXp,hunger:O.hunger,happiness:O.happiness,energy:O.energy,isSleeping:O.isSleeping,message:t,onTreat:function(){E(!0)},onSnacks:function(){O.feed()?(G("Yummy!",2e3),H.playFeedAnimation()):G("I'm full!",2e3)},onExercise:function(){O.play()?(G("Wheee!",2e3),H.playAnimation("Robot_Running",3e3)):(G("Too tired...",2e3),H.playAnimation("Robot_No",2e3))},onShop:function(){s(!0)},onSleep:function(){O.toggleSleep(),O.isSleeping?(G("Good morning!",2e3),H.playAnimation("Robot_Wave",2e3)):(G("Zzz...",2e3),H.playAnimation("Robot_Sitting",5e3))}}),c.createElement(p.A,{title:c.createElement("span",null,c.createElement(g.A,null)," Pet Shop"),placement:"right",onClose:function(){return s(!1)},open:l,width:350},c.createElement("div",{className:"mb-4 font-bold text-lg text-yellow-500 flex items-center gap-2"},c.createElement(h.A,null)," ",O.coins," Coins"),c.createElement(m.A,{itemLayout:"horizontal",dataSource:Be,renderItem:function(e){return c.createElement(m.A.Item,{actions:[c.createElement(f.Ay,{key:"buy",type:"primary",shape:"round",size:"small",onClick:function(){return function(e){O.buyItem(e)?N.success("Bought ".concat(e.name,"!")):N.error("Not enough coins!")}(e)},disabled:O.coins<e.price},e.price," \u{1f4b0}")]},c.createElement(m.A.Item.Meta,{avatar:c.createElement("div",{style:{fontSize:24}},e.emoji),title:e.name,description:e.description}))}})),c.createElement(d.A,{title:"My Inventory",open:v,onCancel:function(){return E(!1)},footer:null},c.createElement("div",{className:"grid grid-cols-3 gap-4"},Object.entries(O.inventory).map(function(e){var n=(0,i.A)(e,2),t=n[0],r=n[1];if(r<=0)return null;var a=Be.find(function(e){return e.id===t});return a?c.createElement("div",{key:t,className:"flex flex-col items-center p-4 border rounded-lg cursor-pointer hover:bg-gray-50",onClick:function(){return function(e){O.useItem(e)&&(G("Yum! ".concat(e.name,"!"),2e3),H.playFeedAnimation(),E(!1))}(a)}},c.createElement("div",{className:"text-3xl mb-2"},a.emoji),c.createElement("div",{className:"font-bold"},a.name),c.createElement("div",{className:"text-gray-500"},"x",r)):null}),Object.values(O.inventory).every(function(e){return e<=0})&&c.createElement("div",{className:"col-span-3 text-center text-gray-400 py-8"},"Your inventory is empty. Go shopping!"))),c.createElement(d.A,{title:"Rock Paper Scissors",open:S,onCancel:function(){P(!1),j(null)},footer:null},c.createElement("div",{className:"text-center"},c.createElement("p",{className:"mb-4 text-lg"},"Win to earn XP and make ",rn," happy!"),c.createElement("div",{className:"flex justify-center gap-4 mb-6"},c.createElement(f.Ay,{size:"large",style:{fontSize:24,height:60},onClick:function(){return D("rock")}},"\u{1faa8}"),c.createElement(f.Ay,{size:"large",style:{fontSize:24,height:60},onClick:function(){return D("paper")}},"\u{1f4c4}"),c.createElement(f.Ay,{size:"large",style:{fontSize:24,height:60},onClick:function(){return D("scissors")}},"\u2702\ufe0f")),_&&c.createElement("div",{className:"p-4 bg-gray-100 rounded-lg font-bold"},_))))}const on=an}}]);