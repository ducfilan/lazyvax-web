"use strict";(self.webpackChunklazyvax_ext=self.webpackChunklazyvax_ext||[]).push([[998],{4658:(e,t,n)=>{n.r(t),n.d(t,{default:()=>c});var r=n(31601),o=n.n(r),i=n(76314),a=n.n(i)()(o());a.push([e.id,".my-space-sider{display:flex;flex-direction:column;height:100%}.my-space-sider .my-space-sider-header{padding-top:16px;text-align:center}.my-space-sider .my-space-sider-content{flex:1;overflow:hidden;position:relative}.my-space-sider .my-space-sider-content .tab-content{height:100%;position:relative}.my-space-sider .my-space-sider-content .tab-content .tab-pane{height:100%;overflow:hidden}",""]);const c=a},22408:(e,t,n)=>{n.r(t),n.d(t,{default:()=>c});var r=n(31601),o=n.n(r),i=n(76314),a=n.n(i)()(o());a.push([e.id,'.location-check{position:relative;width:100%;height:100%;background:var(--color-primary-bg);border-radius:12px;padding:12px;box-shadow:0 2px 8px rgba(0,0,0,.05)}.location-check:hover{box-shadow:none}.location-check .card{width:100%;height:100%;perspective:1000px;position:relative}.location-check .card .card-inner{position:relative;width:100%;height:100%;transition:transform .6s;transform-style:preserve-3d}.location-check .card.flipped .card-inner{transform:rotateY(180deg)}.location-check .card .card-front,.location-check .card .card-back{position:absolute;width:100%;height:100%;backface-visibility:hidden;background:hsla(0,0%,100%,.1);border-radius:12px}.location-check .card .card-front{overflow:auto}.location-check .card .card-front::-webkit-scrollbar{display:block;width:12px}.location-check .card .card-front::-webkit-scrollbar-track{background:rgba(0,0,0,0)}.location-check .card .card-front::-webkit-scrollbar-thumb{background-color:var(--color-scrollbar-thumb);border-radius:10px;border:4px solid rgba(0,0,0,0);background-clip:padding-box}.location-check .card .card-front::-webkit-scrollbar-thumb:hover{background-color:var(--color-scrollbar-thumb-hover)}.location-check .card .card-front::-webkit-scrollbar-corner{background:rgba(0,0,0,0)}.location-check .card .card-front .header{display:flex;justify-content:space-between;align-items:center}.location-check .card .card-front .header .settings-button{opacity:0;transition:opacity .2s ease}.location-check .card .card-front:hover .settings-button{opacity:1}.location-check .card .card-front .grid{display:grid;grid-template-columns:repeat(auto-fill, minmax(100px, 1fr));gap:12px;padding:12px}.location-check .card .card-front .grid .grid-item{position:relative}.location-check .card .card-front .grid .grid-item.disabled{pointer-events:none;opacity:.7}.location-check .card .card-front .grid .grid-item .grid-button{width:100%;aspect-ratio:1;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:6px;background:rgba(var(--color-primary-bg-rgb), 1);border:1px solid rgba(0,0,0,.08);border-radius:16px;box-shadow:0 2px 6px rgba(0,0,0,.04);cursor:pointer;transition:all .3s cubic-bezier(0.4, 0, 0.2, 1);position:relative;overflow:hidden;padding:8px}.location-check .card .card-front .grid .grid-item .grid-button::before{content:"";position:absolute;top:0;left:0;width:4px;height:100%;background:var(--color-primary);opacity:0;transition:opacity .3s ease}.location-check .card .card-front .grid .grid-item .grid-button:hover{transform:translateY(-1px);border-color:rgba(var(--color-primary-rgb), 0.2);box-shadow:0 4px 12px rgba(0,0,0,.08);background:rgba(var(--color-primary-rgb), 0.02)}.location-check .card .card-front .grid .grid-item .grid-button:hover::before{opacity:.3}.location-check .card .card-front .grid .grid-item .grid-button:hover .icon svg{filter:brightness(1.2) drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));color:inherit}.location-check .card .card-front .grid .grid-item .grid-button.active{background:rgba(var(--color-primary-rgb), 0.08);border-color:rgba(var(--color-primary-rgb), 0.3);box-shadow:0 4px 16px rgba(var(--color-primary-rgb), 0.1)}.location-check .card .card-front .grid .grid-item .grid-button.active::before{opacity:1}.location-check .card .card-front .grid .grid-item .grid-button.active .name{color:var(--color-primary);font-weight:600}.location-check .card .card-front .grid .grid-item .grid-button .icon{display:flex;align-items:center;justify-content:center;width:32px;height:32px}.location-check .card .card-front .grid .grid-item .grid-button .icon img{width:100%;height:100%;display:block;object-fit:contain}.location-check .card .card-front .grid .grid-item .grid-button .icon svg{transition:all .3s ease;filter:grayscale(1);color:#e0e0e0}.location-check .card .card-front .grid .grid-item .grid-button .icon .emoji{font-size:32px;line-height:32px}.location-check .card .card-front .grid .grid-item .grid-button.active .icon svg{color:var(--color-primary);filter:drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2))}.location-check .card .card-front .grid .grid-item .grid-button:not(.active):not(:hover) .icon svg{opacity:1;filter:grayscale(1);color:#e0e0e0}.location-check .card .card-front .grid .grid-item .grid-button .name{font-size:12px;color:#333;text-align:center;line-height:1.2;font-weight:500;transition:color .3s ease}.location-check .card .card-front .history .history-items{display:flex;flex-wrap:wrap;gap:8px}.location-check .card .card-front .history .history-items .history-chip{display:inline-flex;align-items:center;gap:6px;padding:4px 8px;border-radius:12px;background:rgba(var(--color-primary-bg-rgb), 1);border:1px solid rgba(0,0,0,.06);font-size:12px;height:26px;position:relative;overflow:hidden;will-change:padding-right,transform;transition:padding-right .25s cubic-bezier(0.4, 0, 0.2, 1),transform .35s cubic-bezier(0.22, 1, 0.36, 1),border-color .2s ease,background .2s ease}.location-check .card .card-front .history .history-items .history-chip .remove-icon{position:absolute;top:50%;right:4px;width:22px;height:22px;padding:0;min-width:0;display:inline-flex;align-items:center;justify-content:center;opacity:0;transform:translateX(6px) translateY(-50%) scale(0.95);transition:opacity .2s ease,transform .25s ease;background:rgba(0,0,0,0);pointer-events:none;margin:0}.location-check .card .card-front .history .history-items .history-chip:hover .remove-icon{opacity:1;transform:translateX(0) translateY(-50%) scale(1);transition-delay:120ms;pointer-events:auto}.location-check .card .card-front .history .history-items .history-chip .loc{color:#333}.location-check .card .card-front .history .history-items .history-chip .time{color:#888}.location-check .card .card-front .history .history-items .history-chip:hover{padding-right:26px;background:rgba(var(--color-primary-bg-rgb), 1);border-color:rgba(0,0,0,.1)}.location-check .card .card-back{transform:rotateY(180deg)}.location-check .card .card-back .header{display:flex;align-items:center;justify-content:space-between}.location-check .card .card-back .options-list{flex:1;overflow:auto}.location-check .card .card-back .options-list::-webkit-scrollbar{display:block;width:12px}.location-check .card .card-back .options-list::-webkit-scrollbar-track{background:rgba(0,0,0,0)}.location-check .card .card-back .options-list::-webkit-scrollbar-thumb{background-color:var(--color-scrollbar-thumb);border-radius:10px;border:4px solid rgba(0,0,0,0);background-clip:padding-box}.location-check .card .card-back .options-list::-webkit-scrollbar-thumb:hover{background-color:var(--color-scrollbar-thumb-hover)}.location-check .card .card-back .options-list::-webkit-scrollbar-corner{background:rgba(0,0,0,0)}.location-check .card .card-back .options-list .ant-list-item-meta{align-items:center}.location-check .card .card-back .options-list .ant-list-item-meta h4{margin:0}.location-check .card .card-back .options-list .list-icon{width:28px;height:28px;display:flex;align-items:center;justify-content:center}.location-check .card .card-back .options-list .list-icon img{width:100%;height:100%;display:block;object-fit:contain}.location-check .card .card-back .options-list .list-icon svg{width:24px;height:24px}.location-check .card .card-back .add-custom .row{display:grid;grid-template-columns:1fr auto auto;gap:8px;align-items:center}.location-check .card .card-back .add-custom .emoji-picker{position:relative}.location-check .card .card-back .add-custom .emoji-picker .picker-pop{position:absolute;z-index:10;top:36px;right:0}@media(max-width: 768px){.location-check .card-front .grid{grid-template-columns:repeat(auto-fill, minmax(90px, 1fr))}}',""]);const c=a},27639:(e,t,n)=>{var r=n(85072),o=n.n(r),i=n(97825),a=n.n(i),c=n(77659),l=n.n(c),s=n(55056),d=n.n(s),p=n(10540),u=n.n(p),m=n(41113),g=n.n(m),b=n(85588),f={};f.styleTagTransform=g(),f.setAttributes=d(),f.insert=l().bind(null,"head"),f.domAPI=a(),f.insertStyleElement=u();var v=o()(b.default,f);if(!b.default.locals||e.hot.invalidate){var h=!b.default.locals,y=h?b:b.default.locals;e.hot.accept(85588,t=>{b=n(85588),function(e,t,n){if(!e&&t||e&&!t)return!1;var r;for(r in e)if((!n||"default"!==r)&&e[r]!==t[r])return!1;for(r in t)if(!(n&&"default"===r||e[r]))return!1;return!0}(y,h?b:b.default.locals,h)?(y=h?b:b.default.locals,v(b.default)):e.hot.invalidate()})}e.hot.dispose(function(){v()});b.default&&b.default.locals&&b.default.locals},37403:(e,t,n)=>{n.r(t),n.d(t,{default:()=>c});var r=n(31601),o=n.n(r),i=n(76314),a=n.n(i)()(o());a.push([e.id,".countdown-container{background:hsla(0,0%,100%,.1);backdrop-filter:blur(20px);border-radius:12px;padding:24px;border:1px solid rgba(0,0,0,.03);min-width:250px;margin:0 auto;transition:all .3s ease;box-shadow:0 2px 8px rgba(0,0,0,.05);display:flex;flex-direction:column;align-items:center;gap:16px}.countdown-container .countdown-title{margin-bottom:8px !important;text-align:center}.countdown-container .timer-display{text-align:center}.countdown-container .timer-display .timer-text{font-size:72px !important;font-weight:700 !important;color:var(--color-white);margin:0 !important;line-height:1 !important;letter-spacing:-2px;font-variant-numeric:tabular-nums;text-shadow:0 0 10px rgba(0,0,0,.5)}.countdown-container .progress-container{width:100%;padding:0 20px}.countdown-container .progress-container .ant-progress .ant-progress-outer .ant-progress-inner{background:hsla(0,0%,100%,.2);border-radius:100px}.countdown-container .countdown-description{text-align:center;color:var(--color-text-secondary);margin:8px 0}.countdown-container .controls{display:flex;gap:12px;align-items:center}.lzv-theme-dark .countdown-container{background:rgba(0,0,0,.4);border:1px solid hsla(0,0%,100%,.1)}.lzv-theme-dark .countdown-container .progress-container .ant-progress .ant-progress-outer .ant-progress-inner{background:hsla(0,0%,100%,.05)}@media(max-width: 480px){.countdown-container{min-width:auto;padding:20px}.countdown-container .timer-display .timer-text{font-size:56px !important}.countdown-container .controls{flex-direction:column;width:100%}.countdown-container .controls .control-button{width:100%;justify-content:center}}",""]);const c=a},48244:(e,t,n)=>{n.r(t),n.d(t,{default:()=>c});var r=n(31601),o=n.n(r),i=n(76314),a=n.n(i)()(o());a.push([e.id,".my-space-wrapper .lzv-wavy-background .lzv-wave{height:140px}.my-space-wrapper .my-space-content-wrapper{display:flex;width:100%;position:relative;height:calc(100vh - 56px);height:calc(100dvh - 56px)}.my-space-wrapper .my-space-content-wrapper .my-space-main{flex:1;display:flex;flex-direction:column;position:relative;height:calc(100% - 100px);overflow:auto;padding:8px 0 0 8px}.my-space-wrapper .my-space-content-wrapper .my-space-main::-webkit-scrollbar{display:block;width:12px}.my-space-wrapper .my-space-content-wrapper .my-space-main::-webkit-scrollbar-track{background:rgba(0,0,0,0)}.my-space-wrapper .my-space-content-wrapper .my-space-main::-webkit-scrollbar-thumb{background-color:var(--color-scrollbar-thumb);border-radius:10px;border:4px solid rgba(0,0,0,0);background-clip:padding-box}.my-space-wrapper .my-space-content-wrapper .my-space-main::-webkit-scrollbar-thumb:hover{background-color:var(--color-scrollbar-thumb-hover)}.my-space-wrapper .my-space-content-wrapper .my-space-main::-webkit-scrollbar-corner{background:rgba(0,0,0,0)}.my-space-wrapper .my-space-content-wrapper .my-space-main .dock-wrapper{position:fixed;bottom:0;left:50%;transform:translateX(-50%);z-index:9999999}@media(min-width: 768px){.my-space-wrapper .my-space-content-wrapper .my-space-main.with-sider .dock-wrapper{left:calc(50% - 200px)}}@media(min-width: 768px){.my-space-wrapper .my-space-content-wrapper .my-space-main.no-sider .dock-wrapper{left:50%}}.my-space-wrapper .my-space-content-wrapper .my-space-sider{width:400px;height:100%;overflow:hidden;flex-shrink:0;padding:12px}.my-space-wrapper .my-space-content-wrapper .my-space-sider>*{box-shadow:-2px 0 8px rgba(0,0,0,.08)}@media(max-width: 768px){.my-space-wrapper .my-space-content-wrapper .my-space-sider{display:none}}.my-space-wrapper .widget-music .sound-mixer .sound-item .sound-button.active{background:rgba(var(--color-primary-bg-rgb), 0.4)}.my-space-wrapper .widget-music .sound-mixer .sound-item .sound-button:hover{background:rgba(var(--color-primary-bg-rgb), 0.8)}.draggable-widget-container{position:absolute;border-radius:12px;transition:none}.draggable-widget-container:hover .widget-header{opacity:1}.draggable-widget-container:hover{background:linear-gradient(to bottom, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));backdrop-filter:blur(10px)}.draggable-widget-container.arranging{transition:all .8s cubic-bezier(0.34, 1.56, 0.64, 1) !important}.draggable-widget-container.react-draggable-dragging{transition:none !important}.draggable-widget,.mobile-widget{width:100%;height:100%;display:flex;flex-direction:column;overflow:hidden}.draggable-widget .widget-header,.mobile-widget .widget-header{display:flex;align-items:center;justify-content:space-between;padding:8px 12px;border-bottom:1px solid var(--color-divider);cursor:move;user-select:none;transition:opacity .2s ease-in-out;opacity:0}.draggable-widget.widget-message .cs-message-list,.mobile-widget.widget-message .cs-message-list{border-top-left-radius:12px;border-top-right-radius:12px}.draggable-widget.widget-message .lzv-typing-box-wrapper,.mobile-widget.widget-message .lzv-typing-box-wrapper{border-bottom-left-radius:12px;border-bottom-right-radius:12px;background:var(--color-primary-bg)}.draggable-widget.widget-message .lzv-typing-box-wrapper .cs-message-input,.mobile-widget.widget-message .lzv-typing-box-wrapper .cs-message-input{background-color:var(--color-bg-gray-ultralight)}.draggable-widget.widget-message .lzv-typing-box-wrapper .cs-message-input .cs-message-input__content-editor-wrapper,.mobile-widget.widget-message .lzv-typing-box-wrapper .cs-message-input .cs-message-input__content-editor-wrapper{background-color:var(--color-bg-gray-ultralight) !important}.draggable-widget.widget-message .lzv-typing-box-wrapper .cs-message-input .cs-message-input__content-editor-wrapper .cs-message-input__content-editor-container,.mobile-widget.widget-message .lzv-typing-box-wrapper .cs-message-input .cs-message-input__content-editor-wrapper .cs-message-input__content-editor-container{background-color:var(--color-bg-gray-ultralight) !important}.draggable-widget.widget-message .lzv-typing-box-wrapper .cs-message-input .cs-message-input__content-editor-wrapper .cs-message-input__content-editor-container .cs-message-input__content-editor,.mobile-widget.widget-message .lzv-typing-box-wrapper .cs-message-input .cs-message-input__content-editor-wrapper .cs-message-input__content-editor-container .cs-message-input__content-editor{background-color:var(--color-bg-gray-ultralight) !important}.draggable-widget.widget-energy,.mobile-widget.widget-energy{overflow:visible}.draggable-widget.widget-energy .widget-content,.mobile-widget.widget-energy .widget-content{overflow:visible}.draggable-widget.widget-location,.mobile-widget.widget-location{overflow:visible}.draggable-widget.widget-location .widget-content,.mobile-widget.widget-location .widget-content{overflow:visible}.draggable-widget .widget-content,.mobile-widget .widget-content{flex:1;overflow:auto;padding:5px;padding-top:0}.draggable-widget .widget-content .music-widget-content,.mobile-widget .widget-content .music-widget-content{height:100%;display:flex;flex-direction:column}.draggable-widget .widget-content .music-widget-content .music-widget-header,.mobile-widget .widget-content .music-widget-content .music-widget-header{margin-bottom:16px;text-align:center}.draggable-widget .widget-content .music-widget-content .music-widget-body,.mobile-widget .widget-content .music-widget-content .music-widget-body{flex:1;position:relative;min-height:0}.draggable-widget .widget-content .goals-widget-content,.mobile-widget .widget-content .goals-widget-content{height:100%;display:flex;flex-direction:column;background:var(--color-primary-bg);border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,.05)}.draggable-widget .widget-content .goals-widget-content:hover,.mobile-widget .widget-content .goals-widget-content:hover{box-shadow:none}.draggable-widget .widget-content .goals-widget-content .widget-title,.mobile-widget .widget-content .goals-widget-content .widget-title{margin-bottom:16px;font-size:16px;font-weight:600;color:var(--color-text-primary)}.draggable-widget .widget-content .goals-widget-content .goals-list,.mobile-widget .widget-content .goals-widget-content .goals-list{flex:1;overflow:auto;border-radius:12px}.draggable-widget .widget-content .goals-widget-content .goals-list .goal-item,.mobile-widget .widget-content .goals-widget-content .goals-list .goal-item{margin-bottom:12px}.draggable-widget .widget-content .goals-widget-content .goals-list .goal-item:last-child,.mobile-widget .widget-content .goals-widget-content .goals-list .goal-item:last-child{margin-bottom:0}.draggable-widget .widget-content .goals-widget-content .goals-list::-webkit-scrollbar,.mobile-widget .widget-content .goals-widget-content .goals-list::-webkit-scrollbar{width:6px}.draggable-widget .widget-content .goals-widget-content .goals-list::-webkit-scrollbar-track,.mobile-widget .widget-content .goals-widget-content .goals-list::-webkit-scrollbar-track{background:var(--color-bg-secondary);border-radius:3px}.draggable-widget .widget-content .goals-widget-content .goals-list::-webkit-scrollbar-thumb,.mobile-widget .widget-content .goals-widget-content .goals-list::-webkit-scrollbar-thumb{background:var(--color-divider);border-radius:3px}.draggable-widget .widget-content .goals-widget-content .goals-list::-webkit-scrollbar-thumb:hover,.mobile-widget .widget-content .goals-widget-content .goals-list::-webkit-scrollbar-thumb:hover{background:var(--color-text-tertiary)}.draggable-widget .widget-content .tasks-widget-wrapper,.mobile-widget .widget-content .tasks-widget-wrapper{background:var(--color-primary-bg);border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,.05)}.draggable-widget .widget-content .tasks-widget-wrapper:hover,.mobile-widget .widget-content .tasks-widget-wrapper:hover{box-shadow:none}.draggable-widget .widget-content .energy-checkin-content,.mobile-widget .widget-content .energy-checkin-content{background:var(--color-primary-bg);border-radius:12px;padding:12px;box-shadow:0 2px 8px rgba(0,0,0,.05)}.draggable-widget .widget-content .energy-checkin-content:hover,.mobile-widget .widget-content .energy-checkin-content:hover{box-shadow:none}.draggable-widget .widget-content .energy-checkin-content .day-status-slider-container,.mobile-widget .widget-content .energy-checkin-content .day-status-slider-container{margin-top:24px}.my-space-chat-bubble-content{height:min(600px,100vh - 172px);height:min(600px,100dvh - 172px);background:var(--color-primary-bg);border-radius:12px;overflow:hidden}.my-space-chat-bubble-content .sider-chat-wrapper{height:100%}.my-space-chat-bubble-content .home-chat-wrapper .conversation-card>div{padding:0}@media(max-width: 768px){.my-space-wrapper .my-space-main{padding:0;overflow:hidden;display:flex;align-items:center;justify-content:center}.my-space-wrapper .my-space-main .dock-wrapper{left:50%;transform:translateX(-50%)}.my-space-wrapper .my-space-main .mobile-widget{width:100%;height:100%;display:flex;align-items:center;justify-content:center;padding-bottom:5px}.my-space-wrapper .my-space-main .mobile-widget .widget-content{padding:0}.my-space-wrapper .my-space-main .mobile-widget .music-widget-content,.my-space-wrapper .my-space-main .mobile-widget .blockquote-wrapper{padding:16px}.my-space-wrapper .my-space-main .mobile-widget .blockquote-wrapper{height:100%;display:flex;align-items:center}.my-space-wrapper .my-space-main .mobile-widget .pomodoro-container .pomodoro-body .timer-display .timer-text{color:unset;text-shadow:unset}.my-space-wrapper .my-space-main .stack-cards-3d{width:calc(100vw - 32px);height:calc(100vh - 200px);height:calc(100dvh - 200px);margin:16px auto;max-height:800px}.my-space-wrapper .my-space-main .stack-cards-3d>.cards-wrapper{width:100%;height:100%}.my-space-wrapper .my-space-main .stack-cards-3d>.cards-wrapper>.card{width:100%;height:100%;background:var(--color-primary-bg);border-radius:16px;box-shadow:0 8px 32px rgba(0,0,0,.1);overflow:hidden;display:flex;flex-direction:column}.my-space-wrapper .my-space-main .stack-cards-3d>.cards-wrapper>.card>div{width:100%;flex:1;display:flex;flex-direction:column;overflow:hidden}.my-space-wrapper .my-space-main .stack-cards-3d>.cards-wrapper>.card>div .pomodoro-wrapper,.my-space-wrapper .my-space-main .stack-cards-3d>.cards-wrapper>.card>div .music-widget-content,.my-space-wrapper .my-space-main .stack-cards-3d>.cards-wrapper>.card>div .goals-widget-content,.my-space-wrapper .my-space-main .stack-cards-3d>.cards-wrapper>.card>div .tasks-widget-wrapper,.my-space-wrapper .my-space-main .stack-cards-3d>.cards-wrapper>.card>div .energy-checkin-content,.my-space-wrapper .my-space-main .stack-cards-3d>.cards-wrapper>.card>div .countdown-wrapper{width:100%;height:100%;display:flex;flex-direction:column;overflow:hidden}.my-space-wrapper .my-space-main .stack-cards-3d>.cards-wrapper>.card>div .music-widget-content .music-widget-body{flex:1;overflow:hidden;display:flex;flex-direction:column}.my-space-wrapper .my-space-main .stack-cards-3d>.cards-wrapper>.card>div .music-widget-content .music-widget-body .playlist-content{flex:1;overflow:auto}.my-space-wrapper .my-space-main .stack-cards-3d>.cards-wrapper>.card>div .music-widget-content .music-widget-body .playlist-content::-webkit-scrollbar{display:block;width:12px}.my-space-wrapper .my-space-main .stack-cards-3d>.cards-wrapper>.card>div .music-widget-content .music-widget-body .playlist-content::-webkit-scrollbar-track{background:rgba(0,0,0,0)}.my-space-wrapper .my-space-main .stack-cards-3d>.cards-wrapper>.card>div .music-widget-content .music-widget-body .playlist-content::-webkit-scrollbar-thumb{background-color:var(--color-scrollbar-thumb);border-radius:10px;border:4px solid rgba(0,0,0,0);background-clip:padding-box}.my-space-wrapper .my-space-main .stack-cards-3d>.cards-wrapper>.card>div .music-widget-content .music-widget-body .playlist-content::-webkit-scrollbar-thumb:hover{background-color:var(--color-scrollbar-thumb-hover)}.my-space-wrapper .my-space-main .stack-cards-3d>.cards-wrapper>.card>div .music-widget-content .music-widget-body .playlist-content::-webkit-scrollbar-corner{background:rgba(0,0,0,0)}.my-space-wrapper .my-space-main .stack-cards-3d>.cards-wrapper>.card>div .goals-widget-content .goals-list{flex:1;overflow:auto}.my-space-wrapper .my-space-main .stack-cards-3d>.cards-wrapper>.card>div .goals-widget-content .goals-list::-webkit-scrollbar{display:block;width:12px}.my-space-wrapper .my-space-main .stack-cards-3d>.cards-wrapper>.card>div .goals-widget-content .goals-list::-webkit-scrollbar-track{background:rgba(0,0,0,0)}.my-space-wrapper .my-space-main .stack-cards-3d>.cards-wrapper>.card>div .goals-widget-content .goals-list::-webkit-scrollbar-thumb{background-color:var(--color-scrollbar-thumb);border-radius:10px;border:4px solid rgba(0,0,0,0);background-clip:padding-box}.my-space-wrapper .my-space-main .stack-cards-3d>.cards-wrapper>.card>div .goals-widget-content .goals-list::-webkit-scrollbar-thumb:hover{background-color:var(--color-scrollbar-thumb-hover)}.my-space-wrapper .my-space-main .stack-cards-3d>.cards-wrapper>.card>div .goals-widget-content .goals-list::-webkit-scrollbar-corner{background:rgba(0,0,0,0)}.my-space-wrapper .my-space-main .stack-cards-3d>.cards-wrapper>.card>div .tasks-widget-wrapper{overflow:hidden}.my-space-wrapper .my-space-main .stack-cards-3d>.cards-wrapper>.card>div .tasks-widget-wrapper .tasks-list{overflow:auto}.my-space-wrapper .my-space-main .stack-cards-3d>.cards-wrapper>.card>div .tasks-widget-wrapper .tasks-list::-webkit-scrollbar{display:block;width:12px}.my-space-wrapper .my-space-main .stack-cards-3d>.cards-wrapper>.card>div .tasks-widget-wrapper .tasks-list::-webkit-scrollbar-track{background:rgba(0,0,0,0)}.my-space-wrapper .my-space-main .stack-cards-3d>.cards-wrapper>.card>div .tasks-widget-wrapper .tasks-list::-webkit-scrollbar-thumb{background-color:var(--color-scrollbar-thumb);border-radius:10px;border:4px solid rgba(0,0,0,0);background-clip:padding-box}.my-space-wrapper .my-space-main .stack-cards-3d>.cards-wrapper>.card>div .tasks-widget-wrapper .tasks-list::-webkit-scrollbar-thumb:hover{background-color:var(--color-scrollbar-thumb-hover)}.my-space-wrapper .my-space-main .stack-cards-3d>.cards-wrapper>.card>div .tasks-widget-wrapper .tasks-list::-webkit-scrollbar-corner{background:rgba(0,0,0,0)}.draggable-widget{min-width:90vw;max-width:90vw}.draggable-widget.widget-timer,.draggable-widget.widget-music,.draggable-widget.widget-quote,.draggable-widget.widget-target,.draggable-widget.widget-message{min-width:90vw;max-width:90vw}}.dock-container .dock{padding:8px;border-radius:16px;display:flex;gap:8px;align-items:center}.dock-container .dock--with-background{background:hsla(0,0%,100%,.9);backdrop-filter:blur(10px);box-shadow:0 4px 16px rgba(0,0,0,.1)}.dock-container .dock .dock-item{position:relative;width:48px;height:48px;border-radius:12px;display:flex;align-items:center;justify-content:center;transition:all .3s ease}.dock-container .dock .dock-item .dock-item__icon{font-size:24px;color:var(--color-text-secondary);transition:color .2s ease}.dock-container .dock .dock-item--with-animation:hover{transform:scale(1.1)}.dock-container .dock .dock-item--selected{background:var(--color-primary-light)}.dock-container .dock .dock-item--selected .dock-item__icon{color:var(--color-primary)}.dock-overflow-popover .ant-popover-inner{padding:0}@keyframes fadeIn{from{opacity:0;transform:scale(0.9)}to{opacity:1;transform:scale(1)}}.draggable-widget{animation:fadeIn .3s ease}",""]);const c=a},52529:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Gt});var r=n(60436),o=n(10467),i=n(64467),a=n(5544),c=n(54756),l=n.n(c),s=n(96540),d=n(66221),p=n(68335),u=n(76511),m=n(21468),g=n(1849),b=n(36191),f=n(26362),v=n(82734),h=n(13904),y=n(7079),w=n(81318),x=n(6490),k=n(36704),E=n(70462),A=n(49982),N=n(10980),_=n(1372),S=n(85061),C=n(20763),R=n(47852),z=n(29197),D=n(55794),I=n.n(D),j=n(33149),P=(n(87957),n(61400)),L=n(28073),M=n(78854),O=(n(27639),n(95927)),T=n(42569),B=n(2622);const q=function(e){var t=e.items,n=e.withBackground,o=void 0===n||n,i=e.backgroundColor,c=e.withAnimation,l=void 0===c||c,d=e.multiple,p=void 0!==d&&d,u=e.selectedIds,m=void 0===u?[]:u,g=e.onSelectionChange,b=e.maxWidthPercent,f=void 0===b?90:b,v=(0,s.useRef)(null),h=(0,s.useRef)(null),y=(0,s.useState)(t.length),w=(0,a.A)(y,2),x=w[0],k=w[1],E=(0,s.useState)(!1),A=(0,a.A)(E,2),N=A[0],_=A[1],S=(0,O.S)().themeColor,C=(0,s.useRef)({});function R(e){var t,n=e.id;if(!C.current[n]){var o;if(C.current[n]=setTimeout(function(){delete C.current[n]},300),g)o=p?m.includes(n)?m.filter(function(e){return e!==n}):[].concat((0,r.A)(m),[n]):[n],g(o);null===(t=e.onSelect)||void 0===t||t.call(e),_(!1)}}var z=(0,s.useCallback)(function(){if(h.current&&v.current){var e=h.current.closest(".my-space-main");if(e){var n=e.clientWidth*(f/100)-32-48-8,r=Math.floor(n/56),o=Math.max(1,Math.min(r,t.length));o!==x&&k(o)}}},[t.length,f,x]);(0,s.useEffect)(function(){var e;z();var t=new ResizeObserver(function(){z()}),n=null===(e=h.current)||void 0===e?void 0:e.closest(".my-space-main");return n&&t.observe(n),function(){t.disconnect(),Object.values(C.current).forEach(function(e){return clearTimeout(e)}),C.current={}}},[z]);var D=t.slice(0,x),I=t.slice(x),j=I.length>0,P=s.createElement("div",{className:"dock-overflow-menu"},I.map(function(e){return s.createElement("button",{key:e.id,className:"dock-overflow-item ".concat(m.includes(e.id)?"dock-overflow-item--selected":""),onClick:function(){return R(e)}},s.createElement("div",{className:"dock-overflow-item__icon"},e.icon),s.createElement("span",{className:"dock-overflow-item__title"},e.title))}));return s.createElement("div",{className:"dock-container",ref:h},s.createElement("div",{ref:v,className:"dock ".concat(o?"dock--with-background":""," ").concat(l?"dock--with-animation":""),style:i?{backgroundColor:i}:void 0},D.map(function(e){return s.createElement("button",{key:e.id,className:"no-effect dock-item ".concat(m.includes(e.id)?"dock-item--selected":""," ").concat(l?"dock-item--with-animation":""),onClick:function(){return R(e)},title:e.title},s.createElement("div",{className:"dock-item__icon"},e.icon),s.createElement("span",{className:"dock-item__tooltip"},e.title))}),j&&s.createElement(L.A,{content:P,trigger:"click",placement:"topRight",open:N,onOpenChange:_,classNames:{root:"dock-overflow-popover lzv-theme-".concat(S)}},s.createElement("button",{className:"no-effect dock-item dock-item--more ".concat(l?"dock-item--with-animation":""),title:"More"},s.createElement("div",{className:"dock-item__icon"},s.createElement(M.A,null)),s.createElement("span",{className:"dock-item__tooltip"},(0,B.zX)((0,T.Ru)("common_more")))))))};var U=n(93016),G=n(25339),H=n(7142),F=n(62977),K=n(36552),W=n(15039),Y=n(60227),J=n(32977),X=n(21357),Q=n(51802),V=n(80581),$=n(78602),Z=n(36207),ee=n(10741);n(75572);function te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?te(Object(n),!0).forEach(function(t){(0,i.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):te(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var re=U.A.Title,oe=U.A.Text,ie=function(e){return e.IDLE="idle",e.RUNNING="running",e.PAUSED="paused",e}({}),ae=function(e){return e.FOCUS="focus",e.BREAK="break",e.LONG_BREAK="long_break",e}({}),ce="lvx.pomodoro.settings",le={focusDuration:25,shortBreakDuration:5,longBreakDuration:15,autoStartBreaks:!0,autoStartFocus:!1,soundEnabled:!0};var se=s.forwardRef(function(e,t){var n=e.focusDurationInMinutes,r=void 0===n?25:n,o=e.breakDurationInMinutes,i=void 0===o?5:o,c=e.longBreakDurationInMinutes,l=void 0===c?15:c,d=e.focusTask,p=e.shortBreakTask,u=e.longBreakTask,g=e.onSessionComplete,b=e.totalSeconds,f=e.isAutoRun,v=void 0!==f&&f,h=e.startTime,w=e.onStateChange,k=(0,s.useState)(function(){var e=function(){try{var e=localStorage.getItem(ce);if(!e)return le;var t=JSON.parse(e);return ne(ne({},le),t)}catch(e){return le}}();return ne(ne({},e),{},{focusDuration:r||e.focusDuration,shortBreakDuration:i||e.shortBreakDuration,longBreakDuration:l||e.longBreakDuration})}),E=(0,a.A)(k,2),A=E[0],N=E[1],_=(0,s.useState)(ae.FOCUS),S=(0,a.A)(_,2),C=S[0],R=S[1],z=(0,s.useState)(ie.IDLE),D=(0,a.A)(z,2),I=D[0],j=D[1],P=(0,s.useState)(!1),M=(0,a.A)(P,2),O=M[0],B=M[1],q=(0,s.useState)(A.focusDuration),U=(0,a.A)(q,2),te=U[0],se=U[1],de=(0,s.useState)(0),pe=(0,a.A)(de,2),ue=pe[0],me=pe[1],ge=(0,s.useState)(!1),be=(0,a.A)(ge,2),fe=be[0],ve=be[1],he=b?function(e,t,n,r){var o=0,i=0;if(e<=0)return 0;for(;o<e;){var a=60*t;if(o+a>e){if(0===i)return 1;break}var c=60*(++i%4==0?r:n);if((o+=a)+c>e)break;o+=c}return i>0?i:1}(b,A.focusDuration,A.shortBreakDuration,A.longBreakDuration):1;(0,s.useEffect)(function(){!function(e){try{localStorage.setItem(ce,JSON.stringify(e))}catch(e){}}(A)},[A]);var ye=(0,s.useCallback)(function(e){switch(e){case ae.FOCUS:return A.focusDuration;case ae.BREAK:return A.shortBreakDuration;case ae.LONG_BREAK:return A.longBreakDuration;default:return A.focusDuration}},[A]),we=(0,s.useState)(60*A.focusDuration),xe=(0,a.A)(we,2),ke=xe[0],Ee=xe[1],Ae=(0,s.useRef)(null),Ne=(0,s.useRef)(null),_e=(0,s.useCallback)(function(){if(h){var e=(new Date).getTime()-h.getTime(),t=Math.floor(e/1e3);if(t<=0)return R(ae.FOCUS),Ee(60*ye(ae.FOCUS)),void me(0);for(var n=0,r=0,o=ae.FOCUS;n<t;){var i=60*ye(o);if(n+i>t){var a=i-(t-n);return R(o),Ee(a),void me(r)}n+=i,o=o===ae.FOCUS?++r%4==0?ae.LONG_BREAK:ae.BREAK:ae.FOCUS}R(o),Ee(60*ye(o)),me(r)}},[ye,h]);(0,s.useEffect)(function(){h&&v&&(_e(),j(ie.RUNNING))},[h,v,_e]);var Se=[{label:(0,T.Ru)("pomodoro_focus"),value:ae.FOCUS,icon:s.createElement("span",{className:"tab-icon"},s.createElement(x.A,null))},{label:(0,T.Ru)("pomodoro_short_break"),value:ae.BREAK,icon:s.createElement("span",{className:"tab-icon"},s.createElement(y.A,null))},{label:(0,T.Ru)("pomodoro_long_break"),value:ae.LONG_BREAK,icon:s.createElement("span",{className:"tab-icon"},s.createElement(Y.A,null))}],Ce=(0,s.useCallback)(function(){switch(C){case ae.FOCUS:return d;case ae.BREAK:return p;case ae.LONG_BREAK:return u;default:return}},[C,d,p,u]),Re=(0,s.useCallback)(function(){w&&w({timerState:I,sessionType:C,timeRemaining:ke})},[w,I,C,ke]);(0,s.useEffect)(function(){Re()},[Re]);var ze=(0,s.useCallback)(function(){if(null==g||g(C),A.soundEnabled&&Ne.current){var e="/sounds/notification.mp3";C===ae.FOCUS?e="/sounds/notification.mp3":C===ae.BREAK?e="/sounds/short_break.mp3":C===ae.LONG_BREAK&&(e="/sounds/long_break.mp3"),Ne.current.src=e,Ne.current.play().catch(function(){})}var t;if(C===ae.FOCUS){var n=ue+1;me(n),t=n%4==0?ae.LONG_BREAK:ae.BREAK}else t=ae.FOCUS;var r=C===ae.FOCUS&&A.autoStartBreaks||(C===ae.BREAK||C===ae.LONG_BREAK)&&A.autoStartFocus;j(r?ie.RUNNING:ie.IDLE),R(t),Ee(60*ye(t))},[C,ye,g,ue,A]);(0,s.useEffect)(function(){se(ye(C))},[ye,C]),(0,s.useEffect)(function(){try{Ne.current=new Audio,Ne.current.volume=1}catch(e){}return function(){Ae.current&&clearInterval(Ae.current)}},[]),(0,s.useEffect)(function(){if(I===ie.RUNNING){if(!(ke<=0))return Ae.current=setInterval(function(){Ee(function(e){return e-1})},1e3),function(){Ae.current&&clearInterval(Ae.current)};ze()}},[I,ke,ze]);var De=(0,s.useCallback)(function(){j(ie.RUNNING)},[]),Ie=(0,s.useCallback)(function(){j(ie.PAUSED)},[]),je=(0,s.useCallback)(function(){j(ie.RUNNING)},[]),Pe=(0,s.useCallback)(function(){var e=I===ie.RUNNING;j(e?ie.RUNNING:ie.IDLE),R(ae.FOCUS),Ee(60*A.focusDuration),me(0)},[A.focusDuration,I]),Le=(0,s.useCallback)(function(){Ae.current&&(clearInterval(Ae.current),Ae.current=null),ze()},[ze]);(0,s.useImperativeHandle)(t,function(){return{start:De,pause:Ie,resume:je,reset:Pe,skip:Le}},[De,Ie,je,Pe,Le]);var Me,Oe,Te,Be=I===ie.IDLE?{icon:s.createElement(J.A,null),text:(0,T.Ru)("common_start"),onClick:De,className:"start-button"}:I===ie.RUNNING?{icon:s.createElement(X.A,null),text:(0,T.Ru)("common_pause"),onClick:Ie,className:"pause-button"}:{icon:s.createElement(J.A,null),text:(0,T.Ru)("common_resume"),onClick:je,className:"resume-button"},qe=Ce();return s.createElement("div",{className:"pomodoro-wrapper ".concat(C)},s.createElement("div",{className:"card ".concat(fe?"flipped":"")},s.createElement("div",{className:"card-inner"},s.createElement("div",{className:"card-front pomodoro-container"},s.createElement("div",{className:"pomodoro-header"},s.createElement(G.A,{options:Se,value:C,onChange:function(e){var t=e;R(t),j(ie.IDLE),Ee(60*ye(t))},className:"pomodoro-tabs",block:!0})),s.createElement("div",{className:"pomodoro-body"},s.createElement("div",{className:"timer-display"},s.createElement(L.A,{content:s.createElement("div",{style:{display:"flex",alignItems:"center",gap:"8px"}},s.createElement(H.A,{min:1,value:te,onChange:function(e){return se(null!=e?e:1)}}),s.createElement(oe,null,(0,T.Ru)("common_minutes")),s.createElement(m.Ay,{className:"is-deep",icon:s.createElement(Q.A,null),onClick:function(){var e=null!=te?te:ye(C),t=ne({},A);switch(C){case ae.FOCUS:t.focusDuration=e;break;case ae.BREAK:t.shortBreakDuration=e;break;case ae.LONG_BREAK:t.longBreakDuration=e}N(t),Ee(60*e),B(!1)}},(0,T.Ru)("common_go"))),open:O,onOpenChange:B},s.createElement(re,{level:1,className:"timer-text",onClick:function(){I===ie.IDLE&&(se(ye(C)),B(!0))},style:{cursor:I===ie.IDLE?"pointer":"default"}},(Me=ke,Oe=Math.floor(Me/60),Te=Me%60,"".concat(Oe.toString().padStart(2,"0"),":").concat(Te.toString().padStart(2,"0"))))),he&&s.createElement("div",{className:"session-progress"},Array.from({length:he}).map(function(e,t){var n=t+1,r=n<=ue,o=n===ue+1&&n<=he;return s.createElement(F.A,{title:"".concat(n,"/").concat(he," \u2764\ufe0f"),key:t},s.createElement("span",{className:"session-dot ".concat(r?"completed":o?"current":"pending")}))}))),qe&&s.createElement("div",{className:"task-info"},s.createElement(oe,{className:"task-label"},qe.emoji&&s.createElement("span",{className:"task-emoji"},qe.emoji)," # ",qe.title)),s.createElement("div",{className:"controls"},s.createElement(m.Ay,{type:"primary",size:"large",icon:Be.icon,onClick:Be.onClick,className:"is-deep control-button ".concat(Be.className)},Be.text),(I!==ie.IDLE||C!==ae.FOCUS||ke<60*A.focusDuration||ue>0)&&s.createElement(m.Ay,{size:"large",icon:s.createElement(V.A,null),onClick:Pe,className:"is-deep control-button reset-button"},(0,T.Ru)("common_reset"))),s.createElement(F.A,{title:(0,T.Ru)("common_settings")},s.createElement(m.Ay,{className:"settings-button",type:"text",shape:"circle",icon:s.createElement($.A,null),onClick:function(){return ve(!0)}})))),s.createElement("div",{className:"card-back"},s.createElement("div",{className:"settings-header"},s.createElement(m.Ay,{type:"primary",variant:"filled",icon:s.createElement(Z.A,null),onClick:function(){return ve(!1)},className:"is-deep"},(0,T.Ru)("common_back")),s.createElement(m.Ay,{type:"default",className:"is-deep",icon:s.createElement(ee.A,null),onClick:function(){N(le)}},(0,T.Ru)("common_reset"))),s.createElement("div",{className:"settings-body"},s.createElement("div",{className:"settings-section"},s.createElement(oe,{className:"settings-section-title"},(0,T.Ru)("pomodoro_settings_duration")),s.createElement("div",{className:"settings-row"},s.createElement(oe,null,(0,T.Ru)("pomodoro_focus")),s.createElement("div",{className:"input-with-unit"},s.createElement(H.A,{min:1,max:120,value:A.focusDuration,onChange:function(e){return N(ne(ne({},A),{},{focusDuration:null!=e?e:25}))}}),s.createElement(oe,{className:"unit"},(0,T.Ru)("common_minutes")))),s.createElement("div",{className:"settings-row"},s.createElement(oe,null,(0,T.Ru)("pomodoro_short_break")),s.createElement("div",{className:"input-with-unit"},s.createElement(H.A,{min:1,max:60,value:A.shortBreakDuration,onChange:function(e){return N(ne(ne({},A),{},{shortBreakDuration:null!=e?e:5}))}}),s.createElement(oe,{className:"unit"},(0,T.Ru)("common_minutes")))),s.createElement("div",{className:"settings-row"},s.createElement(oe,null,(0,T.Ru)("pomodoro_long_break")),s.createElement("div",{className:"input-with-unit"},s.createElement(H.A,{min:1,max:120,value:A.longBreakDuration,onChange:function(e){return N(ne(ne({},A),{},{longBreakDuration:null!=e?e:15}))}}),s.createElement(oe,{className:"unit"},(0,T.Ru)("common_minutes"))))),s.createElement(K.A,{size:"small"}),s.createElement("div",{className:"settings-section"},s.createElement(oe,{className:"settings-section-title"},(0,T.Ru)("pomodoro_settings_auto_start")),s.createElement("div",{className:"settings-row"},s.createElement(oe,null,(0,T.Ru)("pomodoro_settings_auto_start_breaks")),s.createElement(W.A,{checked:A.autoStartBreaks,onChange:function(e){return N(ne(ne({},A),{},{autoStartBreaks:e}))}})),s.createElement("div",{className:"settings-row"},s.createElement(oe,null,(0,T.Ru)("pomodoro_settings_auto_start_focus")),s.createElement(W.A,{checked:A.autoStartFocus,onChange:function(e){return N(ne(ne({},A),{},{autoStartFocus:e}))}}))),s.createElement(K.A,{size:"small"}),s.createElement("div",{className:"settings-section"},s.createElement(oe,{className:"settings-section-title"},(0,T.Ru)("pomodoro_settings_notifications")),s.createElement("div",{className:"settings-row"},s.createElement(oe,null,(0,T.Ru)("pomodoro_settings_sound")),s.createElement(W.A,{checked:A.soundEnabled,onChange:function(e){return N(ne(ne({},A),{},{soundEnabled:e}))}}))))))))}),de=n(6754),pe=(n(99614),U.A.Title),ue=U.A.Text,me=function(e){return e.IDLE="idle",e.RUNNING="running",e.PAUSED="paused",e}(me||{}),ge=s.forwardRef(function(e,t){var n=e.durationInSeconds,r=e.totalSeconds,o=e.onComplete,i=e.title,c=e.description,l=e.autoStart,d=void 0!==l&&l,p=e.onStateChange,u=(0,s.useState)(me.IDLE),g=(0,a.A)(u,2),b=g[0],f=g[1],v=(0,s.useState)(n),h=(0,a.A)(v,2),y=h[0],w=h[1],x=(0,s.useState)(n),k=(0,a.A)(x,2),E=k[0],A=k[1],N=(0,s.useState)(!1),_=(0,a.A)(N,2),S=_[0],C=_[1],R=(0,s.useState)(Math.floor(n/60)),z=(0,a.A)(R,2),D=z[0],I=z[1],j=(0,s.useRef)(null),P=(0,s.useRef)(null),M=(0,s.useRef)(null),O=(0,s.useState)(null!=r?r:n),B=(0,a.A)(O,2),q=B[0],U=B[1],G=y>0?y/q*100:0;(0,s.useEffect)(function(){try{P.current=new Audio("/sounds/notification.mp3"),P.current.volume=1}catch(e){}return function(){j.current&&clearInterval(j.current)}},[]),(0,s.useEffect)(function(){I(Math.floor(E/60))},[E]),(0,s.useEffect)(function(){var e=null===M.current,t=!e&&M.current!==n;(e||t)&&(f(me.IDLE),w(n),A(n),U(null!=r?r:n),C(!1),j.current&&(clearInterval(j.current),j.current=null),d&&f(me.RUNNING)),M.current=n},[n,r,d]);var F=(0,s.useCallback)(function(){p&&p({timerState:b,timeRemaining:y,totalSeconds:q})},[p,b,y,q]);(0,s.useEffect)(function(){F()},[F]);var K=(0,s.useCallback)(function(){f(me.IDLE),P.current&&P.current.play().catch(function(){}),null==o||o()},[o]);(0,s.useEffect)(function(){return b===me.RUNNING&&y>0&&(j.current=setInterval(function(){w(function(e){return e<=1?(j.current&&(clearInterval(j.current),j.current=null),K(),0):e-1})},1e3)),function(){j.current&&(clearInterval(j.current),j.current=null)}},[b,K,y]);var W=(0,s.useCallback)(function(){f(me.RUNNING)},[]),Y=(0,s.useCallback)(function(){f(me.PAUSED)},[]),$=(0,s.useCallback)(function(){f(me.RUNNING)},[]),Z=(0,s.useCallback)(function(){var e=b===me.RUNNING;f(e?me.RUNNING:me.IDLE),w(E)},[E,b]);(0,s.useImperativeHandle)(t,function(){return{start:W,pause:Y,resume:$,reset:Z}},[W,Y,$,Z]);var ee,te,ne,re=b===me.IDLE?{icon:s.createElement(J.A,null),text:(0,T.Ru)("common_start"),onClick:W,className:"start-button"}:b===me.RUNNING?{icon:s.createElement(X.A,null),text:(0,T.Ru)("common_pause"),onClick:Y,className:"pause-button"}:{icon:s.createElement(J.A,null),text:(0,T.Ru)("common_resume"),onClick:$,className:"resume-button"};return s.createElement("div",{className:"countdown-container"},i&&s.createElement(pe,{level:4,className:"countdown-title"},i),s.createElement("div",{className:"timer-display"},s.createElement(L.A,{content:s.createElement("div",{style:{display:"flex",alignItems:"center",gap:"8px"}},s.createElement(H.A,{min:1,value:D,onChange:function(e){return I(null!=e?e:1)}}),s.createElement(ue,null,(0,T.Ru)("common_minutes")),s.createElement(m.Ay,{className:"is-deep",icon:s.createElement(Q.A,null),onClick:function(){var e=60*(null!=D?D:1);A(e),w(e),U(e),C(!1)}},(0,T.Ru)("common_go"))),open:S,onOpenChange:C},s.createElement(pe,{level:1,className:"timer-text",onClick:function(){b===me.IDLE&&(I(Math.floor(E/60)),C(!0))},style:{cursor:b===me.IDLE?"pointer":"default"}},(ee=y,te=Math.floor(ee/60),ne=ee%60,"".concat(te.toString().padStart(2,"0"),":").concat(ne.toString().padStart(2,"0")))))),s.createElement("div",{className:"progress-container"},s.createElement(de.A,{percent:G,showInfo:!1,strokeColor:{"0%":"#108ee9","100%":"#87d068"},trailColor:"rgba(255, 255, 255, 0.2)"})),c&&s.createElement(ue,{className:"countdown-description"},c),s.createElement("div",{className:"controls"},s.createElement(m.Ay,{type:"primary",size:"large",icon:re.icon,onClick:re.onClick,className:"is-deep control-button ".concat(re.className)},re.text),b!==me.IDLE&&s.createElement(m.Ay,{size:"large",icon:s.createElement(V.A,null),onClick:Z,className:"is-deep control-button reset-button"},(0,T.Ru)("common_reset"))))}),be=n(72710),fe=n(38076),ve=n(67230),he=n(3366),ye=n(71468),we=n(7080),xe=n(61475),ke=n(69975);const Ee=function(e){var t=e.selectedDateIso,n=(0,s.useMemo)(function(){return new Date(t)},[t]),r=(0,ye.wA)(),o=(0,s.useRef)();return(0,s.useEffect)(function(){return function(){clearTimeout(o.current)}},[]),s.createElement("div",{className:"tasks-widget-wrapper pad-16px is-full-height flex-col gap-y-12"},s.createElement(he.c,{selectedDate:n,onItemCheckChange:function(e,t){clearTimeout(o.current),t?(r((0,we.Fq)({url:(0,T.ID)(xe),size:100})),o.current=window.setTimeout(function(){r((0,we.Fq)({url:(0,T.ID)(ke),size:64}))},2e3)):r((0,we.Fq)({url:(0,T.ID)(ke),size:64}))}}))};n(65529);var Ae=n(4086),Ne=(0,T.Ru)("Chat"),_e=(0,T.Ru)("calendar");const Se=function(){var e=(0,s.useState)(Ne),t=(0,a.A)(e,2),n=t[0],r=t[1],o=[{label:Ne,value:Ne,icon:s.createElement(N.A,null)},{label:_e,value:_e,icon:s.createElement(f.A,null)}],i={hidden:{opacity:0},visible:{opacity:1}};return s.createElement("div",{className:"my-space-sider"},s.createElement("div",{className:"my-space-sider-header"},s.createElement(G.A,{options:o,value:n,onChange:function(e){return r(e.toString())}})),s.createElement("div",{className:"my-space-sider-content"},s.createElement("div",{className:"tab-content"},s.createElement(d.N,{mode:"wait",initial:!1},n===Ne&&s.createElement(p.P.div,{key:"chat",variants:i,initial:"hidden",animate:"visible",exit:"hidden",transition:{duration:.15,ease:"easeInOut"},className:"tab-pane",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",flexDirection:"column"}},s.createElement(fe.A,{includeHeader:!1,includeAvatar:!1,variant:"compact"})),n===_e&&s.createElement(p.P.div,{key:"calendar",variants:i,initial:"hidden",animate:"visible",exit:"hidden",transition:{duration:.15,ease:"easeInOut"},className:"tab-pane",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}},s.createElement(Ae.A,{onAddEvent:function(){}}))))))};var Ce=n(83186),Re=n(67466),ze=n(97665),De=n(33930),Ie=n(86220),je=n(62542),Pe=n(82960),Le=n(47767),Me=n(84976),Oe=n(97848),Te=n(49384),Be=n(34878),qe=n(84129),Ue=n(6463),Ge=n(12268),He=n(92089),Fe=n(91349),Ke=n(86319),We=n(71099),Ye=n(78042),Je=n(54929),Xe=n(74668);function Qe(e){var t=e.tabOptions,n=e.onTabChange,r=e.activeTab;return s.createElement("div",{className:"music-widget-content"},s.createElement("div",{className:"music-widget-header"},s.createElement(G.A,{options:t,value:r,onChange:n})),s.createElement("div",{className:"music-widget-body"},s.createElement(d.N,{mode:"wait"},r===(0,T.Ru)("music")?s.createElement(p.P.div,{key:"music",className:"is-full-height",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}},s.createElement(Je.A,{tracks:Ce.s0,showFloatingPlayer:!1})):s.createElement(p.P.div,{key:"sounds",className:"is-full-height",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}},s.createElement(Xe.A,null)))))}var Ve=n(97072),$e=n(42652),Ze=n(52120),et=n(74449),tt=function(e){var t,n=e.activeConversation,o=(0,s.useState)(""),i=(0,a.A)(o,2),c=i[0],l=i[1],d=(0,s.useState)([]),p=(0,a.A)(d,2),u=p[0],g=p[1];return(0,s.useEffect)(function(){var e=function(){var e=new Date,t=(0,He.GP)(e,"HH:mm");l(t)};e();var t=setInterval(e,6e4);return function(){return clearInterval(t)}},[]),(0,s.useEffect)(function(){var e;if(null!=n&&null!==(e=n.meta)&&void 0!==e&&e.meta){var t=n.meta.meta;t.energyLevels&&g(t.energyLevels)}},[n]),null!=n&&n._id?s.createElement("div",{className:"energy-checkin-content"},s.createElement(et.q,{conversationId:n._id,questionText:(0,T.Ru)("energy_checkin_right_now"),canMultipleSubmit:!0,submitButton:s.createElement("div",{className:"flex-row align-center gap-x-8"},(0,T.Ru)("common_save_at")," ",c),extraFooterContent:s.createElement(L.A,{content:0===(null!==(t=null==u?void 0:u.length)&&void 0!==t?t:0)?s.createElement("div",null,(0,T.Ru)("no_history_yet")):s.createElement($e.A,{size:"small",dataSource:(0,r.A)(null!=u?u:[]).sort(function(e,t){return new Date(t.time).getTime()-new Date(e.time).getTime()}),renderItem:function(e){return s.createElement($e.A.Item,null,(0,He.GP)(new Date(e.time),"HH:mm")," - ",nt(e.energyLevel)," ",e.energyLevel,"%")}}),trigger:"click"},s.createElement(m.Ay,{className:"is-deep"},(0,T.Ru)("common_history")," ",s.createElement(Ze.A,{count:(null==u?void 0:u.length)||0})))})):s.createElement(Ve.A,{active:!0})},nt=function(e){var t;return(null===(t=et.$.find(function(t){return e<=t.value}))||void 0===t?void 0:t.label)||"\u{1f610}"},rt=n(34338),ot=s.memo(function(e){var t=e.goals,n=e.goalsLoading,r=e.handleArchiveGoal,o=e.navigate;return s.createElement("div",{className:"goals-widget-content"},s.createElement("div",{className:"goals-list pad-16px"},n?s.createElement(Ve.A,{active:!0}):null==t?void 0:t.map(function(e,t){return s.createElement(p.P.div,{key:e._id,className:"goal-item",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.05*t}},s.createElement(rt.A,{goal:e,onArchive:r,onClick:function(e){return o("/goals/".concat(e))}}))})))});const it=ot;var at=n(83979),ct=n(75704),lt=n(27674),st=n(13598),dt=n(19420),pt=n(71925),ut=n(93598),mt=n(31882),gt=n(57097),bt=n(70410),ft=n(13324);const vt=n.p+"static/574f50cf09887c9f26b7.svg",ht=n.p+"static/b81d7612e43189072bdb.svg",yt=n.p+"static/4c062ca3749bf721d035.svg",wt=n.p+"static/3d5f5712b7a4348e6bad.svg";n(92739);var xt="lvx.location.options.",kt="lvx.location.hidden.";function Et(e){return"home"===e?{id:"home",label:(0,B.Sn)((0,T.Ru)("common_home")),kind:"svg",icon:s.createElement("img",{src:vt,alt:(0,T.Ru)("common_home")}),isBuiltIn:!0}:"work"===e?{id:"work",label:(0,B.Sn)((0,T.Ru)("common_workplace")),kind:"svg",icon:s.createElement("img",{src:ht,alt:(0,T.Ru)("common_workplace")}),isBuiltIn:!0}:"school"===e?{id:"school",label:(0,B.Sn)((0,T.Ru)("common_school")),kind:"svg",icon:s.createElement("img",{src:yt,alt:(0,T.Ru)("common_school")}),isBuiltIn:!0}:{id:"other",label:(0,B.Sn)((0,T.Ru)("common_other")),kind:"svg",icon:s.createElement("img",{src:wt,alt:(0,T.Ru)("common_other")}),isBuiltIn:!0}}const At=function(e){var t,n,i=e.user,c=e.conversationId,d=e.canMultipleSubmit,p=void 0===d||d,u=(0,ye.wA)(),g=(0,ze.jE)(),b=(0,ye.d4)(function(e){return e.home.conversation}),f=c||(null==b?void 0:b._id),v=(null==b||null===(t=b.meta)||void 0===t?void 0:t.meta)||void 0,h=(0,s.useState)(!1),y=(0,a.A)(h,2),w=y[0],x=y[1],k=(0,s.useState)(!1),E=(0,a.A)(k,2),A=E[0],N=E[1],_=(0,s.useState)([]),S=(0,a.A)(_,2),C=S[0],z=S[1],D=(0,s.useState)(""),I=(0,a.A)(D,2),j=I[0],P=I[1],L=(0,s.useMemo)(function(){return function(e){var t;return"student"===(null===(t=e.preferences)||void 0===t?void 0:t.userCategory)?["home","school","other"]:["home","work","other"]}(i).map(Et)},[i]),M=(0,s.useState)(function(){return function(e){try{var t=localStorage.getItem(xt+e);if(!t)return[];var n=JSON.parse(t);return Array.isArray(n)?n:[]}catch(e){return[]}}(i._id)}),O=(0,a.A)(M,2),q=O[0],U=O[1],G=(0,s.useState)(function(){return function(e){try{var t=localStorage.getItem(kt+e);if(!t)return[];var n=JSON.parse(t),r=["home","work","school","other"];return Array.isArray(n)?n.filter(function(e){return r.includes(e)}):[]}catch(e){return[]}}(i._id)}),H=(0,a.A)(G,2),W=H[0],Y=H[1],J=(0,s.useMemo)(function(){return[{key:"location_common_coffee_shop",emoji:"\u2615\ufe0f"},{key:"location_common_public_transport",emoji:"\u{1f68c}"},{key:"location_common_gym",emoji:"\u{1f3cb}\ufe0f"},{key:"location_common_grocery",emoji:"\u{1f6d2}"},{key:"location_common_park",emoji:"\u{1f333}"},{key:"location_common_restaurant",emoji:"\u{1f37d}\ufe0f"},{key:"location_common_library",emoji:"\u{1f4da}"},{key:"location_common_hospital",emoji:"\u{1f3e5}"},{key:"location_common_airport",emoji:"\u2708\ufe0f"}].map(function(e){var t=e.key,n=e.emoji,r=(0,B.Sn)((0,T.Ru)(t));return{value:r,label:"".concat(n," ").concat(r),emoji:n}})},[]);(0,s.useEffect)(function(){!function(e,t){try{localStorage.setItem(xt+e,JSON.stringify(t))}catch(e){}}(i._id,q)},[q,i._id]),(0,s.useEffect)(function(){!function(e,t){try{localStorage.setItem(kt+e,JSON.stringify(t))}catch(e){}}(i._id,W)},[W,i._id]);var X,Q,V=(0,s.useMemo)(function(){return L.filter(function(e){return!W.includes(e.id)})},[L,W]),te=(0,s.useMemo)(function(){return[].concat((0,r.A)(V),(0,r.A)(q))},[V,q]),ne=(0,s.useState)(null),re=(0,a.A)(ne,2),oe=re[0],ie=re[1],ae=(0,gt.n)({mutationFn:(X=(0,o.A)(l().mark(function e(t){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(f){e.next=1;break}throw new Error("missing_conversation");case 1:return e.next=2,(0,Pe.G$)(f,t,new Date);case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}},e)})),function(e){return X.apply(this,arguments)}),onSuccess:function(e){var t,n=(new Date).toISOString(),o=(null==b||null===(t=b.meta)||void 0===t||null===(t=t.meta)||void 0===t?void 0:t.locations)||[];u((0,Be.Bq)({locations:[].concat((0,r.A)(o),[{time:n,location:e}])})),g.invalidateQueries({queryKey:["conversation-by-type"]}),ie(e)},onError:function(e){},retry:2,retryDelay:800}),ce=(0,gt.n)({mutationFn:(Q=(0,o.A)(l().mark(function e(t){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(f){e.next=1;break}throw new Error("missing_conversation");case 1:return e.next=2,(0,Pe.P3)(f,t);case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}},e)})),function(e){return Q.apply(this,arguments)}),onSuccess:function(e){var t,n=((null==b||null===(t=b.meta)||void 0===t||null===(t=t.meta)||void 0===t?void 0:t.locations)||[]).filter(function(t,n){return n!==e});u((0,Be.Bq)({locations:n})),g.invalidateQueries({queryKey:["conversation-by-type"]})},onError:function(e){},retry:1,retryDelay:600});return s.createElement("div",{className:"location-check"},s.createElement("div",{className:"card ".concat(w?"flipped":"")},s.createElement("div",{className:"card-inner"},s.createElement("div",{className:"card-front"},s.createElement("div",{className:"header"},s.createElement("span",{className:"title"},(0,T.Ru)("location_checkin_header")),s.createElement(F.A,{title:(0,T.Ru)("common_settings")},s.createElement(m.Ay,{className:"settings-button",type:"text",icon:s.createElement($.A,null),onClick:function(){return x(!0)}}))),s.createElement("div",{className:"grid"},te.map(function(e){return s.createElement("div",{key:e.id,className:"grid-item ".concat(!p&&oe?"disabled":""),onClick:function(){return t=e,void(!p&&oe||ae.isPending||ae.mutate(t.label));var t}},s.createElement("div",{className:"grid-button ".concat(oe===e.label?"active":"")},s.createElement("div",{className:"icon"},"svg"===e.kind?e.icon:s.createElement("span",{className:"emoji"},e.emoji)),s.createElement("span",{className:"name"},e.label)))})),null!=v&&null!==(n=v.locations)&&void 0!==n&&n.length?s.createElement("div",{className:"history"},s.createElement(K.A,{size:"small"}),s.createElement("div",{className:"history-items"},v.locations.slice(-6).reverse().map(function(e,t){return s.createElement("div",{key:"".concat(e.time,"-").concat(t),className:"history-chip"},s.createElement("span",{className:"loc"},e.location),s.createElement("span",{className:"time"},(0,He.GP)(new Date(e.time),"HH:mm")),s.createElement(m.Ay,{type:"text",size:"small",shape:"circle",className:"remove-icon",icon:s.createElement(R.A,{style:{fontSize:12}}),danger:!0,onClick:function(e){var n;e.stopPropagation(),function(e){ce.isPending||ce.mutate(e)}(((null===(n=v.locations)||void 0===n?void 0:n.length)||0)-1-t)}}))}))):null),s.createElement("div",{className:"card-back flex-col gap-x-12"},s.createElement("div",{className:"header"},s.createElement(m.Ay,{type:"primary",variant:"filled",icon:s.createElement(Z.A,null),onClick:function(){return x(!1)},className:"is-deep"},(0,T.Ru)("common_back")),s.createElement(m.Ay,{type:"default",className:"is-deep",icon:s.createElement(ee.A,null),onClick:function(){Y([])}},(0,T.Ru)("common_reset"))),s.createElement("div",{className:"options-list"},s.createElement($e.A,{header:null,dataSource:te,renderItem:function(e){return s.createElement($e.A.Item,{actions:[s.createElement(m.Ay,{key:"remove",type:"text",danger:!0,size:"small",icon:s.createElement(ut.A,null),onClick:function(){return function(e){if(e.isBuiltIn){var t=e.id;Y(function(e){return e.includes(t)?e:[].concat((0,r.A)(e),[t])})}else U(function(t){return t.filter(function(t){return t.id!==e.id})})}(e)}})]},s.createElement($e.A.Item.Meta,{avatar:s.createElement("div",{className:"list-icon"},"svg"===e.kind?e.icon:s.createElement("span",null,e.emoji)),title:s.createElement("span",null,e.label)}))}})),s.createElement(K.A,{size:"small"}),s.createElement("div",{className:"add-custom"},s.createElement("div",{className:"row"},s.createElement("div",{className:"col names"},s.createElement(pt.A,{mode:"tags",value:C,onChange:function(e){return z(e)},options:J,onSelect:function(e,t){t&&t.emoji&&!j&&P(t.emoji)},style:{width:"100%"}})),s.createElement("div",{className:"col emoji"},s.createElement("div",{className:"emoji-picker"},s.createElement(m.Ay,{type:"text",icon:s.createElement(mt.A,{style:{fontSize:18}}),onClick:function(){return N(function(e){return!e})}},j||""),A?s.createElement("div",{className:"picker-pop"},s.createElement(ft.A,{data:bt,onEmojiSelect:function(e){return P(e.native)}})):null)),s.createElement("div",{className:"col add"},s.createElement(m.Ay,{type:"primary",className:"is-deep",onClick:function(){if(C.length&&j){var e=C.map(function(e){return{id:"custom-".concat(e.toLowerCase().replace(/\s+/g,"-"),"-").concat(Date.now()),label:e,kind:"emoji",emoji:j}});U(function(t){return[].concat((0,r.A)(t),(0,r.A)(e))}),z([]),P(""),N(!1)}},disabled:!j||!C.length},(0,T.Ru)("common_add")))))))))};var Nt=n(5078),_t=function(e){var t=Math.max(0,Math.floor(e)),n=Math.floor(t/60),r=t%60;return"".concat(n.toString().padStart(2,"0"),":").concat(r.toString().padStart(2,"0"))};var St=n(81859);function Ct(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Rt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ct(Object(n),!0).forEach(function(t){(0,i.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ct(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var zt=function(){return s.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor"},s.createElement("path",{d:"M19 11h-8v6h8v-6zm2-8H3c-1.1 0-2 .9-2 2v14c0 1.1.9 1.98 2 1.98h18c1.1 0 2-.88 2-1.98V5c0-1.1-.9-2-2-2zm0 16.01H3V4.98h18v14.03z"}))},Dt=s.memo(se),It=s.memo(Qe),jt=s.memo(be.A),Pt=s.memo(it),Lt=s.memo(fe.A),Mt=s.memo(Ee),Ot=s.memo(tt),Tt=s.memo(ge),Bt=s.memo(At),qt=[{x:0,y:0},{x:436,y:0},{x:872,y:0}],Ut={timer:{id:"timer",visible:!0,zIndex:1,position:qt[0],size:{width:420,height:350}},music:{id:"music",visible:!0,zIndex:2,position:qt[1],size:{width:420,height:380}},quote:{id:"quote",visible:!0,zIndex:3,position:qt[2],size:{width:400,height:180}},target:{id:"target",visible:!1,zIndex:1,position:{x:0,y:0},size:{width:420,height:480}},message:{id:"message",visible:!1,zIndex:1,position:{x:0,y:0},size:{width:420,height:480}},tasks:{id:"tasks",visible:!1,zIndex:1,position:{x:0,y:0},size:{width:420,height:400}},energy:{id:"energy",visible:!1,zIndex:1,position:{x:0,y:0},size:{width:420,height:400}},countdown:{id:"countdown",visible:!1,zIndex:1,position:{x:0,y:0},size:{width:350,height:260}},location:{id:"location",visible:!1,zIndex:1,position:{x:0,y:0},size:{width:420,height:420}}};const Gt=function(){var e,t,n,c,D,L=(0,Le.Zp)(),M=(0,O.S)(),U=M.screenWidth,G=M.themeColor,H=M.user,F=(0,s.useState)(!1),K=(0,a.A)(F,2),W=K[0],Y=K[1],J=(0,s.useState)(!1),X=(0,a.A)(J,2),Q=X[0],V=X[1],$=(0,s.useState)(!1),Z=(0,a.A)($,2),ee=Z[0],te=Z[1],ne=(0,Re.A)("myspace-calendar-visible",!0),re=(0,a.A)(ne,2),oe=re[0],ce=re[1],le=(0,s.useState)((0,T.Ru)("music")),se=(0,a.A)(le,2),de=se[0],pe=se[1],ue=(0,s.useState)(300),ge=(0,a.A)(ue,2),be=ge[0],he=ge[1],xe=(0,s.useState)(300),Ee=(0,a.A)(xe,2),Ae=Ee[0],Ne=Ee[1],_e=(0,s.useState)(!1),Je=(0,a.A)(_e,2),Xe=Je[0],Qe=Je[1],Ve=(0,s.useRef)(null),$e=(0,s.useState)(),Ze=(0,a.A)($e,2),et=Ze[0],tt=Ze[1],nt=(0,s.useState)(),rt=(0,a.A)(nt,2),ot=rt[0],it=rt[1],pt=(0,s.useRef)(null),ut=(0,s.useRef)(null),mt=u.Ay.useNotification(),gt=(0,a.A)(mt,2),bt=gt[0],ft=gt[1],vt=(0,s.useState)(!1),ht=(0,a.A)(vt,2),yt=ht[0],wt=ht[1],xt=(0,s.useState)(!1),kt=(0,a.A)(xt,2),Et=kt[0],At=kt[1],Ct=(0,s.useState)(0),qt=(0,a.A)(Ct,2),Gt=qt[0],Ht=qt[1],Ft=(0,s.useRef)(null),Kt=(0,s.useRef)(null),Wt=(0,s.useState)(null),Yt=(0,a.A)(Wt,2),Jt=Yt[0],Xt=Yt[1],Qt=(0,s.useState)(null),Vt=(0,a.A)(Qt,2),$t=Vt[0],Zt=Vt[1],en=(0,s.useState)(null),tn=(0,a.A)(en,2),nn=tn[0],rn=tn[1],on=(0,s.useState)(null),an=(0,a.A)(on,2),cn=an[0],ln=an[1],sn=(0,s.useState)(function(){var e=new Date;return e.setSeconds(0,0),e.getTime()}),dn=(0,a.A)(sn,2),pn=dn[0],un=dn[1],mn=(0,ye.d4)(function(e){return e.mySpace}).shibaImg,gn=(0,ye.d4)(function(e){return e.weekPlanner}).calendarCurrentDate,bn=(0,Re.A)("myspace-widgets",Ut),fn=(0,a.A)(bn,2),vn=fn[0],hn=fn[1],yn=(0,ye.d4)(function(e){return e.home.messages}),wn=(0,Ye.A)();(0,s.useEffect)(function(){Object.keys(Ut).every(function(e){return void 0!==vn[e]})||hn(function(e){var t=Rt({},Ut);return Object.keys(e).forEach(function(n){var r=n;Ut[r]&&(t[r]=e[r])}),t})},[]);var xn=(0,s.useMemo)(function(){var e=Object.values(vn).filter(function(e){return e.visible}).map(function(e){return e.id});return!W&&oe&&e.push("calendar"),e},[vn,W,oe]),kn=(0,s.useRef)(3),En=(0,s.useRef)(!1),An=(0,ye.d4)(function(e){return e.home.selectedDate}),Nn=(0,s.useMemo)(function(){return new Date(An)},[An]),_n=(0,ye.d4)(function(e){return e.home.conversation}),Sn=(0,ze.jE)(),Cn=(0,ye.wA)(),Rn=(0,ye.d4)(we.tB),zn=(0,Me.ok)(),Dn=(0,a.A)(zn,1)[0].get("eventId"),In=!!Dn,jn=(0,s.useState)(null),Pn=(0,a.A)(jn,2),Ln=Pn[0],Mn=Pn[1],On=(0,De.I)({queryKey:["day-events",An,0],queryFn:function(){var e=(0,Ue.o)(Nn),t=(0,Ge.D)(Nn);return(0,je.J7)(e,t)},enabled:!!An}),Tn=On.data,Bn=void 0===Tn?[]:Tn,qn=On.isLoading;(0,s.useEffect)(function(){(0,at.$)().then(Mn)},[]),(0,s.useEffect)(function(){if(H){var e=new Date(gn),t=H.preferences||{timezone:void 0,weekStart:Ke.z},n=t.timezone,r=t.weekStart;ln((0,We.Hq)(e,n,!r||r===Ke.z))}},[gn,H]);var Un=(0,s.useCallback)(function(){cn&&(0,je.J7)(cn.weekStartDate,cn.weekEndDate).then(function(e){return Cn((0,qe.H8)(e))})},[Cn,cn]),Gn=(0,De.I)({queryKey:["event",Dn,An],queryFn:function(){if(!Dn)return null;var e=Bn.find(function(e){return e._id===Dn});return e||(0,je.ce)(Dn)},enabled:!!Dn&&!qn}).data;(0,s.useEffect)(function(){Gn&&Cn((0,we.Lz)((0,we.l9)(Gn)))},[Gn,Cn]);var Hn,Fn=(0,De.I)({queryKey:["user-goals",null==H?void 0:H._id],queryFn:function(){return(0,Ie.DX)()},enabled:!(null==H||!H._id)}),Kn=Fn.data,Wn=Fn.isLoading,Yn=(0,s.useMemo)(function(){return{type:Ke._m,meta:{date:(0,He.GP)(Nn,"yyyy-MM-dd")}}},[Nn]),Jn=(0,De.I)({queryKey:["conversation-by-type",Ke._m,JSON.stringify(Yn)],queryFn:(Hn=(0,o.A)(l().mark(function e(){var t,n,r,o,i,a;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!_n){e.next=1;break}if(n=null===(t=_n.meta)||void 0===t?void 0:t.meta,r=null==n?void 0:n.date,o=Yn.meta.date,r!==o){e.next=1;break}return e.abrupt("return",_n);case 1:return e.next=2,(0,Pe.Vm)(Ke._m,JSON.stringify(Yn));case 2:if(!(i=e.sent)){e.next=3;break}return e.abrupt("return",i);case 3:e.next=5;break;case 4:e.prev=4,e.catch(0);case 5:return a=(0,ct.Bc)(Ke._m,[H._id],Yn),e.next=6,(0,Pe.cK)(a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,null,[[0,4]])})),function(){return Hn.apply(this,arguments)}),enabled:!!H,refetchOnWindowFocus:!1,refetchOnReconnect:!1,retry:3}),Xn=Jn.data;(0,s.useEffect)(function(){Xn&&Cn((0,Be.Qx)(Xn))},[Xn,Cn]);var Qn=(0,s.useMemo)(function(){return _n||Xn},[_n,Xn]);(0,s.useEffect)(function(){var e;if(null!=Qn&&null!==(e=Qn.meta)&&void 0!==e&&e.meta){var t=Qn.meta.meta.theme;if(t){var n=t.split("\n\n"),r=(0,a.A)(n,2),o=r[0],i=r[1];tt(o),it(i)}}},[Qn]);var Vn=(0,s.useRef)(yn.length);(0,s.useEffect)(function(){if(!Et&&yn.length>Vn.current){var e=yn.slice(Vn.current).filter(function(e){return"incoming"===e.side});e.length>0&&Ht(function(t){return t+e.length})}Vn.current=yn.length},[yn,Et]),(0,s.useEffect)(function(){Cn(Gt>0?(0,we.Fq)({url:(0,T.ID)(Nt),size:64}):(0,we.Fq)({url:(0,T.ID)(ke),size:64}))},[Gt,Cn]);var $n=(0,s.useCallback)(function(e){At(e),e&&Ht(0)},[]);(0,s.useEffect)(function(){var e=function(){var e=new Date;e.setSeconds(0,0),un(e.getTime())};e();var t=setInterval(e,1e4);return function(){return clearInterval(t)}},[]);var Zn=(0,s.useMemo)(function(){var e=new Date(pn);return Bn.find(function(t){if(!t.startDate||!t.endDate)return!1;var n=new Date(t.startDate),r=new Date(t.endDate);return e>=n&&e<=r})},[Bn,pn]),er=Rn||Zn,tr=(0,s.useMemo)(function(){if(null==er||!er.title)return{activeEventTitle:void 0,activeEventEmoji:void 0};if(er.allDayEvent&&!In)return{activeEventTitle:void 0,activeEventEmoji:void 0};var e=er.title.split(" ");return e.length>0&&(0,B.Ve)(e[0])?{activeEventTitle:e.slice(1).join(" ")||er.title,activeEventEmoji:e[0]}:{activeEventTitle:er.title,activeEventEmoji:void 0}},[er,In]),nr=tr.activeEventTitle,rr=tr.activeEventEmoji,or=(0,s.useMemo)(function(){if(null!=er&&er._id&&nr)return{id:er._id,title:nr,emoji:rr}},[null==er?void 0:er._id,nr,rr]),ir=(0,s.useCallback)(function(){var e=(0,o.A)(l().mark(function e(t){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=1,(0,Ie.Au)(t);case 1:Sn.invalidateQueries({queryKey:["user-goals",null==H?void 0:H._id]}),e.next=3;break;case 2:e.prev=2,e.catch(0);case 3:case"end":return e.stop()}},e,null,[[0,2]])}));return function(t){return e.apply(this,arguments)}}(),[null==H?void 0:H._id,Sn]);(0,s.useEffect)(function(){Y(U<=Ce.NU.sm)},[U]),(0,s.useEffect)(function(){(0,at.$)().then(Mn)},[]);var ar=(0,s.useCallback)(function(e,t){var n,o,i=null!==(n=null===(o=Ve.current)||void 0===o?void 0:o.offsetWidth)&&void 0!==n?n:window.innerWidth,a=t.width,c="number"==typeof t.height?t.height:300,l=e.map(function(e){var t,n,r=document.querySelector(".widget-".concat(e.id)),o=null!==(t=null==r?void 0:r.offsetWidth)&&void 0!==t?t:e.size.width,i=null!==(n=null==r?void 0:r.offsetHeight)&&void 0!==n?n:"number"==typeof e.size.height?e.size.height:300;return{x:e.position.x,y:e.position.y,width:o,height:i}}),s=[{x:0,y:0}];l.forEach(function(e){s.push({x:e.x+e.width+16,y:e.y}),s.push({x:e.x,y:e.y+e.height+16})});for(var d=[],p=function(){var e=m[u];if(e.x+a>i)return 1;var t={x:e.x,y:e.y,width:a,height:c};l.some(function(e){return n=t,r=Rt(Rt({},e),{},{width:e.width,height:e.height}),n.x<r.x+r.width&&n.x+n.width>r.x&&n.y<r.y+r.height&&n.y+n.height>r.y;var n,r})||d.push(e)},u=0,m=s;u<m.length;u++)p();return 0===d.length?{x:0,y:Math.max.apply(Math,[0].concat((0,r.A)(l.map(function(e){return e.y+e.height}))))+16}:(d.sort(function(e,t){return e.y!==t.y?e.y-t.y:e.x-t.x}),d[0])},[]),cr=(0,s.useCallback)(function(e){hn(function(t){var n=t[e];if(!n)return t;var r=Rt({},t);if(n.visible)r[e]=Rt(Rt({},n),{},{visible:!1});else{var o=kn.current+1;kn.current=o;var i=Object.values(t).filter(function(t){return t.visible&&t.id!==e}),a=ar(i,n.size);r[e]=Rt(Rt({},n),{},{visible:!0,zIndex:o,position:a})}return r})},[ar,hn]);(0,s.useEffect)(function(){if(null!=er&&er.endDate&&null!=er&&er.startDate){if(er.allDayEvent&&!In)return;var e=new Date,t=e>=new Date(er.startDate)&&e<=new Date(er.endDate);if(t){var n,r,o=t?e:er.startDate;he((0,Fe.O)(er.endDate,o)),Ne((0,Fe.O)(er.endDate,er.startDate)),Qe(!0),null!==(n=vn.countdown)&&void 0!==n&&n.visible||null!==(r=vn.timer)&&void 0!==r&&r.visible||cr("countdown")}else he((0,Fe.O)(er.endDate,er.startDate)),Ne((0,Fe.O)(er.endDate,er.startDate)),Qe(!1)}},[er,null===(e=vn.countdown)||void 0===e?void 0:e.visible,null===(t=vn.timer)||void 0===t?void 0:t.visible,cr,In]),(0,s.useEffect)(function(){Rn&&hn(function(e){var t=e.timer;if(t.visible){var n=kn.current+1;return kn.current=n,Rt(Rt({},e),{},{timer:Rt(Rt({},t),{},{zIndex:n})})}var r=kn.current+1;kn.current=r;var o=Object.values(e).filter(function(e){return e.visible}),i=ar(o,t.size);return Rt(Rt({},e),{},{timer:Rt(Rt({},t),{},{visible:!0,zIndex:r,position:i})})})},[Rn,ar]),(0,s.useEffect)(function(){return function(){Cn((0,we.Lz)(null))}},[Cn]),(0,s.useEffect)(function(){if(!En.current){var e=Object.values(vn).reduce(function(e,t){return Math.max(e,t.zIndex)},0);kn.current=e,En.current=!0}},[vn]);var lr=(0,s.useCallback)(function(){document.fullscreenElement?(document.exitFullscreen().catch(function(e){}),V(!1)):(document.documentElement.requestFullscreen().catch(function(e){}),V(!0))},[]),sr=(0,s.useCallback)(function(){ce(function(e){return!e})},[ce]);(0,s.useEffect)(function(){var e=function(){return V(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",e),function(){return document.removeEventListener("fullscreenchange",e)}},[]);var dr=function(){yt&&wt(!1)},pr=(0,s.useCallback)(function(e){pe(e)},[]),ur=(0,s.useCallback)(function(e){pt.current&&(wt(!0),hn(pt.current),pt.current=null,setTimeout(function(){wt(!1)},800)),ut.current&&(clearTimeout(ut.current),ut.current=null),bt.destroy(e)},[bt]),mr=(0,s.useCallback)(function(){var e,t,n,o,i=null!==(e=null===(t=Ve.current)||void 0===t?void 0:t.offsetWidth)&&void 0!==e?e:window.innerWidth,a=null!==(n=null===(o=Ve.current)||void 0===o?void 0:o.offsetHeight)&&void 0!==n?n:window.innerHeight,c=!1;if(hn(function(e){pt.current=e;var t=Object.values(e).filter(function(e){return e.visible});if(0===t.length)return pt.current=null,e;var n=function(e,t){return!(e.x+e.width+8<=t.x||t.x+t.width+8<=e.x||e.y+e.height+8<=t.y||t.y+t.height+8<=e.y)},o=function(e){var t=document.querySelector(".widget-".concat(e.id)),n=null==t?void 0:t.querySelector(".widget-content");if(n){var r,o=n.getBoundingClientRect(),i=null===(r=Ve.current)||void 0===r?void 0:r.getBoundingClientRect();if(i)return{x:o.left-i.left,y:o.top-i.top,width:o.width,height:o.height}}return{x:e.position.x,y:e.position.y,width:e.size.width,height:"number"==typeof e.size.height?e.size.height:300}},l=[],s=[];if(t.forEach(function(e){if(function(e){var t=o(e);return t.x<0||t.y<0||t.x+t.width>i-8||t.y+t.height>a-100}(e))l.push(e);else{var t=o(e);s.some(function(e){return n(t,o(e))})?l.push(e):s.push(e)}}),0===l.length)return pt.current=null,c=!1,e;c=!0;var d=Rt({},e);return l.forEach(function(e){var t=function(e){var t=e.size.width,c="number"==typeof e.size.height?e.size.height:300,l=[{x:8,y:8}];s.forEach(function(e){var t=o(e);l.push({x:t.x+t.width+8,y:t.y}),l.push({x:t.x,y:t.y+t.height+8}),l.push({x:8,y:t.y+t.height+8})});var d=e.position;l.sort(function(e,t){return Math.sqrt(Math.pow(e.x-d.x,2)+Math.pow(e.y-d.y,2))-Math.sqrt(Math.pow(t.x-d.x,2)+Math.pow(t.y-d.y,2))});for(var p,u=function(){var e=g[m];if(e.x<0||e.y<0)return 0;if(e.x+t>i-8)return 0;if(e.y+c>a-100)return 0;var r={x:e.x,y:e.y,width:t,height:c};return s.some(function(e){return n(r,o(e))})?void 0:{v:e}},m=0,g=l;m<g.length;m++)if(0!==(p=u())&&p)return p.v;for(var b,f=8,v=8,h=0,y=0,w=function(){y++,f+t>i-8&&(f=8,v+=h+8,h=0);var e={x:f,y:v,width:t,height:c};if(!s.some(function(t){return n(e,o(t))}))return{v:{x:f,y:v}};f+=t+8,h=Math.max(h,c)};y<1e3;)if(b=w())return b.v;return{x:8,y:Math.max.apply(Math,[0].concat((0,r.A)(s.map(function(e){var t=o(e);return t.y+t.height}))))+8}}(e);d[e.id]=Rt(Rt({},e),{},{position:t}),s.push(d[e.id])}),d}),c){wt(!0),setTimeout(function(){wt(!1)},800);var l="arrange-undo-".concat(Date.now());bt.success({message:(0,T.Ru)("widgets_arranged_successfully"),key:l,duration:10,btn:s.createElement(m.Ay,{type:"primary",size:"small",onClick:function(){return ur(l)},className:"is-deep"},(0,T.Ru)("undo")),showProgress:!0}),ut.current=setTimeout(function(){pt.current=null,ut.current=null},1e4)}},[bt,ur]);(0,s.useEffect)(function(){return function(){ut.current&&clearTimeout(ut.current)}},[]);var gr=(0,lt.o)(),br=gr.isPlaying,fr=gr.setIsPlaying,vr=gr.currentTrack,hr=(0,s.useState)(function(){return dt.A.isSoundsMuted()}),yr=(0,a.A)(hr,2),wr=yr[0],xr=yr[1],kr=(0,s.useState)(function(){return dt.A.getActiveSounds()}),Er=(0,a.A)(kr,2),Ar=Er[0],Nr=Er[1];(0,s.useEffect)(function(){return dt.A.subscribe(function(){xr(dt.A.isSoundsMuted()),Nr(dt.A.getActiveSounds())})},[]);var _r=(0,s.useCallback)(function(){dt.A.toggleMute()},[]),Sr=(0,Re.A)("last-played-track",null),Cr=(0,a.A)(Sr,2),Rr=Cr[0],zr=Cr[1],Dr=(0,Re.A)("last-played-sounds",[]),Ir=(0,a.A)(Dr,2),jr=Ir[0],Pr=Ir[1],Lr=br&&(null==vr?void 0:vr.id)===(null==Rr?void 0:Rr.id),Mr=(0,s.useMemo)(function(){return Ar.length===jr.length&&Ar.every(function(e){return jr.some(function(t){return t.id===e.id})})},[Ar,jr]);(0,s.useEffect)(function(){vr&&br&&zr(vr)},[vr,br]),(0,s.useEffect)(function(){Ar.length>0&&Pr(Ar)},[Ar]);var Or=(0,s.useCallback)(function(){fr(!br)},[br,fr]),Tr=(0,s.useCallback)(function(){st.A.playNextTrack()},[]),Br=(0,s.useCallback)(function(){Lr?fr(!1):Rr?st.A.play(Rr):Ce.s0.length>0&&st.A.play(Ce.s0[0])},[Lr,Rr,fr]),qr=(0,s.useCallback)((0,o.A)(l().mark(function e(){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!Mr){e.next=2;break}return e.next=1,dt.A.stopAllSounds();case 1:return e.abrupt("return");case 2:if(!(jr.length>0)){e.next=4;break}return e.next=3,dt.A.restoreSoundsState(jr);case 3:e.next=5;break;case 4:return e.next=5,dt.A.restoreSoundsState([{id:"clock",volume:50},{id:"stream",volume:50}]);case 5:case"end":return e.stop()}},e)})),[Mr,jr]),Ur=(0,s.useMemo)(function(){if("undefined"!=typeof window){var e=getComputedStyle(document.documentElement).getPropertyValue("--color-primary-light");return e&&e.trim()?e.trim():"dark"===G?"#101010":"light"===G?"#f5f5f5":void 0}},[G]),Gr=(0,s.useCallback)(function(e){Cn((0,we.Lz)((0,we.l9)(e))),Sn.invalidateQueries({queryKey:["day-events"]}),Sn.refetchQueries({queryKey:["day-events",An,0]}),(null==wn?void 0:wn.key)===Ce.PH.key&&Un()},[Cn,Sn,wn,Un,An]),Hr=function(e){var t,n,r,i=e.backgroundImage,c=e.backgroundColor,d=void 0===c?"#101010":c,p=e.music,u=e.sounds,m=e.pomodoro,g=e.countdown,b=e.activityTitle,f=e.onEventCreated,v=(0,s.useRef)(null),h="undefined"!=typeof window&&!!window.documentPictureInPicture,y=(0,s.useState)(!1),w=(0,a.A)(y,2),x=w[0],k=w[1],E=(0,s.useRef)(null),A=(0,s.useRef)(!1),N=u.isMuted,_=p.isPlaying,S=!_&&N,C=(0,s.useState)(!1),R=(0,a.A)(C,2),z=R[0],D=R[1],I=(0,s.useState)(""),j=(0,a.A)(I,2),P=j[0],L=j[1],M=(0,s.useState)(!1),O=(0,a.A)(M,2),B=O[0],q=O[1],U=(0,s.useState)(null),G=(0,a.A)(U,2),H=G[0],F=G[1],K=(0,s.useState)(null),W=(0,a.A)(K,2),Y=W[0],J=W[1],X=(0,s.useState)(function(){return"undefined"!=typeof window&&"true"===localStorage.getItem("pip-compact-mode")}),Q=(0,a.A)(X,2),V=Q[0],$=Q[1],Z=(0,s.useState)(function(){return"undefined"!=typeof window&&"true"===localStorage.getItem("pip-compact-show-event")}),ee=(0,a.A)(Z,2),te=ee[0],ne=ee[1],re=(0,s.useCallback)(function(){_||!N?(_?(A.current=!0,p.setPlaying(!1)):A.current=!1,N||u.toggleMute()):(A.current&&!_&&p.setPlaying(!0),N&&u.toggleMute(),A.current=!1)},[_,N,p,u]),oe=(0,s.useCallback)(function(){p.playLastTrack()},[p]),ce=(0,s.useCallback)(function(){u.toggleLastSounds()},[u]),le=(0,s.useCallback)(function(){D(!0),J(null)},[]),se=(0,s.useCallback)(function(){D(!1),L(""),F(null),J(null)},[]),de=(0,s.useCallback)(function(){$(!0),localStorage.setItem("pip-compact-mode","true")},[]),pe=(0,s.useCallback)(function(){$(!1),localStorage.setItem("pip-compact-mode","false")},[]),ue=(0,s.useCallback)(function(){ne(function(e){var t=!e;return localStorage.setItem("pip-compact-show-event",String(t)),t})},[]),ge=(0,s.useCallback)(function(){var e=(0,o.A)(l().mark(function e(t){var n,r;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.trim()){e.next=1;break}return e.abrupt("return");case 1:return q(!0),J(null),e.prev=2,e.next=3,(0,je._J)(t.trim(),!0);case 3:(n=e.sent)&&n.length>0&&(r=n[0],F(r),f&&f(r),setTimeout(function(){D(!1),L(""),F(null)},2e3)),e.next=5;break;case 4:e.prev=4,e.catch(2),J((0,T.Ru)("command_k_event_creation_error"));case 5:return e.prev=5,q(!1),e.finish(5);case 6:case"end":return e.stop()}},e,null,[[2,4,5,6]])}));return function(t){return e.apply(this,arguments)}}(),[f]),be=!0,fe=p.isPlayingLastTrack,ve=u.isPlayingLastSounds,he=(0,s.useMemo)(function(){if(null==m||!m.state||!m.controls)return null;var e=function(){switch(m.state.sessionType){case ae.FOCUS:return(0,T.Ru)("pomodoro_focus");case ae.BREAK:return(0,T.Ru)("pomodoro_short_break");case ae.LONG_BREAK:return(0,T.Ru)("pomodoro_long_break");default:return(0,T.Ru)("pomodoro_focus")}}(),t=m.state.timerState===ie.RUNNING,n=null!=b?b:m.title,r=null==n?void 0:n.trim();return{type:"pomodoro",title:r&&r.length>0?r:(0,T.Ru)("i_am_doing"),subtitle:e,timeLabel:_t(m.state.timeRemaining),isPlaying:t,onToggle:function(){var e,t,n;if((null===(e=m.state)||void 0===e?void 0:e.timerState)===ie.RUNNING)null===(n=m.controls)||void 0===n||n.pause();else if((null===(t=m.state)||void 0===t?void 0:t.timerState)===ie.PAUSED){var r;null===(r=m.controls)||void 0===r||r.resume()}else{var o;null===(o=m.controls)||void 0===o||o.start()}},onNext:function(){var e;return null===(e=m.controls)||void 0===e?void 0:e.skip()},onEditClick:r?void 0:le}},[null==m?void 0:m.state,null==m?void 0:m.controls,null==m?void 0:m.title,b,le]),ye=(0,s.useMemo)(function(){if(null==g||!g.state||!g.controls)return null;if(g.state.timerState!==me.RUNNING&&g.state.timerState!==me.PAUSED)return null;var e=g.state.timerState===me.RUNNING,t=g.state.totalSeconds?Math.max(0,Math.min(1,g.state.timeRemaining/g.state.totalSeconds)):0,n=null!=b?b:g.title,r=null==n?void 0:n.trim();return{type:"countdown",title:r&&r.length>0?r:(0,T.Ru)("countdown_timer"),subtitle:r?(0,T.Ru)("countdown_timer"):void 0,timeLabel:_t(g.state.timeRemaining),isPlaying:e,onToggle:function(){var e,t,n;if((null===(e=g.state)||void 0===e?void 0:e.timerState)===me.RUNNING)null===(n=g.controls)||void 0===n||n.pause();else if((null===(t=g.state)||void 0===t?void 0:t.timerState)===me.PAUSED){var r;null===(r=g.controls)||void 0===r||r.resume()}else{var o;null===(o=g.controls)||void 0===o||o.start()}},onNext:function(){var e;return null===(e=g.controls)||void 0===e?void 0:e.reset()},progress:t}},[null==g?void 0:g.state,null==g?void 0:g.controls,null==g?void 0:g.title,b]),we=(0,s.useMemo)(function(){var e,t;return p.isPlaying?{type:"music",title:(null===(e=p.track)||void 0===e?void 0:e.title)||(0,T.Ru)("music"),subtitle:null!==(t=p.track)&&void 0!==t&&t.platform?p.track.platform.toUpperCase():void 0,isPlaying:!0,onToggle:p.togglePlay,onNext:p.playNext}:null},[p.isPlaying,p.track,p.togglePlay,p.playNext]),xe=(0,s.useMemo)(function(){var e,t,n,r,o=(null==m||null===(e=m.state)||void 0===e?void 0:e.timerState)===ie.RUNNING||(null==m||null===(t=m.state)||void 0===t?void 0:t.timerState)===ie.PAUSED,i=(null==g||null===(n=g.state)||void 0===n?void 0:n.timerState)===me.RUNNING||(null==g||null===(r=g.state)||void 0===r?void 0:r.timerState)===me.PAUSED;return o&&he?he:i&&ye?ye:he||we||null},[he,ye,we,null==m||null===(t=m.state)||void 0===t?void 0:t.timerState,null==g||null===(n=g.state)||void 0===n?void 0:n.timerState]),ke=(null===(r=p.track)||void 0===r?void 0:r.title)||null,Ee=(0,s.useCallback)(function(){if(v.current){try{v.current.closed||v.current.close()}catch(e){}v.current=null,k(!1)}},[]),Ae=(0,s.useCallback)(function(e){if(v.current){var t=v.current.document,n=t.querySelector(".pip-container"),r=function(e){e.innerHTML=S?'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="1em" height="1em"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><line x1="23" y1="9" x2="17" y2="15"></line><line x1="17" y1="9" x2="23" y2="15"></line></svg>':'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="1em" height="1em"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M15.54 8.46a5 5 0 0 1 0 7.07"></path><path d="M19.07 4.93a10 10 0 0 1 0 14.14"></path></svg>',e.title=(0,T.Ru)("pomodoro_settings_sound"),e.setAttribute("aria-label",(0,T.Ru)("pomodoro_settings_sound")),e.onclick=function(e){e.preventDefault(),e.stopPropagation(),re()}},a=function(e){fe?e.classList.add("is-playing"):e.classList.remove("is-playing"),e.innerHTML='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="1em" height="1em"><path d="M9 18V5l12-2v13"></path><circle cx="6" cy="18" r="3"></circle><circle cx="18" cy="16" r="3"></circle></svg>',e.title=(0,T.Ru)("play_last_track"),e.setAttribute("aria-label",(0,T.Ru)("play_last_track"));var t=null,n=!1,r=function(e){e.preventDefault(),e.stopPropagation(),n=!1,t=setTimeout(function(){n=!0,p.playNext()},3e3)},o=function(){t&&(clearTimeout(t),t=null)},i=function(e){e.preventDefault(),e.stopPropagation(),o(),n||oe(),n=!1};e.onmousedown=r,e.ontouchstart=r,e.onmouseup=i,e.ontouchend=i,e.onmouseleave=o,e.onclick=null},c=function(e){ve&&!N?e.classList.add("is-playing"):e.classList.remove("is-playing"),e.innerHTML='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="1em" height="1em"><path d="M3 18v-6a9 9 0 0 1 18 0v6"></path><path d="M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3zM3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3z"></path></svg>',e.title=(0,T.Ru)("toggle_sounds"),e.setAttribute("aria-label",(0,T.Ru)("toggle_sounds")),e.onclick=function(e){e.preventDefault(),e.stopPropagation(),ce()}},s=function(e,t){e.textContent=t.isPlaying?(0,T.Ru)("common_pause"):(0,T.Ru)("common_resume"),e.onclick=function(e){e.preventDefault(),e.stopPropagation(),t.onToggle()}},u=function(e,t){e.innerHTML=t.isPlaying?'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="1em" height="1em"><rect x="6" y="4" width="4" height="16"></rect><rect x="14" y="4" width="4" height="16"></rect></svg>':'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="1em" height="1em"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>',e.title=t.isPlaying?(0,T.Ru)("common_pause"):(0,T.Ru)("common_resume"),e.setAttribute("aria-label",t.isPlaying?(0,T.Ru)("common_pause"):(0,T.Ru)("common_resume")),e.onclick=function(e){e.preventDefault(),e.stopPropagation(),t.onToggle()}},g=function(e,t){e.onclick=function(e){e.preventDefault(),e.stopPropagation(),t.onNext()}};if(n&&e){var b=t.querySelector(".pip-card-inner");if(b&&(z?b.classList.add("flipped"):b.classList.remove("flipped")),n.classList.contains("compact")!==V)return t.body.innerHTML="",t.head.innerHTML="",Ae(e);if(V){n.classList.add("compact");var f=t.querySelector(".pip-compact-view-slider");f&&(f.style.transform=te?"translateY(-100%)":"translateY(0)");var h=t.querySelector(".pip-compact-timer-view .pip-timer-text");h&&"music"!==e.type&&(h.textContent=e.timeLabel);var y=t.querySelector(".pip-compact-event-title");y&&(y.textContent=e.title);var w=t.querySelector(".pip-compact-event-subtitle");w&&e.subtitle&&(w.textContent=e.subtitle);var x=t.querySelector(".pip-view-toggle-btn");x&&(x.innerHTML=te?'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="1em" height="1em"><polyline points="6 9 12 15 18 9"></polyline></svg>':'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="1em" height="1em"><polyline points="18 15 12 9 6 15"></polyline></svg>',x.title=te?(0,T.Ru)("countdown_timer"):e.title||(0,T.Ru)("pomodoro_focus"),x.setAttribute("aria-label",te?(0,T.Ru)("countdown_timer"):e.title||(0,T.Ru)("pomodoro_focus")))}else n.classList.remove("compact");var A=t.querySelector(".pip-content");if(A&&(V?A.classList.add("compact"):A.classList.remove("compact")),z){var _=t.querySelector(".pip-event-input"),C=t.querySelector(".pip-create-btn"),R=t.querySelector(".pip-event-success-or-error"),D=H||Y;if(_&&(D?_.classList.add("hidden"):(_.classList.remove("hidden"),_.value=P,_.oninput=function(e){L(e.target.value)},_.onkeydown=function(e){(e.metaKey||e.ctrlKey)&&"Enter"===e.key&&(e.preventDefault(),ge(P))})),C&&(D?C.classList.add("hidden"):(C.classList.remove("hidden"),C.disabled=B||!P.trim(),C.textContent=B?(0,T.Ru)("command_k_understanding_event"):(0,T.Ru)("command_k_add_event"),C.onclick=function(){return ge(P)})),R)if(D)if(R.classList.add("visible"),H){var I=H.startDate?(0,He.GP)(new Date(H.startDate),"h:mm a"):"",j=H.endDate?(0,He.GP)(new Date(H.endDate),"h:mm a"):"";R.innerHTML='\n                  <div class="pip-success-icon">\u2713</div>\n                  <div class="pip-event-title">'.concat(H.title||"",'</div>\n                  <div class="pip-event-time">').concat(I," - ").concat(j,"</div>\n                  ").concat(H.description?'<div class="pip-event-desc">'.concat(H.description,"</div>"):"","\n                ")}else Y&&(R.innerHTML='\n                  <div class="pip-error-icon">\u26a0</div>\n                  <div class="pip-error-message">'.concat(Y,"</div>\n                "));else R.classList.remove("visible")}var M=t.querySelector(".pip-timer-text"),O=t.querySelector(".pip-timer-reset-btn"),q=t.querySelector(".pip-toggle-btn"),U=t.querySelector(".pip-next-btn"),G=t.querySelector(".pip-mute-btn"),F=t.querySelector(".pip-music-btn"),K=t.querySelector(".pip-music-tooltip"),W=t.querySelector(".pip-sounds-btn"),J=t.querySelector(".pip-progress-bar"),X=t.querySelector(".pip-title"),Q=t.querySelector(".pip-subtitle"),$=t.querySelector(".pip-compact-play-pause-btn");return M&&"music"!==e.type&&(M.textContent=e.timeLabel),O&&"pomodoro"===e.type?O.style.display="flex":O&&(O.style.display="none"),q&&s(q,e),U&&g(U,e),G&&r(G),F&&a(F),K&&(K.textContent=ke||(0,T.Ru)("music")),W&&c(W),$&&u($,e),J&&"countdown"===e.type&&(J.style.width="".concat(Math.round(100*e.progress),"%")),X&&X.textContent!==e.title&&(X.textContent=e.title),Q&&e.subtitle&&Q.textContent!==e.subtitle&&(Q.textContent=e.subtitle),void(t.title=e.title)}t.body.innerHTML="",t.head.innerHTML="",t.documentElement.style.height="100%",t.body.style.margin="0",t.body.style.height="100%",t.body.style.fontFamily="Inter, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif",t.body.style.background="transparent",t.body.style.display="flex",t.body.style.alignItems="stretch",t.body.style.justifyContent="stretch";var Z=t.createElement("style");Z.textContent=":root, body { height: 100%; }\nbody { margin: 0; font-family: inherit; background: transparent; }\n.pip-container { position: relative; width: 100%; height: 100%; display: flex; flex-direction: column; justify-content: stretch; align-items: stretch; overflow: hidden; }\n.pip-container.compact { padding: 0; }\n.pip-container.compact .pip-overlay { display: none; }\n.pip-container.compact .pip-music-tooltip { display: none; }\n.pip-container.compact .pip-mute-btn,\n.pip-container.compact .pip-music-btn,\n.pip-container.compact .pip-sounds-btn,\n.pip-container.compact .pip-view-toggle-btn,\n.pip-container.compact .pip-expand-btn,\n.pip-container.compact .pip-reset-btn,\n.pip-container.compact .pip-compact-play-pause-btn { position: static; opacity: 1; padding: 4px 8px; font-size: 14px; margin: 0; transition: transform 0.2s ease; background: rgba(255, 255, 255, 0.15); border-radius: 999px; border: none; color: #fff; cursor: pointer; width: auto; height: auto; transform: none; top: auto; left: auto; right: auto; z-index: auto; }\n.pip-container.compact .pip-music-btn.is-playing { background: rgba(18, 184, 134, 0.75); }\n.pip-container.compact .pip-music-btn.is-playing:hover { background: rgba(18, 184, 134, 0.9); }\n.pip-container.compact .pip-sounds-btn.is-playing { background: rgba(18, 184, 134, 0.75); }\n.pip-container.compact .pip-sounds-btn.is-playing:hover { background: rgba(18, 184, 134, 0.9); }\n.pip-container.compact .pip-expand-btn svg,\n.pip-container.compact .pip-reset-btn svg,\n.pip-container.compact .pip-view-toggle-btn svg,\n.pip-container.compact .pip-compact-play-pause-btn svg { pointer-events: none; width: 1em; height: 1em; display: block; }\n.pip-container.compact .pip-mute-btn:hover,\n.pip-container.compact .pip-music-btn:hover,\n.pip-container.compact .pip-sounds-btn:hover,\n.pip-container.compact .pip-view-toggle-btn:hover,\n.pip-container.compact .pip-expand-btn:hover,\n.pip-container.compact .pip-reset-btn:hover,\n.pip-container.compact .pip-compact-play-pause-btn:hover { transform: scale(1.15); background: rgba(255, 255, 255, 0.25); }\n.pip-compact-controls { display: none; }\n.pip-container.compact .pip-compact-controls { display: flex; align-items: center; gap: 6px; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 10; opacity: 0; transition: opacity 0.2s ease; background: rgba(0, 0, 0, 0.5); padding: 4px; border-radius: 999px; }\n.pip-container.compact:hover .pip-compact-controls { opacity: 1; }\n.pip-card { perspective: 1000px; width: 100%; height: 100%; position: relative; z-index: 1; }\n.pip-card-inner { position: relative; width: 100%; height: 100%; transition: transform 0.6s; transform-style: preserve-3d; }\n.pip-card-inner.flipped { transform: rotateY(180deg); }\n.pip-card-front, .pip-card-back { position: absolute; width: 100%; height: 100%; backface-visibility: hidden; display: flex; flex-direction: column; box-sizing: border-box; }\n.pip-card-back { transform: rotateY(180deg); padding: 12px; gap: 10px; }\n.pip-overlay { position: absolute; inset: 0; pointer-events: none; }\n.pip-content { position: relative; display: flex; flex-direction: column; justify-content: space-between; padding: 16px; color: #fff; height: 100%; }\n.pip-content.compact { padding: 0; justify-content: center; align-items: center; }\n.pip-compact-view-container { position: relative; width: 100%; height: 100%; overflow: hidden; display: flex; align-items: center; justify-content: center; }\n.pip-compact-view-slider { display: flex; flex-direction: column; transition: transform 0.3s ease; height: 100%; }\n.pip-compact-timer-view, .pip-compact-event-view { min-height: 100%; display: flex; align-items: center; justify-content: center; flex-direction: column; padding: 0 12px; box-sizing: border-box; }\n.pip-compact-event-view { gap: 2px; }\n.pip-compact-event-title { font-size: 14px; font-weight: 600; text-align: center; text-shadow: 0 2px 8px rgba(0, 0, 0, 0.8), 0 1px 3px rgba(0, 0, 0, 0.9); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 100%; }\n.pip-compact-event-subtitle { font-size: 11px; opacity: 0.85; text-align: center; text-shadow: 0 2px 6px rgba(0, 0, 0, 0.7), 0 1px 2px rgba(0, 0, 0, 0.8); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 100%; }\n.pip-title { text-shadow: 0 2px 8px rgba(0, 0, 0, 0.8), 0 1px 3px rgba(0, 0, 0, 0.9); }\n.pip-subtitle { text-shadow: 0 2px 6px rgba(0, 0, 0, 0.7), 0 1px 2px rgba(0, 0, 0, 0.8); }\n.pip-title-editable { cursor: pointer; display: flex; align-items: center; gap: 6px; transition: opacity 0.2s; }\n.pip-title-editable:hover { opacity: 0.85; }\n.pip-edit-icon { font-size: 14px; opacity: 0.7; }\n.pip-back-header { display: flex; align-items: center; gap: 8px; margin-bottom: 4px; }\n.pip-back-button { background: rgba(255, 255, 255, 0.18); border: none; color: #fff; padding: 6px 10px; border-radius: 999px; cursor: pointer; font-size: 13px; display: flex; align-items: center; gap: 4px; font-weight: 600; }\n.pip-back-button:hover { background: rgba(255, 255, 255, 0.25); }\n.pip-back-title { font-size: 14px; font-weight: 600; opacity: 0.9; color: #fff; }\n.pip-event-input { width: 100%; min-height: 80px; padding: 8px; border-radius: 8px; border: 1px solid rgba(255, 255, 255, 0.2); background: rgba(255, 255, 255, 0.1); color: #fff; font-size: 13px; font-family: inherit; resize: vertical; box-sizing: border-box; }\n.pip-event-input::placeholder { color: rgba(255, 255, 255, 0.5); }\n.pip-event-input:focus { outline: none; border-color: rgba(255, 255, 255, 0.4); background: rgba(255, 255, 255, 0.15); }\n.pip-event-input.hidden, .pip-create-btn.hidden { display: none; }\n.pip-create-btn { width: 100%; padding: 8px; background: rgba(18, 184, 134, 0.85); border: none; color: #fff; border-radius: 999px; cursor: pointer; font-size: 13px; font-weight: 600; }\n.pip-create-btn:hover:not(:disabled) { background: rgba(18, 184, 134, 1); }\n.pip-create-btn:disabled { opacity: 0.5; cursor: not-allowed; }\n.pip-event-success-or-error { flex: 1; display: none; flex-direction: column; align-items: center; justify-content: center; gap: 8px; text-align: center; color: #fff; }\n.pip-event-success-or-error.visible { display: flex; }\n.pip-success-icon { font-size: 32px; color: rgba(18, 184, 134, 1); }\n.pip-error-icon { font-size: 32px; color: rgba(255, 77, 79, 1); }\n.pip-event-title { font-size: 14px; font-weight: 600; }\n.pip-event-time { font-size: 12px; opacity: 0.8; }\n.pip-event-desc { font-size: 11px; opacity: 0.7; margin-top: 4px; }\n.pip-error-message { font-size: 12px; opacity: 0.9; }\n.pip-timer-wrapper { position: relative; display: flex; align-items: center; justify-content: center; margin-top: 12px; }\n.pip-content.compact .pip-timer-wrapper { margin-top: 0; }\n.pip-timer-display { position: relative; }\n.pip-timer-text { text-shadow: 0 2px 8px rgba(0, 0, 0, 0.8), 0 1px 3px rgba(0, 0, 0, 0.9); }\n.pip-timer-reset-btn { position: absolute; right: calc(100% + 8px); top: 50%; transform: translateY(-50%); display: flex; align-items: center; justify-content: center; border: none; background: rgba(255, 255, 255, 0.15); color: #fff; border-radius: 999px; width: 28px; height: 28px; padding: 0; cursor: pointer; opacity: 0; transition: opacity 0.2s ease, background 0.2s ease; font-size: 15px; }\n.pip-timer-reset-btn svg { pointer-events: none; width: 1em; height: 1em; display: block; }\n.pip-timer-wrapper:hover .pip-timer-reset-btn { opacity: 1; }\n.pip-timer-reset-btn:hover { background: rgba(255, 255, 255, 0.25); }\n.pip-timer-reset-btn:active { background: rgba(255, 255, 255, 0.35); }\n.pip-compact-toggle-btn { position: absolute; right: calc(100% + 44px); top: 50%; transform: translateY(-50%); display: flex; align-items: center; justify-content: center; border: none; background: rgba(255, 255, 255, 0.15); color: #fff; border-radius: 999px; width: 28px; height: 28px; padding: 0; cursor: pointer; opacity: 0; transition: opacity 0.2s ease, background 0.2s ease; font-size: 15px; }\n.pip-compact-toggle-btn svg { pointer-events: none; width: 1em; height: 1em; display: block; }\n.pip-timer-wrapper:hover .pip-compact-toggle-btn { opacity: 1; }\n.pip-compact-toggle-btn:hover { background: rgba(255, 255, 255, 0.25); }\n.pip-compact-toggle-btn:active { background: rgba(255, 255, 255, 0.35); }\n.pip-expand-btn { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); display: flex; align-items: center; justify-content: center; border: none; background: rgba(0, 0, 0, 0.6); color: #fff; border-radius: 999px; width: 32px; height: 32px; padding: 0; cursor: pointer; opacity: 0; transition: opacity 0.2s ease, background 0.2s ease; font-size: 16px; z-index: 10; }\n.pip-expand-btn svg { pointer-events: none; width: 1em; height: 1em; display: block; }\n.pip-timer-wrapper:hover .pip-expand-btn { opacity: 1; }\n.pip-expand-btn:hover { background: rgba(0, 0, 0, 0.8); }\n.pip-expand-btn:active { background: rgba(0, 0, 0, 0.9); }\n.pip-reset-btn { display: flex; align-items: center; justify-content: center; border: none; background: rgba(255, 255, 255, 0.15); color: #fff; border-radius: 999px; padding: 4px 8px; cursor: pointer; font-size: 14px; }\n.pip-reset-btn svg { pointer-events: none; width: 1em; height: 1em; display: block; }\n.pip-reset-btn:hover { background: rgba(255, 255, 255, 0.25); }\n.pip-reset-btn:active { background: rgba(255, 255, 255, 0.35); }\n.pip-content.compact .pip-timer-text { font-size: 24px; font-weight: 700; letter-spacing: 0.08em; }\n.pip-mute-btn { position: absolute; display: flex; top: 12px; right: 12px; border: none; background: rgba(0, 0, 0, 0.45); color: #fff; border-radius: 999px; padding: 6px 10px; cursor: pointer; opacity: 0; transition: opacity 0.2s ease; font-size: 16px; z-index: 10; }\n.pip-mute-btn svg, .pip-music-btn svg, .pip-sounds-btn svg { pointer-events: none; }\n.pip-container:hover .pip-mute-btn, .pip-mute-btn:focus-visible { opacity: 1; }\n.pip-mute-btn:focus-visible { outline: 2px solid rgba(255, 255, 255, 0.6); outline-offset: 2px; }\n.pip-music-btn { position: absolute; display: flex; top: 48px; right: 12px; border: none; color: #fff; border-radius: 999px; padding: 6px 10px; cursor: pointer; opacity: 0; transition: all 0.2s ease; font-size: 16px; z-index: 10; }\n.pip-container:hover .pip-music-btn, .pip-music-btn:focus-visible { opacity: 1; }\n.pip-music-btn.is-playing { background: rgba(18, 184, 134, 0.75); }\n.pip-music-btn.is-playing:hover { background: rgba(18, 184, 134, 0.9); }\n.pip-music-btn.is-playing:active { background: rgba(18, 184, 134, 1); }\n.pip-music-btn:not(.is-playing) { background: rgba(0, 0, 0, 0.45); }\n.pip-music-btn:not(.is-playing):hover { background: rgba(0, 0, 0, 0.6); }\n.pip-music-btn:not(.is-playing):active { background: rgba(0, 0, 0, 0.75); }\n.pip-music-btn:focus-visible { outline: 2px solid rgba(255, 255, 255, 0.6); outline-offset: 2px; }\n.pip-sounds-btn { position: absolute; display: flex; top: 84px; right: 12px; border: none; color: #fff; border-radius: 999px; padding: 6px 10px; cursor: pointer; opacity: 0; transition: all 0.2s ease; font-size: 16px; z-index: 10; }\n.pip-container:hover .pip-sounds-btn, .pip-sounds-btn:focus-visible { opacity: 1; }\n.pip-sounds-btn.is-playing { background: rgba(18, 184, 134, 0.75); }\n.pip-sounds-btn.is-playing:hover { background: rgba(18, 184, 134, 0.9); }\n.pip-sounds-btn.is-playing:active { background: rgba(18, 184, 134, 1); }\n.pip-sounds-btn:not(.is-playing) { background: rgba(0, 0, 0, 0.45); }\n.pip-sounds-btn:not(.is-playing):hover { background: rgba(0, 0, 0, 0.6); }\n.pip-sounds-btn:not(.is-playing):active { background: rgba(0, 0, 0, 0.75); }\n.pip-sounds-btn:focus-visible { outline: 2px solid rgba(255, 255, 255, 0.6); outline-offset: 2px; }\n.pip-music-tooltip { position: absolute; top: 48px; right: 56px; background: rgba(0, 0, 0, 0.9); color: #fff; padding: 6px 12px; border-radius: 8px; font-size: 13px; white-space: nowrap; max-width: 200px; overflow: hidden; text-overflow: ellipsis; opacity: 0; pointer-events: none; transition: opacity 0.2s ease; z-index: 9; }\n.pip-music-btn:hover + .pip-music-tooltip { opacity: 1; }\n",t.head.appendChild(Z);var ee=t.createElement("div");ee.className=V?"pip-container compact":"pip-container",ee.style.backgroundColor=d,ee.style.backgroundImage=i?"url(".concat(i,")"):"none",ee.style.backgroundSize="cover",ee.style.backgroundPosition="center",t.body.appendChild(ee);var ne=t.createElement("div");ne.className="pip-overlay",ne.style.background="rgba(0, 0, 0, 0.55)",ee.appendChild(ne);var ie=t.createElement("div");ie.className="pip-card",ee.appendChild(ie);var ae=t.createElement("div");ae.className="pip-card-inner",z&&ae.classList.add("flipped"),ie.appendChild(ae);var le=t.createElement("div");le.className="pip-card-front",ae.appendChild(le);var me=t.createElement("div");me.className=V?"pip-content compact":"pip-content",le.appendChild(me);var be=t.createElement("div");be.className="pip-card-back",ae.appendChild(be);var he=t.createElement("div");he.className="pip-back-header",be.appendChild(he);var ye=t.createElement("button");ye.className="pip-back-button",ye.innerHTML='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="1em" height="1em"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>',ye.onclick=se,he.appendChild(ye);var we=t.createElement("div");we.className="pip-back-title",we.textContent=(0,T.Ru)("create_event_in_pip"),he.appendChild(we);var xe=t.createElement("textarea");xe.className="pip-event-input",(H||Y)&&xe.classList.add("hidden"),xe.placeholder=(0,T.Ru)("command_k_event_instruction"),xe.value=P,xe.oninput=function(e){L(e.target.value)},xe.onkeydown=function(e){(e.metaKey||e.ctrlKey)&&"Enter"===e.key&&(e.preventDefault(),ge(P))},be.appendChild(xe);var Ee=t.createElement("button");Ee.className="pip-create-btn",(H||Y)&&Ee.classList.add("hidden"),Ee.textContent=B?(0,T.Ru)("command_k_understanding_event"):(0,T.Ru)("command_k_add_event"),Ee.disabled=B||!P.trim(),Ee.onclick=function(){return ge(P)},be.appendChild(Ee);var Ne=t.createElement("div");if(Ne.className="pip-event-success-or-error",(H||Y)&&Ne.classList.add("visible"),H){var _e=H.startDate?(0,He.GP)(new Date(H.startDate),"h:mm a"):"",Se=H.endDate?(0,He.GP)(new Date(H.endDate),"h:mm a"):"";Ne.innerHTML='\n          <div class="pip-success-icon">\u2713</div>\n          <div class="pip-event-title">'.concat(H.title||"",'</div>\n          <div class="pip-event-time">').concat(_e," - ").concat(Se,"</div>\n          ").concat(H.description?'<div class="pip-event-desc">'.concat(H.description,"</div>"):"","\n        ")}else Y&&(Ne.innerHTML='\n          <div class="pip-error-icon">\u26a0</div>\n          <div class="pip-error-message">'.concat(Y,"</div>\n        "));be.appendChild(Ne);var Ce=V?t.createElement("div"):null;Ce&&(Ce.className="pip-compact-controls",ee.appendChild(Ce));var Re=Ce||ee;if(!V){var ze=t.createElement("button");ze.className="pip-mute-btn",r(ze),Re.appendChild(ze);var De=t.createElement("button");De.className="pip-music-btn",a(De),Re.appendChild(De);var Ie=t.createElement("div");Ie.className="pip-music-tooltip",Ie.textContent=ke||(0,T.Ru)("music"),ee.appendChild(Ie);var je=t.createElement("button");je.className="pip-sounds-btn",c(je),Re.appendChild(je)}if(e)if(t.title=e.title,V&&"music"!==e.type){var Pe=t.createElement("div");Pe.className="pip-compact-view-container";var Le=t.createElement("div");Le.className="pip-compact-view-slider",Le.style.transform=te?"translateY(-100%)":"translateY(0)";var Me=t.createElement("div");Me.className="pip-compact-timer-view";var Oe=t.createElement("span");Oe.className="pip-timer-text",Oe.style.fontSize="24px",Oe.style.fontWeight="700",Oe.style.letterSpacing="0.08em",Oe.textContent=e.timeLabel,Me.appendChild(Oe);var Te=t.createElement("div");Te.className="pip-compact-event-view";var Be=t.createElement("div");if(Be.className="pip-compact-event-title",Be.textContent=e.title,Te.appendChild(Be),e.subtitle){var qe=t.createElement("div");qe.className="pip-compact-event-subtitle",qe.textContent=e.subtitle,Te.appendChild(qe)}Le.appendChild(Me),Le.appendChild(Te),Pe.appendChild(Le),me.appendChild(Pe);var Ue=t.querySelector(".pip-compact-controls");if(Ue){var Ge=t.createElement("button");if(Ge.className="pip-expand-btn",Ge.innerHTML='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="1em" height="1em"><polyline points="15 3 21 3 21 9"></polyline><polyline points="9 21 3 21 3 15"></polyline><line x1="21" y1="3" x2="14" y2="10"></line><line x1="3" y1="21" x2="10" y2="14"></line></svg>',Ge.title=(0,T.Ru)("common_expand"),Ge.setAttribute("aria-label",(0,T.Ru)("common_expand")),Ge.onclick=function(e){e.preventDefault(),e.stopPropagation(),pe(),v.current&&!v.current.closed&&(v.current.close(),v.current=null,k(!1),setTimeout((0,o.A)(l().mark(function e(){var t,n,r,o,i;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=1,null===(n=window.documentPictureInPicture)||void 0===n?void 0:n.requestWindow({width:320,height:200});case 1:if(o=t=e.sent,!(r=null!==o)){e.next=2;break}r=void 0!==t;case 2:if(!r){e.next=3;break}i=t,e.next=4;break;case 3:i=null;case 4:v.current=i,k(!0),E.current&&Ae(E.current),e.next=6;break;case 5:e.prev=5,e.catch(0);case 6:case"end":return e.stop()}},e,null,[[0,5]])})),100))},Ue.appendChild(Ge),"pomodoro"===e.type){var Fe=t.createElement("button");Fe.className="pip-reset-btn",Fe.innerHTML='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="1em" height="1em"><polyline points="1 4 1 10 7 10"></polyline><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path></svg>',Fe.title=(0,T.Ru)("common_reset"),Fe.setAttribute("aria-label",(0,T.Ru)("common_reset")),Fe.onclick=function(e){var t;e.preventDefault(),e.stopPropagation(),null==m||null===(t=m.controls)||void 0===t||t.reset()},Ue.appendChild(Fe)}var Ke=t.createElement("button");Ke.className="pip-compact-play-pause-btn",u(Ke,e),Ue.appendChild(Ke);var We=t.createElement("button");We.className="pip-music-btn",a(We),Ue.appendChild(We);var Ye=t.createElement("button");Ye.className="pip-sounds-btn",c(Ye),Ue.appendChild(Ye);var Je=t.createElement("button");Je.className="pip-view-toggle-btn",Je.innerHTML=te?'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="1em" height="1em"><polyline points="6 9 12 15 18 9"></polyline></svg>':'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="1em" height="1em"><polyline points="18 15 12 9 6 15"></polyline></svg>',Je.title=te?(0,T.Ru)("countdown_timer"):e.title||(0,T.Ru)("pomodoro_focus"),Je.setAttribute("aria-label",te?(0,T.Ru)("countdown_timer"):e.title||(0,T.Ru)("pomodoro_focus")),Je.onclick=function(e){e.preventDefault(),e.stopPropagation(),ue()},Ue.appendChild(Je)}}else{var Xe=t.createElement("div");Xe.style.display="flex",Xe.style.flexDirection="column",Xe.style.gap="4px",me.appendChild(Xe);var Qe=t.createElement("div");if("pomodoro"===e.type&&e.onEditClick){Qe.className="pip-title-editable",Qe.onclick=e.onEditClick;var Ve=t.createElement("span");Ve.className="pip-title",Ve.textContent=e.title,Ve.style.fontWeight="600",Ve.style.fontSize="18px",Qe.appendChild(Ve);var $e=t.createElement("span");$e.className="pip-edit-icon",$e.innerHTML='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="1em" height="1em"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg>',Qe.appendChild($e)}else{var Ze=t.createElement("div");Ze.className="pip-title",Ze.textContent=e.title,Ze.style.fontWeight="600",Ze.style.fontSize="18px",Qe.appendChild(Ze)}if(Xe.appendChild(Qe),e.subtitle){var et=t.createElement("div");et.className="pip-subtitle",et.style.fontSize="music"===e.type?"13px":"14px",et.style.opacity="music"===e.type?"0.75":"0.85",et.textContent=e.subtitle,Xe.appendChild(et)}if("music"!==e.type){var tt=t.createElement("div");tt.className="pip-timer-wrapper";var nt=t.createElement("div");if(nt.className="pip-timer-display",nt.style.fontSize="38px",nt.style.fontWeight="700",nt.style.letterSpacing="0.08em",nt.style.textAlign="center","pomodoro"===e.type){var rt=t.createElement("button");rt.className="pip-timer-reset-btn",rt.innerHTML='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="1em" height="1em"><polyline points="1 4 1 10 7 10"></polyline><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path></svg>',rt.title=(0,T.Ru)("common_reset"),rt.setAttribute("aria-label",(0,T.Ru)("common_reset")),rt.onclick=function(t){var n;t.preventDefault(),t.stopPropagation(),"pomodoro"===e.type&&(null==m||null===(n=m.controls)||void 0===n||n.reset())},nt.appendChild(rt);var ot=t.createElement("button");ot.className="pip-compact-toggle-btn",ot.innerHTML='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="1em" height="1em"><polyline points="4 14 10 14 10 20"></polyline><polyline points="20 10 14 10 14 4"></polyline><line x1="14" y1="10" x2="21" y2="3"></line><line x1="3" y1="21" x2="10" y2="14"></line></svg>',ot.title=(0,T.Ru)("common_minimize"),ot.setAttribute("aria-label",(0,T.Ru)("common_minimize")),ot.onclick=function(e){e.preventDefault(),e.stopPropagation(),de(),v.current&&!v.current.closed&&(v.current.close(),v.current=null,k(!1),setTimeout((0,o.A)(l().mark(function e(){var t,n,r,o,i;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=1,null===(n=window.documentPictureInPicture)||void 0===n?void 0:n.requestWindow({width:240,height:52});case 1:if(o=t=e.sent,!(r=null!==o)){e.next=2;break}r=void 0!==t;case 2:if(!r){e.next=3;break}i=t,e.next=4;break;case 3:i=null;case 4:v.current=i,k(!0),E.current&&Ae(E.current),e.next=6;break;case 5:e.prev=5,e.catch(0);case 6:case"end":return e.stop()}},e,null,[[0,5]])})),100))},nt.appendChild(ot)}if("countdown"===e.type){var it=t.createElement("button");it.className="pip-compact-toggle-btn",it.innerHTML='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="1em" height="1em"><polyline points="4 14 10 14 10 20"></polyline><polyline points="20 10 14 10 14 4"></polyline><line x1="14" y1="10" x2="21" y2="3"></line><line x1="3" y1="21" x2="10" y2="14"></line></svg>',it.title=(0,T.Ru)("common_minimize"),it.setAttribute("aria-label",(0,T.Ru)("common_minimize")),it.onclick=function(e){e.preventDefault(),e.stopPropagation(),de(),v.current&&!v.current.closed&&(v.current.close(),v.current=null,k(!1),setTimeout((0,o.A)(l().mark(function e(){var t,n,r,o,i;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=1,null===(n=window.documentPictureInPicture)||void 0===n?void 0:n.requestWindow({width:240,height:52});case 1:if(o=t=e.sent,!(r=null!==o)){e.next=2;break}r=void 0!==t;case 2:if(!r){e.next=3;break}i=t,e.next=4;break;case 3:i=null;case 4:v.current=i,k(!0),E.current&&Ae(E.current),e.next=6;break;case 5:e.prev=5,e.catch(0);case 6:case"end":return e.stop()}},e,null,[[0,5]])})),100))},nt.appendChild(it)}var at=t.createElement("span");if(at.className="pip-timer-text",at.textContent=e.timeLabel,nt.appendChild(at),tt.appendChild(nt),me.appendChild(tt),"countdown"===e.type){var ct=t.createElement("div");ct.style.height="6px",ct.style.borderRadius="999px",ct.style.background="rgba(255, 255, 255, 0.15)",ct.style.overflow="hidden",ct.style.marginTop="12px";var lt=t.createElement("div");lt.className="pip-progress-bar",lt.style.height="100%",lt.style.width="".concat(Math.round(100*e.progress),"%"),lt.style.background="linear-gradient(90deg, #89f7fe, #66a6ff)",ct.appendChild(lt),me.appendChild(ct)}}else{var st=t.createElement("div");st.style.flex="1",st.style.display="flex",st.style.alignItems="center",st.style.justifyContent="center",st.style.fontSize="48px",st.style.opacity="0.45",st.textContent="\u266a",me.appendChild(st)}var dt=t.createElement("div");dt.style.marginTop="auto",dt.style.display="flex",dt.style.justifyContent="music"===e.type?"space-between":"center",dt.style.gap="12px",me.appendChild(dt);var pt=t.createElement("button");pt.className="pip-toggle-btn",pt.textContent=e.isPlaying?(0,T.Ru)("common_pause"):(0,T.Ru)("common_resume"),pt.style.flex="1",pt.style.padding="10px",pt.style.borderRadius="999px",pt.style.border="none",pt.style.cursor="pointer",pt.style.background="rgba(255, 255, 255, 0.18)",pt.style.color="#fff",pt.style.fontSize="14px",pt.style.fontWeight="600",s(pt,e),dt.appendChild(pt);var ut=t.createElement("button");ut.className="pip-next-btn",ut.textContent=(0,T.Ru)("common_next"),ut.style.flex="music"===e.type?"1":"0",ut.style.padding="10px",ut.style.minWidth="88px",ut.style.borderRadius="999px",ut.style.border="none",ut.style.cursor="pointer",ut.style.background="rgba(255, 255, 255, 0.12)",ut.style.color="#fff",ut.style.fontSize="14px",ut.style.fontWeight="600",g(ut,e),dt.appendChild(ut)}}},[d,i,be,ke,re,oe,ce,fe,ve,S,N,z,P,B,H,Y,se,ge,de,pe,ue,V,te,p,m]),Ne=(0,s.useCallback)((0,o.A)(l().mark(function e(){var t,n,r,o,i,a,c;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(h){e.next=1;break}return e.abrupt("return");case 1:if(t=V?{width:240,height:52}:{width:320,height:200},v.current&&!v.current.closed){e.next=8;break}return null!==(n=v.current)&&void 0!==n&&n.closed&&(v.current=null),e.prev=2,e.next=3,null===(o=window.documentPictureInPicture)||void 0===o?void 0:o.requestWindow(t);case 3:if(a=r=e.sent,!(i=null!==a)){e.next=4;break}i=void 0!==r;case 4:if(!i){e.next=5;break}c=r,e.next=6;break;case 5:c=null;case 6:v.current=c,k(!0),e.next=8;break;case 7:return e.prev=7,e.catch(2),e.abrupt("return");case 8:E.current&&Ae(E.current);case 9:case"end":return e.stop()}},e,null,[[2,7]])})),[h,V,Ae]),_e=(0,s.useCallback)(function(){Ee()},[Ee]);return(0,s.useEffect)(function(){E.current=xe,xe&&v.current&&!v.current.closed&&Ae(xe)},[xe,Ae]),(0,s.useEffect)(function(){if(h){var e=function(){var e=!!E.current,t=v.current&&!v.current.closed;"hidden"===document.visibilityState&&e&&!t&&Ne()};return document.addEventListener("visibilitychange",e),function(){return document.removeEventListener("visibilitychange",e)}}},[h,Ne]),(0,s.useEffect)(function(){E.current&&v.current&&!v.current.closed&&Ae(E.current)},[z,P,B,H,Y,te,Ae]),(0,s.useEffect)(function(){return function(){Ee()}},[Ee]),{isSupported:h,isActive:x,requestPiP:Ne,exitPiP:_e}}({backgroundImage:null==Ln?void 0:Ln.urls.full,backgroundColor:Ur,music:{isPlaying:br,track:vr,togglePlay:Or,playNext:Tr,playLastTrack:Br,isPlayingLastTrack:Lr,setPlaying:fr},sounds:{toggleLastSounds:qr,isPlayingLastSounds:Mr,isMuted:wr,toggleMute:_r},pomodoro:{state:Jt,controls:Ft.current,title:nr},countdown:{state:$t,controls:Kt.current,title:nr},activityTitle:nr,onEventCreated:Gr}),Fr=Hr.isSupported,Kr=Hr.isActive,Wr=Hr.requestPiP,Yr=Hr.exitPiP,Jr=(0,s.useCallback)(function(){var e;if(Kr)Yr();else{var t=(null==Jt?void 0:Jt.timerState)===ie.RUNNING||(null==Jt?void 0:Jt.timerState)===ie.PAUSED,n=(null==$t?void 0:$t.timerState)===me.RUNNING||(null==$t?void 0:$t.timerState)===me.PAUSED;t||n||br||null!==(e=vn.timer)&&void 0!==e&&e.visible?Wr():(cr("timer"),setTimeout(function(){Wr()},100))}},[Kr,Yr,Wr,Jt,$t,br,null===(n=vn.timer)||void 0===n?void 0:n.visible,cr]),Xr=(0,s.useMemo)(function(){return[{id:"home",icon:s.createElement(b.A,null),title:(0,T.Ru)("home"),onSelect:function(){return L(Ce.st.path)}}].concat((0,r.A)(W?[]:[{id:"calendar",icon:s.createElement(f.A,null),title:(0,T.Ru)("calendar"),onSelect:sr}]),[{id:"timer",icon:s.createElement(v.A,null),title:(0,T.Ru)("pomodoro_timer"),onSelect:function(){return cr("timer")}},{id:"countdown",icon:s.createElement(h.A,null),title:(0,T.Ru)("countdown_timer"),onSelect:function(){return cr("countdown")}},{id:"music",icon:s.createElement(y.A,null),title:(0,T.Ru)("music_and_sounds"),onSelect:function(){return cr("music")}},{id:"quote",icon:s.createElement(w.A,null),title:(0,T.Ru)("daily_quote"),onSelect:function(){return cr("quote")}},{id:"target",icon:s.createElement(x.A,null),title:(0,T.Ru)("my_goals"),onSelect:function(){return cr("target")}},{id:"tasks",icon:s.createElement(k.A,null),title:(0,T.Ru)("today_activities"),onSelect:function(){return cr("tasks")}},{id:"energy",icon:s.createElement(E.A,null),title:(0,T.Ru)("energy_widget_title"),onSelect:function(){return cr("energy")}},{id:"location",icon:s.createElement(A.A,null),title:(0,T.Ru)("location_widget_title"),onSelect:function(){return cr("location")}},{id:"message",icon:s.createElement(N.A,null),title:W?(0,T.Ru)("chat_and_calendar"):(0,T.Ru)("chat"),onSelect:function(){return W?te(!0):cr("message")}}],(0,r.A)(Fr?[{id:"pip",icon:s.createElement(zt,null),title:Kr?(0,T.Ru)("close_pip"):(0,T.Ru)("open_pip"),onSelect:Jr}]:[]),(0,r.A)(W?[]:[{id:"arrange",icon:s.createElement(_.A,null),title:(0,T.Ru)("auto_arrange_widgets"),onSelect:mr}]),[{id:"expand",icon:Q?s.createElement(S.A,null):s.createElement(C.A,null),title:Q?(0,T.Ru)("exit_fullscreen"):(0,T.Ru)("fullscreen"),onSelect:lr}])},[Q,W,cr,lr,L,mr,Fr,Kr,Jr,sr]),Qr=(0,s.useMemo)(function(){return[{label:(0,T.Ru)("music"),value:(0,T.Ru)("music"),icon:s.createElement(y.A,null)},{label:(0,T.Ru)("sounds"),value:(0,T.Ru)("sounds"),icon:s.createElement(Oe.A,{style:{width:"1em",height:"1em"}})}]},[]),Vr=(0,s.useMemo)(function(){return Object.values(vn).filter(function(e){return e.visible})},[vn]);(0,s.useEffect)(function(){W&&Vr.length>0&&!nn&&rn(Vr[0].id)},[W,Vr,nn]),(0,s.useEffect)(function(){W&&nn&&!Vr.find(function(e){return e.id===nn})&&(Vr.length>0?rn(Vr[0].id):rn(null))},[W,nn,Vr]);var $r=(0,s.useCallback)(function(e){Xt(e)},[Xt]),Zr=(0,s.useCallback)(function(e){e.timerState!==me.IDLE?Zt(e):Zt(null)},[Zt]),eo=(0,s.useCallback)(function(e){var t=br,n=1e4;switch(e){case ae.LONG_BREAK:case ae.BREAK:n=5e3;break;case ae.FOCUS:n=1e4}t&&(fr(!1),setTimeout(function(){fr(!0)},n))},[br,fr]),to=(0,s.useCallback)(function(e){switch(e.id){case"timer":return s.createElement(Dt,{ref:Ft,focusTask:or,totalSeconds:Ae,onSessionComplete:eo,startTime:null==er?void 0:er.startDate,onStateChange:$r});case"music":return s.createElement(It,{tabOptions:Qr,onTabChange:pr,activeTab:de});case"quote":return s.createElement(jt,null);case"target":return s.createElement(Pt,{goals:Kn,goalsLoading:Wn,handleArchiveGoal:ir,navigate:L});case"message":return s.createElement(Lt,{includeAvatar:!1,includeHeader:!1,variant:"compact"});case"tasks":return s.createElement(Mt,{selectedDateIso:An});case"energy":return s.createElement(Ot,{activeConversation:Qn});case"location":return H?s.createElement(Bt,{user:H,conversationId:null==Qn?void 0:Qn._id,canMultipleSubmit:!0}):null;case"countdown":return s.createElement(Tt,{ref:Kt,durationInSeconds:be,autoStart:Xe,totalSeconds:Ae,onComplete:eo,onStateChange:Zr});default:return null}},[or,Ae,eo,null==er?void 0:er.startDate,$r,Qr,pr,de,Kn,Wn,ir,L,An,Qn,H,be,Xe,Zr]),no=(0,s.useMemo)(function(){return Vr.map(function(e){return{id:e.id,content:s.createElement("div",{className:"widget-content"},to(e))}})},[Vr,to]);return s.createElement("div",{className:"my-space-wrapper"},ft,s.createElement(Te.A,{backgroundColor:"var(--color-primary-light)",backgroundPhotoUrl:null==Ln?void 0:Ln.urls.full,backgroundPhotoInfo:{url:null==Ln?void 0:Ln.links.html,alt:"".concat((null==Ln?void 0:Ln.description)||(0,B.Sn)(null==Ln?void 0:Ln.alt_description)," ").concat(null!=Ln&&null!==(c=Ln.location)&&void 0!==c&&c.name?"in ".concat(null==Ln||null===(D=Ln.location)||void 0===D?void 0:D.name):"").trim(),blurHash:null==Ln?void 0:Ln.blur_hash}},s.createElement("div",{className:"my-space-content-wrapper"},s.createElement("div",{className:"my-space-main ".concat(!W&&oe?"with-sider":"no-sider"),ref:Ve},W?no.length>0&&nn&&s.createElement("div",{className:"mobile-widget"},s.createElement(St.A,{currentCardId:nn,cards:no,onCardChange:function(e){return rn(e)},controlPosition:"bottom"})):s.createElement("div",{className:"widgets-wrapper"},s.createElement(d.N,null,Vr.map(function(e){var t;return s.createElement(I(),{key:e.id,handle:".widget-header",position:e.position,onMouseDown:function(){return t=e.id,void hn(function(e){var n,r=null!==(n=e[t])&&void 0!==n?n:Ut[t];if(!r)return e;if(r.zIndex<kn.current){var o=kn.current+1;return kn.current=o,Rt(Rt({},e),{},(0,i.A)({},t,Rt(Rt({},r),{},{zIndex:o})))}return e});var t},onStart:dr,onStop:function(t,n){return function(e,t,n){hn(function(t){return Rt(Rt({},t),{},(0,i.A)({},e,Rt(Rt({},t[e]),{},{position:{x:n.x,y:n.y}})))})}(e.id,0,n)}},s.createElement("div",{className:"draggable-widget-container ".concat(yt?"arranging":""),style:{zIndex:e.zIndex}},s.createElement(j.c,{size:{width:e.size.width,height:e.size.height},minWidth:300,minHeight:200,maxWidth:1e3,maxHeight:800,enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},onResizeStop:function(t,n,r,o){return function(e,t,n,r){var o=r.getBoundingClientRect(),a=o.width,c=o.height;hn(function(t){return Rt(Rt({},t),{},(0,i.A)({},e,Rt(Rt({},t[e]),{},{size:{width:a,height:c}})))})}(e.id,0,0,r)},style:{position:"relative"}},s.createElement(p.P.div,{className:"draggable-widget widget-".concat(e.id),initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.2,ease:"circOut"}},s.createElement("div",{className:"widget-header"},s.createElement("span",{className:"widget-title"},null===(t=Xr.find(function(t){return t.id===e.id}))||void 0===t?void 0:t.title),s.createElement(m.Ay,{color:"default",variant:"filled",className:"widget-close",icon:s.createElement(R.A,null),shape:"circle",size:"small",onClick:function(){return t=e.id,void hn(function(e){var n,r=null!==(n=e[t])&&void 0!==n?n:Ut[t];return r?Rt(Rt({},e),{},(0,i.A)({},t,Rt(Rt({},r),{},{visible:!1}))):e});var t}})),s.createElement("div",{className:"widget-content"},to(e))))))}))),s.createElement("div",{className:"dock-wrapper"},s.createElement(q,{items:Xr,selectedIds:xn,withAnimation:!0,multiple:!0}))),s.createElement(d.N,null,!W&&oe&&s.createElement(p.P.div,{key:"my-space-calendar",className:"my-space-sider",initial:{x:320,opacity:0},animate:{x:0,opacity:1},exit:{x:320,opacity:0},transition:{type:"spring",stiffness:260,damping:30}},s.createElement(P.A,{events:Bn,selectedDateIso:An,height:"100%",title:et,titleTooltip:ot}))),!W&&s.createElement(ve.q,{shape:"round",initPosition:{bottom:24,right:24},icon:s.createElement("img",{src:mn.url,width:mn.size}),bubbleSize:68,popoverSize:500,badgeCount:Gt,onPopoverOpenChange:$n},s.createElement("div",{className:"my-space-chat-bubble-content"},s.createElement(fe.A,{includeHeader:!1,includeAvatar:!1,variant:"compact"}))),W&&s.createElement(g.A,{title:(0,T.Ru)("my_space"),rootClassName:"lazyvax lzv-theme-".concat(G),placement:"right",onClose:function(){return te(!1)},open:ee,width:"100vw",styles:{body:{padding:0}}},s.createElement(Se,null)))),W&&s.createElement("div",{style:{position:"fixed",right:8,top:8,zIndex:9999}},s.createElement(m.Ay,{style:{color:"var(--color-primary-bg)"},size:"large",icon:ee?s.createElement(R.A,null):s.createElement(z.A,null),onClick:function(){return te(!ee)},type:"text"})))}},65529:(e,t,n)=>{var r=n(85072),o=n.n(r),i=n(97825),a=n.n(i),c=n(77659),l=n.n(c),s=n(55056),d=n.n(s),p=n(10540),u=n.n(p),m=n(41113),g=n.n(m),b=n(4658),f={};f.styleTagTransform=g(),f.setAttributes=d(),f.insert=l().bind(null,"head"),f.domAPI=a(),f.insertStyleElement=u();var v=o()(b.default,f);if(!b.default.locals||e.hot.invalidate){var h=!b.default.locals,y=h?b:b.default.locals;e.hot.accept(4658,t=>{b=n(4658),function(e,t,n){if(!e&&t||e&&!t)return!1;var r;for(r in e)if((!n||"default"!==r)&&e[r]!==t[r])return!1;for(r in t)if(!(n&&"default"===r||e[r]))return!1;return!0}(y,h?b:b.default.locals,h)?(y=h?b:b.default.locals,v(b.default)):e.hot.invalidate()})}e.hot.dispose(function(){v()});b.default&&b.default.locals&&b.default.locals},75572:(e,t,n)=>{var r=n(85072),o=n.n(r),i=n(97825),a=n.n(i),c=n(77659),l=n.n(c),s=n(55056),d=n.n(s),p=n(10540),u=n.n(p),m=n(41113),g=n.n(m),b=n(77943),f={};f.styleTagTransform=g(),f.setAttributes=d(),f.insert=l().bind(null,"head"),f.domAPI=a(),f.insertStyleElement=u();var v=o()(b.default,f);if(!b.default.locals||e.hot.invalidate){var h=!b.default.locals,y=h?b:b.default.locals;e.hot.accept(77943,t=>{b=n(77943),function(e,t,n){if(!e&&t||e&&!t)return!1;var r;for(r in e)if((!n||"default"!==r)&&e[r]!==t[r])return!1;for(r in t)if(!(n&&"default"===r||e[r]))return!1;return!0}(y,h?b:b.default.locals,h)?(y=h?b:b.default.locals,v(b.default)):e.hot.invalidate()})}e.hot.dispose(function(){v()});b.default&&b.default.locals&&b.default.locals},77943:(e,t,n)=>{n.r(t),n.d(t,{default:()=>c});var r=n(31601),o=n.n(r),i=n(76314),a=n.n(i)()(o());a.push([e.id,".pomodoro-wrapper{position:relative;width:100%;height:100%;min-width:300px;margin:0 auto}.pomodoro-wrapper .card{width:100%;height:100%;perspective:1000px;position:relative}.pomodoro-wrapper .card .card-inner{position:relative;width:100%;height:100%;transition:transform .6s;transform-style:preserve-3d}.pomodoro-wrapper .card.flipped .card-inner{transform:rotateY(180deg)}.pomodoro-wrapper .card .card-front,.pomodoro-wrapper .card .card-back{position:absolute;width:100%;height:100%;backface-visibility:hidden;border-radius:12px}.pomodoro-wrapper .card .card-front{overflow:auto}.pomodoro-wrapper .card .card-front::-webkit-scrollbar{display:block;width:12px}.pomodoro-wrapper .card .card-front::-webkit-scrollbar-track{background:rgba(0,0,0,0)}.pomodoro-wrapper .card .card-front::-webkit-scrollbar-thumb{background-color:var(--color-scrollbar-thumb);border-radius:10px;border:4px solid rgba(0,0,0,0);background-clip:padding-box}.pomodoro-wrapper .card .card-front::-webkit-scrollbar-thumb:hover{background-color:var(--color-scrollbar-thumb-hover)}.pomodoro-wrapper .card .card-front::-webkit-scrollbar-corner{background:rgba(0,0,0,0)}.pomodoro-wrapper .card .card-back{transform:rotateY(180deg);overflow:auto}.pomodoro-wrapper .card .card-back::-webkit-scrollbar{display:block;width:12px}.pomodoro-wrapper .card .card-back::-webkit-scrollbar-track{background:rgba(0,0,0,0)}.pomodoro-wrapper .card .card-back::-webkit-scrollbar-thumb{background-color:var(--color-scrollbar-thumb);border-radius:10px;border:4px solid rgba(0,0,0,0);background-clip:padding-box}.pomodoro-wrapper .card .card-back::-webkit-scrollbar-thumb:hover{background-color:var(--color-scrollbar-thumb-hover)}.pomodoro-wrapper .card .card-back::-webkit-scrollbar-corner{background:rgba(0,0,0,0)}.pomodoro-wrapper .card .card-back{background:hsla(0,0%,100%,.1);backdrop-filter:blur(20px);border:1px solid rgba(0,0,0,.03);padding:16px;display:flex;flex-direction:column;gap:16px}.pomodoro-container{background:hsla(0,0%,100%,.1);backdrop-filter:blur(20px);border-radius:12px;padding:16px;border:1px solid rgba(0,0,0,.03);height:100%;transition:all .3s ease;box-shadow:0 2px 8px rgba(0,0,0,.05);position:relative}.pomodoro-container.break{background:linear-gradient(135deg, rgba(255, 165, 0, 0.1) 0%, rgba(255, 193, 7, 0.1) 100%)}.pomodoro-container.long_break{background:linear-gradient(135deg, rgba(33, 150, 243, 0.1) 0%, rgba(66, 165, 245, 0.1) 100%)}.pomodoro-container .pomodoro-header{margin-bottom:8px}.pomodoro-container .pomodoro-body{display:flex;flex-direction:column;align-items:center;gap:24px}.pomodoro-container .pomodoro-body .timer-display{text-align:center}.pomodoro-container .pomodoro-body .timer-display .timer-text{font-size:72px !important;font-weight:700 !important;color:var(--color-white);margin:0 !important;line-height:1 !important;letter-spacing:-2px;font-variant-numeric:tabular-nums;text-shadow:0 0 10px rgba(0,0,0,.5)}.pomodoro-container .pomodoro-body .timer-display .session-progress{display:flex;justify-content:center;align-items:center;gap:8px;margin-top:12px;flex-wrap:wrap}.pomodoro-container .pomodoro-body .timer-display .session-progress .session-dot{display:inline-block;width:8px;height:8px;border-radius:50%;background-color:var(--color-border);transition:all .3s ease}.pomodoro-container .pomodoro-body .timer-display .session-progress .session-dot.completed{background-color:var(--color-primary)}.pomodoro-container .pomodoro-body .timer-display .session-progress .session-dot.current{width:12px;border-radius:4px;background-color:var(--color-primary-hover)}.pomodoro-container .pomodoro-body .timer-display .session-progress .session-dot.pending{background-color:var(--color-border)}.pomodoro-container .pomodoro-body .progress-container{width:100%;padding:0 20px}.pomodoro-container .pomodoro-body .progress-container .pomodoro-progress .ant-progress-outer .ant-progress-inner{background:hsla(0,0%,100%,.2);border-radius:100px}.pomodoro-container .pomodoro-body .task-info{background:hsla(0,0%,100%,.15);border-radius:12px;padding:12px 20px;width:100%;text-align:center;backdrop-filter:blur(10px)}.pomodoro-container .pomodoro-body .task-info .task-label{color:var(--color-text);font-size:14px;display:flex;align-items:center;justify-content:center;gap:8px}.pomodoro-container .pomodoro-body .task-info .task-label .task-emoji{font-size:18px}.pomodoro-container .pomodoro-body .message-container{text-align:center;margin:20px 0}.pomodoro-container .pomodoro-body .message-container .main-message{font-size:18px;color:var(--color-text-secondary);font-weight:500}.pomodoro-container .pomodoro-body .controls{display:flex;gap:12px;align-items:center}.pomodoro-container .pomodoro-body .settings-button{position:absolute;bottom:16px;right:16px;opacity:0;transition:opacity .2s ease;z-index:10}.pomodoro-container:hover .settings-button{opacity:1}.pomodoro-container .ant-btn-color-default{background-color:var(--color-primary-bg)}.settings-header{display:flex;align-items:center;justify-content:space-between;gap:8px}.settings-body{flex:1;display:flex;flex-direction:column;gap:8px;overflow:auto}.settings-body::-webkit-scrollbar{display:block;width:12px}.settings-body::-webkit-scrollbar-track{background:rgba(0,0,0,0)}.settings-body::-webkit-scrollbar-thumb{background-color:var(--color-scrollbar-thumb);border-radius:10px;border:4px solid rgba(0,0,0,0);background-clip:padding-box}.settings-body::-webkit-scrollbar-thumb:hover{background-color:var(--color-scrollbar-thumb-hover)}.settings-body::-webkit-scrollbar-corner{background:rgba(0,0,0,0)}.settings-body .settings-section{display:flex;flex-direction:column;gap:12px}.settings-body .settings-section .settings-section-title{font-size:14px;font-weight:600;color:var(--color-text)}.settings-body .settings-section .settings-row{display:flex;justify-content:space-between;align-items:center;gap:12px}.settings-body .settings-section .settings-row .input-with-unit{display:flex;align-items:center;gap:8px}.settings-body .settings-section .settings-row .input-with-unit .ant-input-number{width:80px}.settings-body .settings-section .settings-row .input-with-unit .unit{font-size:12px;color:var(--color-text-secondary)}.lzv-theme-dark .pomodoro-wrapper .card .card-back{background:rgba(0,0,0,.4);border:1px solid hsla(0,0%,100%,.1)}.lzv-theme-dark .pomodoro-container{background:rgba(0,0,0,.4);border:1px solid hsla(0,0%,100%,.1)}.lzv-theme-dark .pomodoro-container.focus{background:linear-gradient(135deg, rgba(52, 194, 26, 0.15) 0%, rgba(115, 209, 61, 0.15) 100%)}.lzv-theme-dark .pomodoro-container.break{background:linear-gradient(135deg, rgba(255, 165, 0, 0.15) 0%, rgba(255, 193, 7, 0.15) 100%)}.lzv-theme-dark .pomodoro-container.long_break{background:linear-gradient(135deg, rgba(33, 150, 243, 0.15) 0%, rgba(66, 165, 245, 0.15) 100%)}.lzv-theme-dark .pomodoro-container .task-info{background:hsla(0,0%,100%,.05)}@media(max-width: 480px){.pomodoro-container{min-width:auto;padding:20px}.pomodoro-container .timer-display .timer-text{font-size:56px !important}.pomodoro-container .controls{flex-direction:column;width:100%}.pomodoro-container .controls .control-button{width:100%;justify-content:center}}",""]);const c=a},85588:(e,t,n)=>{n.r(t),n.d(t,{default:()=>c});var r=n(31601),o=n.n(r),i=n(76314),a=n.n(i)()(o());a.push([e.id,".dock-container{display:flex;justify-content:center;align-items:center;padding:16px}.dock{display:flex;align-items:center;gap:8px;padding:12px 16px;border-radius:16px;position:relative}.dock--with-background{background-color:var(--color-primary-bg);border:1px solid var(--color-border);backdrop-filter:blur(10px);box-shadow:0 4px 12px rgba(var(--color-border-rgb), 0.1)}.dock--with-animation{animation:dock-float 4s ease-in-out infinite;transition:box-shadow .3s ease}.dock--with-animation:hover{box-shadow:0 8px 24px rgba(var(--color-border-rgb), 0.15)}.dock-item{position:relative;display:flex;align-items:center;justify-content:center;padding:12px;border-radius:12px;background:rgba(0,0,0,0);border:none;cursor:pointer;transition:all .2s ease;color:var(--color-text)}.dock-item__icon{display:flex;align-items:center;justify-content:center;width:24px;height:24px;pointer-events:none}.dock-item__icon svg{width:100%;height:100%}.dock-item__tooltip{position:absolute;top:-40px;left:50%;transform:translateX(-50%);background-color:var(--color-bg-spotlight);color:var(--color-text);padding:6px 12px;border-radius:8px;font-size:12px;white-space:nowrap;opacity:0;pointer-events:none;transition:opacity .2s ease;box-shadow:0 2px 8px rgba(var(--color-border-rgb), 0.2);border:1px solid var(--color-border);z-index:10000}.dock-item:hover{background-color:var(--color-bg-gray-ultralight)}.dock-item:hover .dock-item__icon{color:var(--color-primary)}.dock-item:hover .dock-item__tooltip{opacity:1}.dock-item--selected{background-color:var(--color-primary);color:var(--color-white)}.dock-item--selected:hover{background-color:var(--color-primary-hover)}.dock-item--with-animation:hover{transform:translateY(-2px) scale(1.05)}.dock-item--with-animation:active{transform:translateY(0) scale(0.95)}.dock-overflow-menu{display:flex;flex-direction:column;gap:4px;padding:8px;max-height:400px;overflow-y:auto;min-width:200px}.dock-overflow-item{display:flex;align-items:center;gap:12px;padding:10px 16px;border-radius:8px;background:rgba(0,0,0,0);border:none;cursor:pointer;transition:all .2s ease;color:var(--color-text);width:100%;text-align:left}.dock-overflow-item__icon{display:flex;align-items:center;justify-content:center;width:20px;height:20px;color:var(--color-text-secondary);transition:color .2s ease;pointer-events:none}.dock-overflow-item__icon svg{width:100%;height:100%}.dock-overflow-item__title{flex:1;font-size:14px;font-weight:500;white-space:nowrap}.dock-overflow-item:hover{background-color:var(--color-bg-gray-ultralight)}.dock-overflow-item:hover .dock-overflow-item__icon{color:var(--color-primary)}.dock-overflow-item--selected{background-color:var(--color-primary-light)}.dock-overflow-item--selected .dock-overflow-item__icon{color:var(--color-primary)}.dock-overflow-item--selected .dock-overflow-item__title{color:var(--color-primary);font-weight:600}@keyframes dock-float{0%,100%{transform:translateY(0)}50%{transform:translateY(-4px)}}@media(max-width: 768px){.dock-container{padding:8px}.dock{gap:4px;padding:8px 12px}.dock--with-background{box-shadow:0 2px 8px rgba(var(--color-border-rgb), 0.1)}.dock-item{padding:8px}.dock-item__icon{width:20px;height:20px}.dock-item__tooltip{font-size:11px;padding:4px 8px}.dock-item--more{padding-left:12px;margin-left:2px}}@media(max-width: 480px){.dock{gap:2px;padding:6px 8px}.dock-item{padding:6px}.dock-item__icon{width:18px;height:18px}.dock-item--more{padding-left:10px;margin-left:1px}}",""]);const c=a},87957:(e,t,n)=>{var r=n(85072),o=n.n(r),i=n(97825),a=n.n(i),c=n(77659),l=n.n(c),s=n(55056),d=n.n(s),p=n(10540),u=n.n(p),m=n(41113),g=n.n(m),b=n(48244),f={};f.styleTagTransform=g(),f.setAttributes=d(),f.insert=l().bind(null,"head"),f.domAPI=a(),f.insertStyleElement=u();var v=o()(b.default,f);if(!b.default.locals||e.hot.invalidate){var h=!b.default.locals,y=h?b:b.default.locals;e.hot.accept(48244,t=>{b=n(48244),function(e,t,n){if(!e&&t||e&&!t)return!1;var r;for(r in e)if((!n||"default"!==r)&&e[r]!==t[r])return!1;for(r in t)if(!(n&&"default"===r||e[r]))return!1;return!0}(y,h?b:b.default.locals,h)?(y=h?b:b.default.locals,v(b.default)):e.hot.invalidate()})}e.hot.dispose(function(){v()});b.default&&b.default.locals&&b.default.locals},92739:(e,t,n)=>{var r=n(85072),o=n.n(r),i=n(97825),a=n.n(i),c=n(77659),l=n.n(c),s=n(55056),d=n.n(s),p=n(10540),u=n.n(p),m=n(41113),g=n.n(m),b=n(22408),f={};f.styleTagTransform=g(),f.setAttributes=d(),f.insert=l().bind(null,"head"),f.domAPI=a(),f.insertStyleElement=u();var v=o()(b.default,f);if(!b.default.locals||e.hot.invalidate){var h=!b.default.locals,y=h?b:b.default.locals;e.hot.accept(22408,t=>{b=n(22408),function(e,t,n){if(!e&&t||e&&!t)return!1;var r;for(r in e)if((!n||"default"!==r)&&e[r]!==t[r])return!1;for(r in t)if(!(n&&"default"===r||e[r]))return!1;return!0}(y,h?b:b.default.locals,h)?(y=h?b:b.default.locals,v(b.default)):e.hot.invalidate()})}e.hot.dispose(function(){v()});b.default&&b.default.locals&&b.default.locals},99614:(e,t,n)=>{var r=n(85072),o=n.n(r),i=n(97825),a=n.n(i),c=n(77659),l=n.n(c),s=n(55056),d=n.n(s),p=n(10540),u=n.n(p),m=n(41113),g=n.n(m),b=n(37403),f={};f.styleTagTransform=g(),f.setAttributes=d(),f.insert=l().bind(null,"head"),f.domAPI=a(),f.insertStyleElement=u();var v=o()(b.default,f);if(!b.default.locals||e.hot.invalidate){var h=!b.default.locals,y=h?b:b.default.locals;e.hot.accept(37403,t=>{b=n(37403),function(e,t,n){if(!e&&t||e&&!t)return!1;var r;for(r in e)if((!n||"default"!==r)&&e[r]!==t[r])return!1;for(r in t)if(!(n&&"default"===r||e[r]))return!1;return!0}(y,h?b:b.default.locals,h)?(y=h?b:b.default.locals,v(b.default)):e.hot.invalidate()})}e.hot.dispose(function(){v()});b.default&&b.default.locals&&b.default.locals}}]);