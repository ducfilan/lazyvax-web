"use strict";(self.webpackChunklazyvax_ext=self.webpackChunklazyvax_ext||[]).push([[551],{92551:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Y});var n=r(60436),a=r(64467),i=r(10467),c=r(5544),l=r(54756),u=r.n(l),o=r(96540),s=r(84972),m=r(71988),d=r(87959),p=r(64132),f=r(16044),y=r(26955),A=r(49222),v=r(17355),E=r(15622),h=r(40261),b=r(93598),g=r(49237),k=r(31598),w=r(14154),O=r(17825),x=function(){var e=(0,i.A)(u().mark((function e(){var t,r,n,a=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},r=new URLSearchParams,Object.entries(t).forEach((function(e){var t=(0,c.A)(e,2),n=t[0],a=t[1];a&&(a instanceof Date?r.append(n,a.toISOString()):r.append(n,a.toString()))})),e.next=5,(0,w.PA)().get("".concat(k.SO,"?").concat(r.toString()));case 5:return n=e.sent,e.abrupt("return",n.data.map((function(e){return new O.pe(e)})));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=(0,i.A)(u().mark((function e(t){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,w.PA)().post(k.SO,t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=(0,i.A)(u().mark((function e(t,r){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,w.PA)().patch("".concat(k.SO,"/").concat(t),r);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),I=function(){var e=(0,i.A)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,w.PA)().delete("".concat(k.SO,"/").concat(t));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=r(83186),H=r(74353),T=r.n(H);function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){(0,a.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var C=s.A.Option,F={title:"",priority:"medium",repeat:{unit:"day",frequency:1},detail:"",category:"",color:"",emoji:"",idealDuration:void 0};const Y=function(){var e=(0,o.useState)([]),t=(0,c.A)(e,2),r=t[0],a=t[1],l=(0,o.useState)(!1),k=(0,c.A)(l,2),w=k[0],O=k[1],H=(0,o.useState)(!1),j=(0,c.A)(H,2),Y=j[0],_=j[1],M=m.A.useForm(),U=(0,c.A)(M,1)[0],L=(0,o.useState)(null),R=(0,c.A)(L,2),W=R[0],V=R[1];(0,o.useEffect)((function(){var e=function(){var e=(0,i.A)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x();case 2:t=e.sent,a(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);var z=[{title:"Title",dataIndex:"title",key:"title"},{title:"Priority",dataIndex:"priority",key:"priority",render:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{title:"Repeat",dataIndex:"repeat",key:"repeat",render:function(e){return"".concat(e.unit," (").concat(e.frequency," times)")}},{title:"Category",dataIndex:"category",key:"category"},{title:"Actions",key:"actions",render:function(e,t){return o.createElement(o.Fragment,null,o.createElement(p.Ay,{type:"link",icon:o.createElement(h.A,null),onClick:function(){return function(e){var t;V(e),O(!0),_(!0);var r=e.startTime?T()("".concat(e.startTime," 2024-01-01"),"HH:mm YYYY-MM-DD"):void 0,n=e.endTime?T()("".concat(e.endTime," 2024-01-01"),"HH:mm YYYY-MM-DD"):void 0;r&&n&&n.isBefore(r)&&n.add(1,"day"),U.setFieldsValue(q(q({},e),{},{repeat:{unit:e.repeat.unit,frequency:e.repeat.frequency.toString(),daysOfWeek:e.repeat.daysOfWeek||[]},idealDuration:null===(t=e.idealDuration)||void 0===t?void 0:t.toString(),startTime:r,endTime:n}))}(t)},style:{marginRight:8}}),o.createElement(f.A,{title:"Are you sure?",onConfirm:function(){return e=t._id,a(r.filter((function(t){return t._id!==e}))),void I(e).then((function(){d.Ay.success("Habit deleted successfully")})).catch((function(){d.Ay.error("Failed to delete habit")}));var e}},o.createElement(p.Ay,{type:"link",icon:o.createElement(b.A,null),danger:!0})))}}];return o.createElement("div",{className:"pad-left-right-16px"},o.createElement(p.Ay,{type:"primary",icon:o.createElement(g.A,null),onClick:function(){O(!0),_(!1),U.resetFields()},style:{marginBottom:16}},"Add Habit"),o.createElement(y.A,{dataSource:r,columns:z,rowKey:"_id"}),o.createElement(A.A,{title:Y?"Edit Habit":"Add Habit",open:w,onOk:function(){U.validateFields().then(function(){var e=(0,i.A)(u().mark((function e(t){var i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.idealDuration=t.idealDuration?parseInt(t.idealDuration):void 0,t.repeat.frequency=parseInt(t.repeat.frequency),t.startTime&&t.endTime&&(t.startTime=t.startTime.format("HH:mm"),t.endTime=t.endTime.format("HH:mm")),!Y||!W){e.next=12;break}return e.next=7,D(W._id,t);case 7:i=r.map((function(e){return e._id===W._id?t:e})),a(i),d.Ay.success("Habit updated successfully"),e.next=16;break;case 12:return e.next=14,S(t);case 14:a([].concat((0,n.A)(r),[t])),d.Ay.success("Habit added successfully");case 16:O(!1),U.resetFields(),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),d.Ay.error("Failed to save habit");case 23:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))},onCancel:function(){return O(!1)}},o.createElement(m.A,{form:U,layout:"vertical",initialValues:F},o.createElement(m.A.Item,{name:"title",label:"Title",rules:[{required:!0,message:"Please enter the title"}]},o.createElement(v.A,{placeholder:"Enter habit title"})),o.createElement(m.A.Item,{name:"priority",label:"Priority",rules:[{required:!0,message:"Please select the priority"}]},o.createElement(s.A,null,o.createElement(C,{value:"low"},"Low"),o.createElement(C,{value:"medium"},"Medium"),o.createElement(C,{value:"high"},"High"))),o.createElement(m.A.Item,{name:["repeat","unit"],label:"Repeat Unit",rules:[{required:!0,message:"Please select the repeat unit"}]},o.createElement(s.A,null,P.b5.map((function(e){return o.createElement(C,{key:e,value:e},e.charAt(0).toUpperCase()+e.slice(1))})))),o.createElement(m.A.Item,{name:["repeat","frequency"],label:"Frequency",rules:[{required:!0,message:"Please enter the frequency"}]},o.createElement(v.A,{type:"number",min:1,placeholder:"How often to repeat?"})),o.createElement(m.A.Item,{noStyle:!0,shouldUpdate:function(e,t){var r,n;return(null==e||null===(r=e.repeat)||void 0===r?void 0:r.unit)!==(null==t||null===(n=t.repeat)||void 0===n?void 0:n.unit)}},(function(e){var t=(0,e.getFieldValue)(["repeat","unit"]);return"week"===t?o.createElement(m.A.Item,{name:["repeat","daysOfWeek"],label:"Days of Week",rules:[{required:!0,message:"Please select days of week"}]},o.createElement(s.A,{mode:"multiple"},P.L6.map((function(e){return o.createElement(C,{key:e,value:e},new Date(2024,0,e+1).toLocaleDateString("en-US",{weekday:"long"}))})))):"month"===t?o.createElement(m.A.Item,{name:["repeat","daysOfMonth"],label:"Days of Month",rules:[{required:!0,message:"Please select days of month"}]},o.createElement(s.A,{mode:"multiple"},o.createElement(C,{key:0,value:0},"Last day of month"),Array.from({length:31},(function(e,t){return t+1})).map((function(e){return o.createElement(C,{key:e,value:e},e)})))):null})),o.createElement(m.A.Item,{name:"category",label:"Category"},o.createElement(v.A,{placeholder:"Enter category"})),o.createElement(m.A.Item,{name:"color",label:"Color"},o.createElement(v.A,{type:"color"})),o.createElement(m.A.Item,{name:"emoji",label:"Emoji"},o.createElement(v.A,{placeholder:"Enter emoji"})),o.createElement(m.A.Item,{name:"idealDuration",label:"Ideal Duration (minutes)"},o.createElement(v.A,{type:"number",placeholder:"Enter duration in minutes"})),o.createElement(m.A.Item,{name:"startTime",label:"Start Time"},o.createElement(E.A,{format:"HH:mm",needConfirm:!1})),o.createElement(m.A.Item,{name:"endTime",label:"End Time"},o.createElement(E.A,{format:"HH:mm",needConfirm:!1})))))}}}]);