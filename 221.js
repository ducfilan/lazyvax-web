"use strict";(self.webpackChunklazyvax_ext=self.webpackChunklazyvax_ext||[]).push([[221],{30221:(e,t,a)=>{a.r(t),a.d(t,{SharedGoalPreview:()=>Y});var o=a(10467),n=a(5544),r=a(54756),s=a.n(r),l=(a(27347),a(96540)),i=a(55166),c=a(677),d=a(97072),m=a(77796),p=a(56914),g=a(47152),u=a(16370),v=a(39356),h=a(64132),x=a(1849),f=a(17308),w=a(47767),b=a(97665),y=a(59270),E=a(57097),N=a(86220),A=a(42569),_=a(2622),k=a(18373),z=a(16172),R=a(92089),D=a(32977),M=a(26362),S=a(63411),j=a(71295),C=a(34665),P=a(95927),T=a(76531),F=a(34338),I=a(54107),q=i.A.Title,G=i.A.Text,K=i.A.Paragraph,Y=function(){var e,t,a,r,i=(0,w.g)().shareToken,Y=(0,w.Zp)(),L=(0,b.jE)(),U=(0,P.S)().user,Z=(0,l.useState)(null),J=(0,n.A)(Z,2),Q=J[0],X=J[1],B=(0,l.useState)(!0),H=(0,n.A)(B,2),O=H[0],V=H[1],W=(0,l.useState)(null),$=(0,n.A)(W,2),ee=$[0],te=$[1],ae=(0,l.useState)(!1),oe=(0,n.A)(ae,2),ne=oe[0],re=oe[1],se=(0,l.useState)(!1),le=(0,n.A)(se,2),ie=le[0],ce=le[1],de=(0,y.I)({queryKey:["goals"],queryFn:(r=(0,o.A)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,N.DX)());case 1:case"end":return e.stop()}}),e)}))),function(){return r.apply(this,arguments)}),enabled:null!==U&&ie}),me=de.data,pe=de.isLoading,ge=(0,E.n)({mutationFn:N.Au,onSuccess:function(){L.invalidateQueries({queryKey:["goals"]})}}),ue=(0,l.useCallback)((0,o.A)(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,N.Db)(i);case 3:"error"in(t=e.sent)?te(t.error):X(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),te((0,A.Ru)("unexpected_error_message"));case 10:return e.prev=10,V(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,7,10,13]])}))),[i]);(0,l.useEffect)((function(){i&&ue()}),[i,ue]);var ve=function(){var e=(0,o.A)(s().mark((function e(){var t,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(U){e.next=3;break}return Y("/login?returnTo=/goals/shared/".concat(i)),e.abrupt("return");case 3:return re(!0),e.prev=4,e.next=7,(0,N.qK)(i);case 7:t=e.sent,Y("/goals/".concat(t.goalId)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),404===(null===(a=e.t0.response)||void 0===a?void 0:a.status)?te((0,A.Ru)("goal_shared_no_longer_available")):te((0,A.Ru)("unexpected_error_message"));case 14:return e.prev=14,re(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[4,11,14,17]])})));return function(){return e.apply(this,arguments)}}(),he=function(e){ge.mutate(e)};if(O)return l.createElement("div",{className:"shared-goal-preview"},l.createElement(c.A,{className:"shared-goal-container",bordered:!1},l.createElement(d.A,{active:!0,paragraph:{rows:8}})));if(ee||!Q)return l.createElement("div",{className:"shared-goal-preview"},l.createElement(c.A,{className:"shared-goal-container",variant:"borderless"},l.createElement(m.A,{message:(0,A.Ru)("goal_shared_no_longer_available"),description:ee,type:"error",showIcon:!0})));var xe=function(){if(null==Q||!Q.fromDate||null==Q||!Q.deadline)return null;var e=new Date,t=new Date(Q.fromDate),a=new Date(Q.deadline),o=(0,k.c)(t,e),n=(0,k.c)(a,t),r=(0,z.f)(e,o);return{newFromDate:r,newDeadline:(0,z.f)(r,n)}}(),fe=(null===(e=T.Z.find((function(e){return e.value===Q.priority})))||void 0===e?void 0:e.label)||"",we=(null===(t=Q.milestones)||void 0===t?void 0:t.reduce((function(e,t){var a;return e+((null===(a=t.actions)||void 0===a?void 0:a.length)||0)}),0))||0;return l.createElement("div",{className:"shared-goal-preview"},l.createElement("div",{className:"shared-goal-wrapper"},l.createElement(m.A,{message:(0,A.Ru)("goal_shared_template_banner"),type:"info",showIcon:!0,icon:l.createElement(D.A,null),closable:!0}),l.createElement(c.A,{className:"main-content-card top-16px",variant:"borderless"},l.createElement("div",{className:"hero-section is-center"},Q.emoji&&l.createElement("div",{className:"goal-emoji"},Q.emoji),l.createElement(q,{level:1,className:"goal-title margin-0 bot-16px"},Q.title),fe&&l.createElement(p.A,{color:"blue",className:"priority-tag"},fe)),Q.detail&&l.createElement("div",{className:"description-section"},l.createElement(K,{className:"goal-description"},Q.detail)),l.createElement(g.A,{gutter:[16,16],className:"stats-row justify-center"},xe&&l.createElement(u.A,{xs:24,sm:8},l.createElement("div",{className:"stat-item flex align-center gap-x-16 border-radius-12px"},l.createElement(M.A,{className:"stat-icon"}),l.createElement("div",{className:"stat-content flex-col"},l.createElement(G,{type:"secondary",className:"stat-label"},(0,A.Ru)("goal_start_date")),l.createElement(G,{strong:!0,className:"stat-value"},(0,R.GP)(xe.newFromDate,"MMM d, yyyy"))))),Q.milestones&&Q.milestones.length>0&&l.createElement(u.A,{xs:24,sm:8},l.createElement("div",{className:"stat-item flex align-center gap-x-16 border-radius-12px"},l.createElement(S.A,{className:"stat-icon stat-icon-blue"}),l.createElement("div",{className:"stat-content flex-col"},l.createElement(G,{type:"secondary",className:"stat-label"},(0,A.Ru)("goal_milestones")),l.createElement(G,{strong:!0,className:"stat-value"},Q.milestones.length)))),we>0&&l.createElement(u.A,{xs:24,sm:8},l.createElement("div",{className:"stat-item flex align-center gap-x-16 border-radius-12px"},l.createElement(j.A,{className:"stat-icon stat-icon-green"}),l.createElement("div",{className:"stat-content flex-col"},l.createElement(G,{type:"secondary",className:"stat-label"},(0,A.Ru)("goal_actions")),l.createElement(G,{strong:!0,className:"stat-value"},we))))),xe&&l.createElement(m.A,{message:(0,_.JT)((0,A.Ru)("goal_clone_date_preview"),[{key:"newFromDate",value:(0,R.GP)(xe.newFromDate,"MMM d, yyyy")}]),type:"info",showIcon:!0,className:"date-alert border-radius-12px"}),Q.milestones&&Q.milestones.length>0&&l.createElement("div",{className:"milestones-section"},l.createElement("div",{className:"section-header flex align-center gap-x-12 bot-16px"},l.createElement(S.A,null),l.createElement(q,{level:4,className:"margin-0"},(0,A.Ru)("goal_milestones_title"))),l.createElement(v.A,{className:"milestones-collapse",ghost:!0,items:Q.milestones.sort((function(e,t){return e.order-t.order})).map((function(e){return{key:e._id,label:l.createElement("div",{className:"milestone-label flex align-center gap-x-12"},l.createElement(j.A,{className:"milestone-check"}),l.createElement(G,{strong:!0},e.milestone),e.deadline&&l.createElement(p.A,{bordered:!1,color:"blue",className:"milestone-date"},l.createElement(M.A,null)," ",(0,R.GP)(new Date(e.deadline),"MMM d"))),children:l.createElement("div",{className:"milestone-content"},e.description&&l.createElement(K,null,e.description),e.actions&&e.actions.length>0&&l.createElement("div",{className:"actions-list"},l.createElement(G,{type:"secondary",className:"actions-header"},e.actions.length," ",(0,A.Ru)("goal_actions").toLowerCase()),l.createElement("ul",null,e.actions.sort((function(e,t){return e.order-t.order})).map((function(e){return l.createElement("li",{key:e._id},e.action)})))))}})),defaultActiveKey:null===(a=Q.milestones[0])||void 0===a?void 0:a._id})),l.createElement("div",{className:"cta-section flex-col align-center gap-x-16"},l.createElement("div",{className:"cta-buttons flex no-wrap gap-x-12 width-100per"},l.createElement(h.Ay,{type:"primary",size:"large",onClick:ve,loading:ne,icon:l.createElement(C.A,null),className:"cta-button is-deep flex-1"},(0,A.Ru)("goal_clone_template_button")),U&&l.createElement(h.Ay,{size:"large",onClick:function(){ce(!0)},icon:l.createElement(D.A,null),className:"view-goals-button is-deep"},(0,A.Ru)("my_goals"))),l.createElement(G,{type:"secondary"},(0,A.Ru)("goal_shared_powered_by"))))),l.createElement(x.A,{title:(0,A.Ru)("my_goals"),placement:"right",open:ie,onClose:function(){return ce(!1)},width:480,className:"my-goals-drawer"},pe?l.createElement(d.A,{active:!0,paragraph:{rows:4}}):me&&0!==me.length?l.createElement("div",{className:"goals-list"},me.map((function(e,t){return l.createElement(I.P.div,{key:e._id,className:"goal-item",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.05*t}},l.createElement(F.A,{goal:e,onArchive:he,onClick:function(e){return Y("/goals/".concat(e))}}))}))):l.createElement(f.A,{description:(0,A.Ru)("no_goals_found")})))}},88934:(e,t,a)=>{a.r(t),a.d(t,{default:()=>l});var o=a(31601),n=a.n(o),r=a(76314),s=a.n(r)()(n());s.push([e.id,'.shared-goal-preview{min-height:100vh;background:linear-gradient(135deg, var(--color-layout-bg) 0%, var(--color-secondary-bg) 100%);padding:40px 20px;display:flex;justify-content:center;align-items:flex-start}.shared-goal-preview .shared-goal-wrapper{max-width:800px;width:100%;animation:slideUp .5s ease-out}@keyframes slideUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.shared-goal-preview .main-content-card{background:var(--color-primary-bg);border-radius:20px;box-shadow:0 2px 16px rgba(0,0,0,.06);overflow:hidden;padding:48px 40px;transition:all .3s ease}.shared-goal-preview .hero-section{padding-bottom:32px;border-bottom:1px solid var(--color-border)}.shared-goal-preview .hero-section .goal-emoji{font-size:72px;line-height:1;margin-bottom:20px;display:inline-block;animation:animate-fade .6s ease-out}.shared-goal-preview .hero-section .goal-title{font-size:32px;font-weight:700;line-height:1.3;color:var(--color-text)}.shared-goal-preview .hero-section .priority-tag{font-size:13px;padding:4px 16px;border-radius:20px;border:none}.shared-goal-preview .description-section{padding:32px 0;border-bottom:1px solid var(--color-border)}.shared-goal-preview .description-section .goal-description{font-size:16px;line-height:1.7;color:var(--color-text-secondary);margin:0;text-align:center;max-width:600px;margin:0 auto}.shared-goal-preview .stats-row{margin:32px 0}.shared-goal-preview .stats-row .stat-item{padding:20px;background:var(--color-secondary-bg);transition:all .3s ease}.shared-goal-preview .stats-row .stat-item:hover{transform:translateY(-2px)}.shared-goal-preview .stats-row .stat-item .stat-icon{font-size:28px;color:var(--color-text-secondary);flex-shrink:0}.shared-goal-preview .stats-row .stat-item .stat-icon.stat-icon-blue{color:var(--color-link)}.shared-goal-preview .stats-row .stat-item .stat-icon.stat-icon-green{color:var(--color-green)}.shared-goal-preview .stats-row .stat-item .stat-content{gap:4px;min-width:0}.shared-goal-preview .stats-row .stat-item .stat-content .stat-label{font-size:13px}.shared-goal-preview .stats-row .stat-item .stat-content .stat-value{font-size:18px;font-weight:600}.shared-goal-preview .date-alert{margin:24px 0}.shared-goal-preview .milestones-section{margin:40px 0}.shared-goal-preview .milestones-section .section-header .anticon{font-size:20px;color:var(--color-link)}.shared-goal-preview .milestones-section .section-header h4{font-size:20px;font-weight:600}.shared-goal-preview .milestones-section .milestones-collapse .milestone-label{flex-wrap:wrap}.shared-goal-preview .milestones-section .milestones-collapse .milestone-label .milestone-check{color:var(--color-green);font-size:16px}.shared-goal-preview .milestones-section .milestones-collapse .milestone-label .milestone-date{margin-left:auto}.shared-goal-preview .milestones-section .milestones-collapse .milestone-content{padding:16px 0 8px}.shared-goal-preview .milestones-section .milestones-collapse .milestone-content .actions-list{margin-top:16px;padding:16px;background:var(--color-secondary-bg);border-radius:8px}.shared-goal-preview .milestones-section .milestones-collapse .milestone-content .actions-list .actions-header{font-size:12px;text-transform:uppercase;letter-spacing:.5px;display:block;margin-bottom:12px}.shared-goal-preview .milestones-section .milestones-collapse .milestone-content .actions-list ul{margin:0;padding-left:20px;list-style:none}.shared-goal-preview .milestones-section .milestones-collapse .milestone-content .actions-list ul li{position:relative;padding-left:20px;margin-bottom:8px;line-height:1.6}.shared-goal-preview .milestones-section .milestones-collapse .milestone-content .actions-list ul li::before{content:"\u2192";position:absolute;left:0;color:var(--color-link);font-weight:bold}.shared-goal-preview .milestones-section .milestones-collapse .milestone-content .actions-list ul li:last-child{margin-bottom:0}.shared-goal-preview .cta-section{margin-top:48px;padding-top:32px;border-top:1px solid var(--color-border)}.shared-goal-preview .cta-section .cta-buttons{margin-bottom:16px}.shared-goal-preview .cta-section .view-goals-button{height:52px;border-color:var(--color-primary);color:var(--color-primary)}.shared-goal-preview .cta-section .cta-button{height:52px;font-weight:600}@media(max-width: 768px){.shared-goal-preview{padding:20px 16px}.shared-goal-preview .main-content-card{padding:32px 24px;border-radius:16px}.shared-goal-preview .hero-section .goal-emoji{font-size:56px}.shared-goal-preview .hero-section .goal-title{font-size:24px}.shared-goal-preview .description-section .goal-description{font-size:15px}.shared-goal-preview .stats-row .stat-item{padding:16px}.shared-goal-preview .milestones-section .milestone-label{font-size:14px}.shared-goal-preview .cta-section{margin-top:32px;padding-top:24px}.shared-goal-preview .cta-section .cta-buttons{flex-wrap:wrap}.shared-goal-preview .cta-section .cta-buttons .view-goals-button,.shared-goal-preview .cta-section .cta-buttons .cta-button{height:48px}.shared-goal-preview .cta-section .cta-buttons .view-goals-button{width:100%;margin-bottom:12px}.shared-goal-preview .cta-section .cta-buttons .cta-button{width:100%}}.my-goals-drawer .goals-list{display:flex;flex-direction:column;gap:16px}.my-goals-drawer .goals-list .goal-item{transition:all .3s ease}.my-goals-drawer .goals-list .goal-item:hover{transform:translateY(-2px)}.my-goals-drawer .ant-drawer-body{padding:24px 16px}',""]);const l=s},27347:(e,t,a)=>{var o=a(85072),n=a.n(o),r=a(97825),s=a.n(r),l=a(77659),i=a.n(l),c=a(55056),d=a.n(c),m=a(10540),p=a.n(m),g=a(41113),u=a.n(g),v=a(88934),h={};h.styleTagTransform=u(),h.setAttributes=d(),h.insert=i().bind(null,"head"),h.domAPI=s(),h.insertStyleElement=p();var x=n()(v.default,h);if(!v.default.locals||e.hot.invalidate){var f=!v.default.locals,w=f?v:v.default.locals;e.hot.accept(88934,(t=>{v=a(88934),function(e,t,a){if(!e&&t||e&&!t)return!1;var o;for(o in e)if((!a||"default"!==o)&&e[o]!==t[o])return!1;for(o in t)if(!(a&&"default"===o||e[o]))return!1;return!0}(w,f?v:v.default.locals,f)?(w=f?v:v.default.locals,x(v.default)):e.hot.invalidate()}))}e.hot.dispose((function(){x()}));v.default&&v.default.locals&&v.default.locals}}]);