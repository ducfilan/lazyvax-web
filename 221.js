"use strict";(self.webpackChunklazyvax_ext=self.webpackChunklazyvax_ext||[]).push([[221],{27347:(e,t,a)=>{var n=a(85072),r=a.n(n),o=a(97825),s=a.n(o),l=a(77659),i=a.n(l),c=a(55056),d=a.n(c),m=a(10540),p=a.n(m),g=a(41113),u=a.n(g),v=a(88934),h={};h.styleTagTransform=u(),h.setAttributes=d(),h.insert=i().bind(null,"head"),h.domAPI=s(),h.insertStyleElement=p();var x=r()(v.default,h);if(!v.default.locals||e.hot.invalidate){var f=!v.default.locals,w=f?v:v.default.locals;e.hot.accept(88934,t=>{v=a(88934),function(e,t,a){if(!e&&t||e&&!t)return!1;var n;for(n in e)if((!a||"default"!==n)&&e[n]!==t[n])return!1;for(n in t)if(!(a&&"default"===n||e[n]))return!1;return!0}(w,f?v:v.default.locals,f)?(w=f?v:v.default.locals,x(v.default)):e.hot.invalidate()})}e.hot.dispose(function(){x()});v.default&&v.default.locals&&v.default.locals},30221:(e,t,a)=>{a.d(t,{SharedGoalPreview:()=>B});var n=a(10467),r=a(80296),o=a(54756),s=a.n(o),l=(a(27347),a(96540)),i=a(27197),c=a(98060),d=a(38349),m=a(16370),p=a(39356),g=a(1849),u=a(17308),v=a(47152),h=a(97072),x=a(78995),f=a(66048),w=a(47767),b=a(33930),y=a(97665),E=a(57097),N=a(86220),A=a(42569),_=a(2622),k=a(16172),z=a(18373),R=a(92089),D=a(26362),M=a(71295),S=a(34665),C=a(56179),j=a(1636),P=a(32977),T=a(95927),K=a(76531),F=a(34338),I=a(68335),G=f.A.Title,q=f.A.Text,Y=f.A.Paragraph,B=function(){var e,t,a,o,f=(0,w.g)().shareToken,B=(0,w.Zp)(),L=(0,y.jE)(),U=(0,T.S)().user,Z=(0,l.useState)(null),J=(0,r.A)(Z,2),Q=J[0],X=J[1],H=(0,l.useState)(!0),O=(0,r.A)(H,2),V=O[0],W=O[1],$=(0,l.useState)(null),ee=(0,r.A)($,2),te=ee[0],ae=ee[1],ne=(0,l.useState)(!1),re=(0,r.A)(ne,2),oe=re[0],se=re[1],le=(0,l.useState)(!1),ie=(0,r.A)(le,2),ce=ie[0],de=ie[1],me=(0,b.I)({queryKey:["goals"],queryFn:(o=(0,n.A)(s().mark(function e(){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,N.DX)());case 1:case"end":return e.stop()}},e)})),function(){return o.apply(this,arguments)}),enabled:null!==U&&ce}),pe=me.data,ge=me.isLoading,ue=(0,E.n)({mutationFn:N.Au,onSuccess:function(){L.invalidateQueries({queryKey:["goals"]})}}),ve=(0,l.useCallback)((0,n.A)(s().mark(function e(){var t;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=1,(0,N.Db)(f);case 1:"error"in(t=e.sent)?ae(t.error):X(t),e.next=3;break;case 2:e.prev=2,e.catch(0),ae((0,A.Ru)("unexpected_error_message"));case 3:return e.prev=3,W(!1),e.finish(3);case 4:case"end":return e.stop()}},e,null,[[0,2,3,4]])})),[f]);(0,l.useEffect)(function(){f&&ve()},[f,ve]);var he=function(){var e=(0,n.A)(s().mark(function e(){var t,a,n;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(U){e.next=1;break}return B("/login?returnTo=/goals/shared/".concat(f)),e.abrupt("return");case 1:return se(!0),e.prev=2,e.next=3,(0,N.qK)(f);case 3:t=e.sent,B("/goals/".concat(t.goalId)),e.next=5;break;case 4:e.prev=4,n=e.catch(2),404===(null===(a=n.response)||void 0===a?void 0:a.status)?ae((0,A.Ru)("goal_shared_no_longer_available")):ae((0,A.Ru)("unexpected_error_message"));case 5:return e.prev=5,se(!1),e.finish(5);case 6:case"end":return e.stop()}},e,null,[[2,4,5,6]])}));return function(){return e.apply(this,arguments)}}(),xe=function(e){ue.mutate(e)};if(V)return l.createElement("div",{className:"shared-goal-preview"},l.createElement(d.A,{className:"shared-goal-container",bordered:!1},l.createElement(h.A,{active:!0,paragraph:{rows:8}})));if(te||!Q)return l.createElement("div",{className:"shared-goal-preview"},l.createElement(d.A,{className:"shared-goal-container",variant:"borderless"},l.createElement(i.A,{message:(0,A.Ru)("goal_shared_no_longer_available"),description:te,type:"error",showIcon:!0})));var fe=function(){if(null==Q||!Q.fromDate||null==Q||!Q.deadline)return null;var e=new Date,t=new Date(Q.fromDate),a=new Date(Q.deadline),n=(0,z.c)(t,e),r=(0,z.c)(a,t),o=(0,k.f)(e,n);return{newFromDate:o,newDeadline:(0,k.f)(o,r)}}(),we=(null===(e=K.Z.find(function(e){return e.value===Q.priority}))||void 0===e?void 0:e.label)||"",be=(null===(t=Q.milestones)||void 0===t?void 0:t.reduce(function(e,t){var a;return e+((null===(a=t.actions)||void 0===a?void 0:a.length)||0)},0))||0;return l.createElement("div",{className:"shared-goal-preview"},l.createElement("div",{className:"shared-goal-wrapper"},l.createElement(i.A,{message:(0,A.Ru)("goal_shared_template_banner"),type:"info",showIcon:!0,icon:l.createElement(P.A,null),closable:!0}),l.createElement(d.A,{className:"main-content-card top-16px",variant:"borderless"},l.createElement("div",{className:"hero-section is-center"},Q.emoji&&l.createElement("div",{className:"goal-emoji"},Q.emoji),l.createElement(G,{level:1,className:"goal-title margin-0 bot-16px"},Q.title),we&&l.createElement(x.A,{color:"blue",className:"priority-tag"},we)),Q.detail&&l.createElement("div",{className:"description-section"},l.createElement(Y,{className:"goal-description"},Q.detail)),l.createElement(v.A,{gutter:[16,16],className:"stats-row justify-center"},fe&&l.createElement(m.A,{xs:24,sm:8},l.createElement("div",{className:"stat-item flex align-center gap-x-16 border-radius-12px"},l.createElement(D.A,{className:"stat-icon"}),l.createElement("div",{className:"stat-content flex-col"},l.createElement(q,{type:"secondary",className:"stat-label"},(0,A.Ru)("goal_start_date")),l.createElement(q,{strong:!0,className:"stat-value"},(0,R.GP)(fe.newFromDate,"MMM d, yyyy"))))),Q.milestones&&Q.milestones.length>0&&l.createElement(m.A,{xs:24,sm:8},l.createElement("div",{className:"stat-item flex align-center gap-x-16 border-radius-12px"},l.createElement(j.A,{className:"stat-icon stat-icon-blue"}),l.createElement("div",{className:"stat-content flex-col"},l.createElement(q,{type:"secondary",className:"stat-label"},(0,A.Ru)("goal_milestones")),l.createElement(q,{strong:!0,className:"stat-value"},Q.milestones.length)))),be>0&&l.createElement(m.A,{xs:24,sm:8},l.createElement("div",{className:"stat-item flex align-center gap-x-16 border-radius-12px"},l.createElement(M.A,{className:"stat-icon stat-icon-green"}),l.createElement("div",{className:"stat-content flex-col"},l.createElement(q,{type:"secondary",className:"stat-label"},(0,A.Ru)("goal_actions")),l.createElement(q,{strong:!0,className:"stat-value"},be))))),fe&&l.createElement(i.A,{message:(0,_.JT)((0,A.Ru)("goal_clone_date_preview"),[{key:"newFromDate",value:(0,R.GP)(fe.newFromDate,"MMM d, yyyy")}]),type:"info",showIcon:!0,className:"date-alert border-radius-12px"}),Q.sharedKnowledgeBases&&Q.sharedKnowledgeBases.length>0&&l.createElement("div",{className:"resources-section top-24px"},l.createElement("div",{className:"section-header flex align-center gap-x-12 bot-16px"},l.createElement(C.A,null),l.createElement(G,{level:4,className:"margin-0"},(0,A.Ru)("goal_shared_resources_title"))),l.createElement(d.A,{className:"resources-card",variant:"borderless"},Q.sharedKnowledgeBases.map(function(e,t){return l.createElement("div",{key:e._id||t,className:"resource-item flex align-center gap-x-12 bot-12px"},l.createElement(C.A,{style:{fontSize:16}}),l.createElement("div",{className:"flex-col"},l.createElement(q,{strong:!0},e.fileName),l.createElement(q,{type:"secondary",style:{fontSize:12}},e.chunkCount," chunks \u2022 ",(0,R.GP)(new Date(e.uploadedAt),"MMM d, yyyy"))))}),l.createElement(q,{type:"secondary",style:{fontSize:12,display:"block",marginTop:8}},(0,A.Ru)("goal_shared_resources_cloned")))),Q.milestones&&Q.milestones.length>0&&l.createElement("div",{className:"milestones-section"},l.createElement("div",{className:"section-header flex align-center gap-x-12 bot-16px"},l.createElement(j.A,null),l.createElement(G,{level:4,className:"margin-0"},(0,A.Ru)("goal_milestones_title"))),l.createElement(p.A,{className:"milestones-collapse",ghost:!0,items:Q.milestones.sort(function(e,t){return e.order-t.order}).map(function(e){return{key:e._id,label:l.createElement("div",{className:"milestone-label flex align-center gap-x-12"},l.createElement(M.A,{className:"milestone-check"}),l.createElement(q,{strong:!0},e.milestone),e.deadline&&l.createElement(x.A,{bordered:!1,color:"blue",className:"milestone-date"},l.createElement(D.A,null)," ",(0,R.GP)(new Date(e.deadline),"MMM d"))),children:l.createElement("div",{className:"milestone-content"},e.description&&l.createElement(Y,null,e.description),e.actions&&e.actions.length>0&&l.createElement("div",{className:"actions-list"},l.createElement(q,{type:"secondary",className:"actions-header"},e.actions.length," ",(0,A.Ru)("goal_actions").toLowerCase()),l.createElement("ul",null,e.actions.sort(function(e,t){return e.order-t.order}).map(function(e){return l.createElement("li",{key:e._id},l.createElement("span",null,e.action),e.description&&l.createElement(q,{type:"secondary",className:"action-description"},"\n".concat(e.description)))}))))}}),defaultActiveKey:null===(a=Q.milestones[0])||void 0===a?void 0:a._id})),l.createElement("div",{className:"cta-section flex-col align-center gap-x-16"},l.createElement("div",{className:"cta-buttons flex no-wrap gap-x-12 width-100per"},l.createElement(c.Ay,{type:"primary",size:"large",onClick:he,loading:oe,icon:l.createElement(S.A,null),className:"cta-button is-deep flex-1"},(0,A.Ru)("goal_clone_template_button")),U&&l.createElement(c.Ay,{size:"large",onClick:function(){de(!0)},icon:l.createElement(P.A,null),className:"view-goals-button is-deep"},(0,A.Ru)("my_goals"))),l.createElement(q,{type:"secondary"},(0,A.Ru)("goal_shared_powered_by"))))),l.createElement(g.A,{title:(0,A.Ru)("my_goals"),placement:"right",open:ce,onClose:function(){return de(!1)},width:480,className:"my-goals-drawer"},ge?l.createElement(h.A,{active:!0,paragraph:{rows:4}}):pe&&0!==pe.length?l.createElement("div",{className:"goals-list"},pe.map(function(e,t){return l.createElement(I.P.div,{key:e._id,className:"goal-item",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.05*t}},l.createElement(F.A,{goal:e,onArchive:xe,onClick:function(e){return B("/goals/".concat(e))}}))})):l.createElement(u.A,{description:(0,A.Ru)("no_goals_found")})))}},88934:(e,t,a)=>{a.r(t),a.d(t,{default:()=>l});var n=a(31601),r=a.n(n),o=a(76314),s=a.n(o)()(r());s.push([e.id,'.shared-goal-preview{min-height:100vh;background:linear-gradient(135deg, var(--color-layout-bg) 0%, var(--color-secondary-bg) 100%);padding:40px 20px;display:flex;justify-content:center;align-items:flex-start}.shared-goal-preview .shared-goal-wrapper{max-width:800px;width:100%;animation:slideUp .5s ease-out}@keyframes slideUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.shared-goal-preview .main-content-card{background:var(--color-primary-bg);border-radius:20px;box-shadow:0 2px 16px rgba(0,0,0,.06);overflow:hidden;padding:48px 40px;transition:all .3s ease}.shared-goal-preview .hero-section{padding-bottom:32px;border-bottom:1px solid var(--color-border)}.shared-goal-preview .hero-section .goal-emoji{font-size:72px;line-height:1;margin-bottom:20px;display:inline-block;animation:animate-fade .6s ease-out}.shared-goal-preview .hero-section .goal-title{font-size:32px;font-weight:700;line-height:1.3;color:var(--color-text)}.shared-goal-preview .hero-section .priority-tag{font-size:13px;padding:4px 16px;border-radius:20px;border:none}.shared-goal-preview .description-section{padding:32px 0;border-bottom:1px solid var(--color-border)}.shared-goal-preview .description-section .goal-description{font-size:16px;line-height:1.7;color:var(--color-text-secondary);margin:0;text-align:center;max-width:600px;margin:0 auto}.shared-goal-preview .stats-row{margin:32px 0}.shared-goal-preview .stats-row .stat-item{padding:20px;background:var(--color-secondary-bg);transition:all .3s ease}.shared-goal-preview .stats-row .stat-item:hover{transform:translateY(-2px)}.shared-goal-preview .stats-row .stat-item .stat-icon{font-size:28px;color:var(--color-text-secondary);flex-shrink:0}.shared-goal-preview .stats-row .stat-item .stat-icon.stat-icon-blue{color:var(--color-link)}.shared-goal-preview .stats-row .stat-item .stat-icon.stat-icon-green{color:var(--color-green)}.shared-goal-preview .stats-row .stat-item .stat-content{gap:4px;min-width:0}.shared-goal-preview .stats-row .stat-item .stat-content .stat-label{font-size:13px}.shared-goal-preview .stats-row .stat-item .stat-content .stat-value{font-size:18px;font-weight:600}.shared-goal-preview .date-alert{margin:24px 0}.shared-goal-preview .milestones-section{margin:40px 0}.shared-goal-preview .milestones-section .section-header .anticon{font-size:20px;color:var(--color-link)}.shared-goal-preview .milestones-section .section-header h4{font-size:20px;font-weight:600}.shared-goal-preview .milestones-section .milestones-collapse .milestone-label{flex-wrap:wrap}.shared-goal-preview .milestones-section .milestones-collapse .milestone-label .milestone-check{color:var(--color-green);font-size:16px}.shared-goal-preview .milestones-section .milestones-collapse .milestone-label .milestone-date{margin-left:auto}.shared-goal-preview .milestones-section .milestones-collapse .milestone-content{padding:16px 0 8px}.shared-goal-preview .milestones-section .milestones-collapse .milestone-content .actions-list{margin-top:16px;padding:16px;background:var(--color-secondary-bg);border-radius:8px}.shared-goal-preview .milestones-section .milestones-collapse .milestone-content .actions-list .actions-header{font-size:12px;text-transform:uppercase;letter-spacing:.5px;display:block;margin-bottom:12px}.shared-goal-preview .milestones-section .milestones-collapse .milestone-content .actions-list ul{margin:0;padding-left:20px;list-style:none}.shared-goal-preview .milestones-section .milestones-collapse .milestone-content .actions-list ul li{position:relative;padding-left:20px;margin-bottom:8px;line-height:1.6}.shared-goal-preview .milestones-section .milestones-collapse .milestone-content .actions-list ul li::before{content:"\u2192";position:absolute;left:0;color:var(--color-link);font-weight:bold}.shared-goal-preview .milestones-section .milestones-collapse .milestone-content .actions-list ul li:last-child{margin-bottom:0}.shared-goal-preview .cta-section{margin-top:48px;padding-top:32px;border-top:1px solid var(--color-border)}.shared-goal-preview .cta-section .cta-buttons{margin-bottom:16px}.shared-goal-preview .cta-section .view-goals-button{height:52px;border-color:var(--color-primary);color:var(--color-primary)}.shared-goal-preview .cta-section .cta-button{height:52px;font-weight:600}@media(max-width: 768px){.shared-goal-preview{padding:20px 16px}.shared-goal-preview .main-content-card{padding:32px 24px;border-radius:16px}.shared-goal-preview .hero-section .goal-emoji{font-size:56px}.shared-goal-preview .hero-section .goal-title{font-size:24px}.shared-goal-preview .description-section .goal-description{font-size:15px}.shared-goal-preview .stats-row .stat-item{padding:16px}.shared-goal-preview .milestones-section .milestone-label{font-size:14px}.shared-goal-preview .cta-section{margin-top:32px;padding-top:24px}.shared-goal-preview .cta-section .cta-buttons{flex-wrap:wrap}.shared-goal-preview .cta-section .cta-buttons .view-goals-button,.shared-goal-preview .cta-section .cta-buttons .cta-button{height:48px}.shared-goal-preview .cta-section .cta-buttons .view-goals-button{width:100%;margin-bottom:12px}.shared-goal-preview .cta-section .cta-buttons .cta-button{width:100%}}.my-goals-drawer .goals-list{display:flex;flex-direction:column;gap:16px}.my-goals-drawer .goals-list .goal-item{transition:all .3s ease}.my-goals-drawer .goals-list .goal-item:hover{transform:translateY(-2px)}.my-goals-drawer .ant-drawer-body{padding:24px 16px}',""]);const l=s}}]);