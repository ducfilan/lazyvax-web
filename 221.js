"use strict";(self.webpackChunklazyvax_ext=self.webpackChunklazyvax_ext||[]).push([[221],{30221:(e,t,a)=>{a.r(t),a.d(t,{SharedGoalPreview:()=>P});var s=a(10467),o=a(5544),r=a(54756),n=a.n(r),l=(a(27347),a(96540)),i=a(55166),c=a(677),d=a(97072),m=a(77796),p=a(56914),g=a(47152),u=a(16370),v=a(39356),h=a(64132),x=a(47767),f=a(86220),w=a(42569),b=a(2622),E=a(18373),y=a(16172),N=a(92089),_=a(32977),A=a(26362),k=a(63411),z=a(71295),R=a(34665),D=a(95927),M=a(76531),j=i.A.Title,S=i.A.Text,T=i.A.Paragraph,P=function(){var e,t,a,r=(0,x.g)().shareToken,i=(0,x.Zp)(),P=(0,D.S)().user,C=(0,l.useState)(null),I=(0,o.A)(C,2),F=I[0],G=I[1],Y=(0,l.useState)(!0),K=(0,o.A)(Y,2),U=K[0],Z=K[1],q=(0,l.useState)(null),J=(0,o.A)(q,2),L=J[0],B=J[1],H=(0,l.useState)(!1),O=(0,o.A)(H,2),Q=O[0],V=O[1],W=(0,l.useCallback)((0,s.A)(n().mark((function e(){var t;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,f.Db)(r);case 3:"error"in(t=e.sent)?B(t.error):G(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),B((0,w.Ru)("unexpected_error_message"));case 10:return e.prev=10,Z(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,7,10,13]])}))),[r]);(0,l.useEffect)((function(){r&&W()}),[r,W]);var X=function(){var e=(0,s.A)(n().mark((function e(){var t,a;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P){e.next=3;break}return i("/login?returnTo=/goals/shared/".concat(r)),e.abrupt("return");case 3:return V(!0),e.prev=4,e.next=7,(0,f.qK)(r);case 7:t=e.sent,i("/goals/".concat(t.goalId)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),404===(null===(a=e.t0.response)||void 0===a?void 0:a.status)?B((0,w.Ru)("goal_shared_no_longer_available")):B((0,w.Ru)("unexpected_error_message"));case 14:return e.prev=14,V(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[4,11,14,17]])})));return function(){return e.apply(this,arguments)}}();if(U)return l.createElement("div",{className:"shared-goal-preview"},l.createElement(c.A,{className:"shared-goal-container",bordered:!1},l.createElement(d.A,{active:!0,paragraph:{rows:8}})));if(L||!F)return l.createElement("div",{className:"shared-goal-preview"},l.createElement(c.A,{className:"shared-goal-container",variant:"borderless"},l.createElement(m.A,{message:(0,w.Ru)("goal_shared_no_longer_available"),description:L,type:"error",showIcon:!0})));var $=function(){if(null==F||!F.fromDate||null==F||!F.deadline)return null;var e=new Date,t=new Date(F.fromDate),a=new Date(F.deadline),s=(0,E.c)(t,e),o=(0,E.c)(a,t),r=(0,y.f)(e,s);return{newFromDate:r,newDeadline:(0,y.f)(r,o)}}(),ee=(null===(e=M.Z.find((function(e){return e.value===F.priority})))||void 0===e?void 0:e.label)||"",te=(null===(t=F.milestones)||void 0===t?void 0:t.reduce((function(e,t){var a;return e+((null===(a=t.actions)||void 0===a?void 0:a.length)||0)}),0))||0;return l.createElement("div",{className:"shared-goal-preview"},l.createElement("div",{className:"shared-goal-wrapper"},l.createElement(m.A,{message:(0,w.Ru)("goal_shared_template_banner"),type:"info",showIcon:!0,icon:l.createElement(_.A,null),closable:!0}),l.createElement(c.A,{className:"main-content-card top-16px",variant:"borderless"},l.createElement("div",{className:"hero-section is-center"},F.emoji&&l.createElement("div",{className:"goal-emoji"},F.emoji),l.createElement(j,{level:1,className:"goal-title margin-0 bot-16px"},F.title),ee&&l.createElement(p.A,{color:"blue",className:"priority-tag"},ee)),F.detail&&l.createElement("div",{className:"description-section"},l.createElement(T,{className:"goal-description"},F.detail)),l.createElement(g.A,{gutter:[16,16],className:"stats-row justify-center"},$&&l.createElement(u.A,{xs:24,sm:8},l.createElement("div",{className:"stat-item flex align-center gap-x-16 border-radius-12px"},l.createElement(A.A,{className:"stat-icon"}),l.createElement("div",{className:"stat-content flex-col"},l.createElement(S,{type:"secondary",className:"stat-label"},(0,w.Ru)("goal_start_date")),l.createElement(S,{strong:!0,className:"stat-value"},(0,N.GP)($.newFromDate,"MMM d, yyyy"))))),F.milestones&&F.milestones.length>0&&l.createElement(u.A,{xs:24,sm:8},l.createElement("div",{className:"stat-item flex align-center gap-x-16 border-radius-12px"},l.createElement(k.A,{className:"stat-icon stat-icon-blue"}),l.createElement("div",{className:"stat-content flex-col"},l.createElement(S,{type:"secondary",className:"stat-label"},(0,w.Ru)("goal_milestones")),l.createElement(S,{strong:!0,className:"stat-value"},F.milestones.length)))),te>0&&l.createElement(u.A,{xs:24,sm:8},l.createElement("div",{className:"stat-item flex align-center gap-x-16 border-radius-12px"},l.createElement(z.A,{className:"stat-icon stat-icon-green"}),l.createElement("div",{className:"stat-content flex-col"},l.createElement(S,{type:"secondary",className:"stat-label"},(0,w.Ru)("goal_actions")),l.createElement(S,{strong:!0,className:"stat-value"},te))))),$&&l.createElement(m.A,{message:(0,b.JT)((0,w.Ru)("goal_clone_date_preview"),[{key:"newFromDate",value:(0,N.GP)($.newFromDate,"MMM d, yyyy")}]),type:"info",showIcon:!0,className:"date-alert border-radius-12px"}),F.milestones&&F.milestones.length>0&&l.createElement("div",{className:"milestones-section"},l.createElement("div",{className:"section-header flex align-center gap-x-12 bot-16px"},l.createElement(k.A,null),l.createElement(j,{level:4,className:"margin-0"},(0,w.Ru)("goal_milestones_title"))),l.createElement(v.A,{className:"milestones-collapse",ghost:!0,items:F.milestones.sort((function(e,t){return e.order-t.order})).map((function(e){return{key:e._id,label:l.createElement("div",{className:"milestone-label flex align-center gap-x-12"},l.createElement(z.A,{className:"milestone-check"}),l.createElement(S,{strong:!0},e.milestone),e.deadline&&l.createElement(p.A,{bordered:!1,color:"blue",className:"milestone-date"},l.createElement(A.A,null)," ",(0,N.GP)(new Date(e.deadline),"MMM d"))),children:l.createElement("div",{className:"milestone-content"},e.description&&l.createElement(T,null,e.description),e.actions&&e.actions.length>0&&l.createElement("div",{className:"actions-list"},l.createElement(S,{type:"secondary",className:"actions-header"},e.actions.length," ",(0,w.Ru)("goal_actions").toLowerCase()),l.createElement("ul",null,e.actions.sort((function(e,t){return e.order-t.order})).map((function(e){return l.createElement("li",{key:e._id},e.action)})))))}})),defaultActiveKey:null===(a=F.milestones[0])||void 0===a?void 0:a._id})),l.createElement("div",{className:"cta-section flex-col align-center gap-x-16"},l.createElement(h.Ay,{type:"primary",size:"large",onClick:X,loading:Q,icon:l.createElement(R.A,null),block:!0,className:"cta-button is-deep"},(0,w.Ru)("goal_clone_template_button")),l.createElement(S,{type:"secondary"},(0,w.Ru)("goal_shared_powered_by"))))))}},88934:(e,t,a)=>{a.r(t),a.d(t,{default:()=>l});var s=a(31601),o=a.n(s),r=a(76314),n=a.n(r)()(o());n.push([e.id,'.shared-goal-preview{min-height:100vh;background:linear-gradient(135deg, var(--color-layout-bg) 0%, var(--color-secondary-bg) 100%);padding:40px 20px;display:flex;justify-content:center;align-items:flex-start}.shared-goal-preview .shared-goal-wrapper{max-width:800px;width:100%;animation:slideUp .5s ease-out}@keyframes slideUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.shared-goal-preview .main-content-card{background:var(--color-primary-bg);border-radius:20px;box-shadow:0 2px 16px rgba(0,0,0,.06);overflow:hidden;padding:48px 40px;transition:all .3s ease}.shared-goal-preview .hero-section{padding-bottom:32px;border-bottom:1px solid var(--color-border)}.shared-goal-preview .hero-section .goal-emoji{font-size:72px;line-height:1;margin-bottom:20px;display:inline-block;animation:animate-fade .6s ease-out}.shared-goal-preview .hero-section .goal-title{font-size:32px;font-weight:700;line-height:1.3;color:var(--color-text)}.shared-goal-preview .hero-section .priority-tag{font-size:13px;padding:4px 16px;border-radius:20px;border:none}.shared-goal-preview .description-section{padding:32px 0;border-bottom:1px solid var(--color-border)}.shared-goal-preview .description-section .goal-description{font-size:16px;line-height:1.7;color:var(--color-text-secondary);margin:0;text-align:center;max-width:600px;margin:0 auto}.shared-goal-preview .stats-row{margin:32px 0}.shared-goal-preview .stats-row .stat-item{padding:20px;background:var(--color-secondary-bg);transition:all .3s ease}.shared-goal-preview .stats-row .stat-item:hover{transform:translateY(-2px)}.shared-goal-preview .stats-row .stat-item .stat-icon{font-size:28px;color:var(--color-text-secondary);flex-shrink:0}.shared-goal-preview .stats-row .stat-item .stat-icon.stat-icon-blue{color:var(--color-link)}.shared-goal-preview .stats-row .stat-item .stat-icon.stat-icon-green{color:var(--color-green)}.shared-goal-preview .stats-row .stat-item .stat-content{gap:4px;min-width:0}.shared-goal-preview .stats-row .stat-item .stat-content .stat-label{font-size:13px}.shared-goal-preview .stats-row .stat-item .stat-content .stat-value{font-size:18px;font-weight:600}.shared-goal-preview .date-alert{margin:24px 0}.shared-goal-preview .milestones-section{margin:40px 0}.shared-goal-preview .milestones-section .section-header .anticon{font-size:20px;color:var(--color-link)}.shared-goal-preview .milestones-section .section-header h4{font-size:20px;font-weight:600}.shared-goal-preview .milestones-section .milestones-collapse .milestone-label{flex-wrap:wrap}.shared-goal-preview .milestones-section .milestones-collapse .milestone-label .milestone-check{color:var(--color-green);font-size:16px}.shared-goal-preview .milestones-section .milestones-collapse .milestone-label .milestone-date{margin-left:auto}.shared-goal-preview .milestones-section .milestones-collapse .milestone-content{padding:16px 0 8px}.shared-goal-preview .milestones-section .milestones-collapse .milestone-content .actions-list{margin-top:16px;padding:16px;background:var(--color-secondary-bg);border-radius:8px}.shared-goal-preview .milestones-section .milestones-collapse .milestone-content .actions-list .actions-header{font-size:12px;text-transform:uppercase;letter-spacing:.5px;display:block;margin-bottom:12px}.shared-goal-preview .milestones-section .milestones-collapse .milestone-content .actions-list ul{margin:0;padding-left:20px;list-style:none}.shared-goal-preview .milestones-section .milestones-collapse .milestone-content .actions-list ul li{position:relative;padding-left:20px;margin-bottom:8px;line-height:1.6}.shared-goal-preview .milestones-section .milestones-collapse .milestone-content .actions-list ul li::before{content:"\u2192";position:absolute;left:0;color:var(--color-link);font-weight:bold}.shared-goal-preview .milestones-section .milestones-collapse .milestone-content .actions-list ul li:last-child{margin-bottom:0}.shared-goal-preview .cta-section{margin-top:48px;padding-top:32px;border-top:1px solid var(--color-border)}.shared-goal-preview .cta-section .cta-button{height:52px;font-weight:600}@media(max-width: 768px){.shared-goal-preview{padding:20px 16px}.shared-goal-preview .main-content-card{padding:32px 24px;border-radius:16px}.shared-goal-preview .hero-section .goal-emoji{font-size:56px}.shared-goal-preview .hero-section .goal-title{font-size:24px}.shared-goal-preview .description-section .goal-description{font-size:15px}.shared-goal-preview .stats-row .stat-item{padding:16px}.shared-goal-preview .milestones-section .milestone-label{font-size:14px}.shared-goal-preview .cta-section{margin-top:32px;padding-top:24px}}',""]);const l=n},27347:(e,t,a)=>{var s=a(85072),o=a.n(s),r=a(97825),n=a.n(r),l=a(77659),i=a.n(l),c=a(55056),d=a.n(c),m=a(10540),p=a.n(m),g=a(41113),u=a.n(g),v=a(88934),h={};h.styleTagTransform=u(),h.setAttributes=d(),h.insert=i().bind(null,"head"),h.domAPI=n(),h.insertStyleElement=p();var x=o()(v.default,h);if(!v.default.locals||e.hot.invalidate){var f=!v.default.locals,w=f?v:v.default.locals;e.hot.accept(88934,(t=>{v=a(88934),function(e,t,a){if(!e&&t||e&&!t)return!1;var s;for(s in e)if((!a||"default"!==s)&&e[s]!==t[s])return!1;for(s in t)if(!(a&&"default"===s||e[s]))return!1;return!0}(w,f?v:v.default.locals,f)?(w=f?v:v.default.locals,x(v.default)):e.hot.invalidate()}))}e.hot.dispose((function(){x()}));v.default&&v.default.locals&&v.default.locals}}]);