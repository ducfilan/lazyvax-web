"use strict";(self.webpackChunklazyvax_ext=self.webpackChunklazyvax_ext||[]).push([[254],{27254:(e,t,r)=>{r.r(t),r.d(t,{default:()=>M});var a=r(53986),n=r(10467),l=r(64467),s=r(5544),u=r(54756),o=r.n(u),i=r(96540),c=r(95927),m=r(66407),p=r(22395),d=r(71988),f=r(69036),g=r(47152),b=r(16370),v=r(17355),_=r(78751),E=r(84972),A=r(7142),x=r(37977),h=r(64132),y=r(88281),w=r(75704),R=r(14154),k=r(83186),O=r(42569),j=r(86319),I=(r(55081),r(47767)),P=r(82322),S=r(34468),C=r(2622),z=r(74353),N=r.n(z),T=r(59270),q=r(31598),F=r(98185),U=r(71468),D=r(54809),Z=["name","dob","locale","otherPreferences"];function J(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?J(Object(r),!0).forEach((function(t){(0,l.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var V=p.A.TabPane;const M=function(){var e,t,r=(0,U.wA)(),l=(0,c.S)(),u=l.user,z=l.setUser,J=d.A.useForm(),M=(0,s.A)(J,1)[0],B=(0,I.Zp)(),H=(0,i.useState)("1"),K=(0,s.A)(H,2),Y=K[0],G=K[1],W=(0,i.useState)(!1),$=(0,s.A)(W,2),Q=$[0],X=$[1],ee=(0,i.useState)([]),te=(0,s.A)(ee,2),re=te[0],ae=te[1],ne=(0,T.I)({queryKey:[q.EV],queryFn:F.BJ,retry:3}),le=ne.data,se=ne.isLoading,ue=ne.isError;if((0,i.useEffect)((function(){se||ue||ae(le||[])}),[le,se,ue]),(0,i.useEffect)((function(){var e;u&&M.setFieldsValue(L(L({name:u.name,locale:u.locale,pictureUrl:u.pictureUrl},u.preferences),{},{dob:null!==(e=u.preferences)&&void 0!==e&&e.dob?N()(u.preferences.dob):void 0}))}),[u,M]),!u)return i.createElement(i.Fragment,null);var oe=function(){var e=(0,n.A)(o().mark((function e(t){var n,l,s,i,c,m,p;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(X(!0),e.prev=1,l=t.name,s=t.dob,i=t.locale,c=t.otherPreferences,m=(0,a.A)(t,Z),i===u.locale){e.next=8;break}return(0,k.bT)(i),e.next=7,(0,O.$j)(i);case 7:r((0,D.xS)(i));case 8:return p={name:l,locale:i,preferences:L(L(L({},u.preferences),m),{},{otherPreferences:c})},e.next=11,(0,S.bu)(p);case 11:z(L(L({},u),{},{name:l,locale:i,preferences:L(L(L({},u.preferences),m),{},{otherPreferences:c,dob:s?s.toDate():null===(n=u.preferences)||void 0===n?void 0:n.dob,timezone:t.timezone||Intl.DateTimeFormat().resolvedOptions().timeZone})})),f.Ay.success((0,O.Ru)("common_success")),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),f.Ay.error((0,O.Ru)("common_retry"));case 18:return e.prev=18,X(!1),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[1,15,18,21]])})));return function(t){return e.apply(this,arguments)}}();return i.createElement("div",{className:"user-detail-wrapper flex-col"},i.createElement("h2",{className:"has-text-centered"},(0,C.JT)((0,O.Ru)("user_settings"),[{key:"user_name",value:u.name}])),i.createElement(d.A,{form:M,layout:"vertical",onFinish:oe,className:"user-settings-form flex-col flex-1",initialValues:L(L({name:u.name,locale:u.locale,pictureUrl:u.pictureUrl},u.preferences),{},{dob:null!==(e=u.preferences)&&void 0!==e&&e.dob?N()(u.preferences.dob):void 0,weekStart:(null===(t=u.preferences)||void 0===t?void 0:t.weekStart)||j.z})},i.createElement(p.A,{centered:!0,activeKey:Y,onChange:function(e){G(e)},className:"settings-tabs flex-1"},i.createElement(V,{tab:(0,O.Ru)("common_general"),key:"1"},i.createElement("div",{className:"tab-content"},i.createElement("div",{className:"profile-picture-section flex-col align-center"},i.createElement(m.A,{size:100,imageUrl:u.pictureUrl,fallbackCharacter:u.name[0]}),i.createElement("p",null,u.email)),i.createElement(g.A,{gutter:[24,0]},i.createElement(b.A,{xs:24,md:8},i.createElement(d.A.Item,{name:"name",label:(0,O.Ru)("user_settings_name"),rules:[{required:!0,message:(0,O.Ru)("required_field")},{max:255,message:(0,O.Ru)("max_length_field")}]},i.createElement(v.A,null))),i.createElement(b.A,{xs:24,md:8},i.createElement(d.A.Item,{name:"dob",label:(0,O.Ru)("user_settings_dob"),rules:[{validator:function(e,t){return t&&t.isAfter(N()())?Promise.reject((0,O.Ru)("dob_future_error")):Promise.resolve()}}]},i.createElement(_.A,{style:{width:"100%"}}))),i.createElement(b.A,{xs:24,md:8},i.createElement(d.A.Item,{name:"locale",label:(0,C.JT)((0,O.Ru)("user_settings_locale"),[{key:"bot_name",value:k.Zw}]),rules:[{type:"enum",enum:j.Z9.map((function(e){return e.code}))}]},i.createElement(E.A,{placeholder:(0,O.Ru)("select")},j.Z9.map((function(e){return i.createElement(E.A.Option,{key:e.code,value:e.code},e.name)})))))))),i.createElement(V,{tab:(0,C.Sn)((0,O.Ru)("profile")),key:"2"},i.createElement("div",{className:"tab-content"},i.createElement(g.A,{gutter:[24,0]},i.createElement(b.A,{xs:24,md:8},i.createElement(d.A.Item,{name:"age",label:(0,O.Ru)("user_settings_age_group"),rules:[{type:"enum",enum:w.s3.map((function(e){return e.value}))}]},i.createElement(E.A,null,w.s3.map((function(e){return i.createElement(E.A.Option,{key:e.value,value:e.value},e.value)}))))),i.createElement(b.A,{xs:24,md:8},i.createElement(d.A.Item,{name:"gender",label:(0,O.Ru)("user_settings_gender"),rules:[{type:"enum",enum:["male","female","other"]}]},i.createElement(E.A,{placeholder:(0,O.Ru)("select")},i.createElement(E.A.Option,{value:"male"},(0,O.Ru)("gender_male")),i.createElement(E.A.Option,{value:"female"},(0,O.Ru)("gender_female")),i.createElement(E.A.Option,{value:"other"},(0,O.Ru)("gender_other"))))),i.createElement(b.A,{xs:24,md:8},i.createElement(d.A.Item,{name:"maritalStatus",label:(0,O.Ru)("user_settings_marital_status"),rules:[{type:"number",min:0,max:8}]},i.createElement(E.A,{placeholder:(0,O.Ru)("select")},j.Ji.map((function(e){return i.createElement(E.A.Option,{key:e,value:e},(0,O.Ru)("marital_status_".concat(e)))})))))),i.createElement(g.A,{gutter:[24,0]},i.createElement(b.A,{xs:24,md:8},i.createElement(d.A.Item,{name:"userCategory",label:(0,O.Ru)("user_settings_user_category"),rules:[{type:"enum",enum:["professional","student"]}]},i.createElement(E.A,{placeholder:(0,O.Ru)("select")},i.createElement(E.A.Option,{value:"professional"},(0,O.Ru)("user_settings_user_category_professional")),i.createElement(E.A.Option,{value:"student"},(0,O.Ru)("user_settings_user_category_student"))))),i.createElement(d.A.Item,{noStyle:!0,dependencies:["userCategory"]},(function(e){var t=(0,e.getFieldValue)("userCategory");return"student"===t?i.createElement(i.Fragment,null,i.createElement(b.A,{xs:24,md:8},i.createElement(d.A.Item,{name:"degree",label:(0,O.Ru)("user_settings_degree"),rules:[{type:"enum",enum:w.a3.map((function(e){return e.value}))}]},i.createElement(E.A,null,w.a3.map((function(e){return i.createElement(E.A.Option,{key:e.value,value:e.value},e.label)}))))),i.createElement(b.A,{xs:24,md:8},i.createElement(d.A.Item,{name:"studyCourse",label:(0,O.Ru)("user_settings_study_course"),rules:[{max:255}]},i.createElement(E.A,{showSearch:!0},w.yC.map((function(e){return i.createElement(E.A.Option,{key:e.value,value:e.value},e.value)})))))):"professional"===t?i.createElement(i.Fragment,null,i.createElement(b.A,{xs:24,md:8},i.createElement(d.A.Item,{name:"yearsOfExperience",label:(0,O.Ru)("user_settings_years_of_experience"),rules:[{type:"number",min:0,max:100,message:(0,O.Ru)("years_experience_positive")}]},i.createElement(A.A,{min:0,max:100,style:{width:"100%"},suffix:(0,O.Ru)("questionnaires_years_of_experience")}))),i.createElement(b.A,{xs:24,md:8},i.createElement(d.A.Item,{name:"jobStatus",label:(0,O.Ru)("user_settings_job_status"),rules:[{type:"number",min:0,max:5}]},i.createElement(E.A,{placeholder:(0,O.Ru)("select")},i.createElement(E.A.Option,{value:j.kW},(0,O.Ru)("questionnaires_job_status_full_time")),i.createElement(E.A.Option,{value:j.eb},(0,O.Ru)("questionnaires_job_status_part_time")),i.createElement(E.A.Option,{value:j.fb},(0,O.Ru)("questionnaires_job_status_flexible")),i.createElement(E.A.Option,{value:j.sS},(0,O.Ru)("questionnaires_job_status_unemployed")),i.createElement(E.A.Option,{value:j.TM},(0,O.Ru)("questionnaires_job_status_retired")),i.createElement(E.A.Option,{value:j.oD},(0,O.Ru)("questionnaires_job_status_other"))))),i.createElement(b.A,{xs:24,md:12},i.createElement(d.A.Item,{name:"workerType",label:(0,O.Ru)("user_settings_worker_type"),rules:[{type:"enum",enum:w.Y3.map((function(e){return e.value}))}]},i.createElement(E.A,null,w.Y3.map((function(e){return i.createElement(E.A.Option,{key:e.value,value:e.value},e.label)}))))),i.createElement(b.A,{xs:24,md:12},i.createElement(d.A.Item,{name:"occupation",label:(0,O.Ru)("user_settings_occupation"),rules:[{max:255}]},i.createElement(E.A,{showSearch:!0},w.P0.map((function(e){return i.createElement(E.A.Option,{key:e.value,value:e.value},e.value)})))))):null}))))),i.createElement(V,{tab:(0,O.Ru)("other_preferences"),key:"3"},i.createElement("div",{className:"tab-content"},i.createElement(g.A,{gutter:[24,0]},i.createElement(b.A,{xs:24,md:12},i.createElement(d.A.Item,{name:"workLifeBalance",label:(0,O.Ru)("user_settings_work_life_balance"),rules:[{type:"enum",enum:[j.Cg,j.CH,j.jN]}]},i.createElement(E.A,{placeholder:(0,O.Ru)("select")},i.createElement(E.A.Option,{value:j.Cg},(0,O.Ru)("imagine_work_life_balance_work_important")),i.createElement(E.A.Option,{value:j.CH},(0,O.Ru)("imagine_work_life_balance_balanced")),i.createElement(E.A.Option,{value:j.jN},(0,O.Ru)("imagine_work_life_balance_life_important"))))),i.createElement(b.A,{xs:24,md:6},i.createElement(d.A.Item,{name:"preferredFocusSessionLengthMinutes",label:(0,O.Ru)("user_settings_preferred_focus_session_length"),rules:[{type:"number",min:15,max:600,message:(0,O.Ru)("focus_length_positive")}]},i.createElement(A.A,{min:15,max:600,addonAfter:(0,O.Ru)("common_minutes"),style:{width:"100%"}}))),i.createElement(b.A,{xs:24,md:6},i.createElement(d.A.Item,{name:"weekStart",label:(0,O.Ru)("user_settings_week_start")},i.createElement(E.A,null,i.createElement(E.A.Option,{key:0,value:0},(0,O.Ru)("sunday")),i.createElement(E.A.Option,{key:1,value:1},(0,O.Ru)("monday"))))),i.createElement(b.A,{xs:24,md:12},i.createElement(d.A.Item,{name:"timezone",label:(0,O.Ru)("timezone")},i.createElement(v.A,null))),i.createElement(b.A,{xs:24,md:12},i.createElement(d.A.Item,{name:"goalSettingCategory",label:(0,O.Ru)("user_settings_goal_setting_category"),rules:[{max:255}]},i.createElement(E.A,null,j.O5.map((function(e){return i.createElement(E.A.Option,{key:e,value:e},e)})))))),i.createElement(g.A,{gutter:[24,0]},i.createElement(b.A,{xs:24},i.createElement(d.A.Item,{name:"futureSelf",label:(0,O.Ru)("user_settings_future_self"),rules:[{type:"array"},{validator:function(e,t){return t&&t.some((function(e){return e.length>250}))?Promise.reject("Goal must be less than 250 characters long"):Promise.resolve()}}]},i.createElement(E.A,{mode:"multiple",loading:se,disabled:se,maxTagCount:6},ue?i.createElement("div",null,(0,O.Ru)("common_error")):re.flatMap((function(e){return e.suggestions.map((function(e){return i.createElement(E.A.Option,{key:e.adj,value:e.adj},i.createElement(x.A,{title:e.explain},e.adj))}))}))))),i.createElement(b.A,{xs:24},i.createElement(d.A.Item,{name:"aspects",label:(0,O.Ru)("user_settings_aspects"),rules:[{type:"array"},{validator:function(e,t){return t&&t.some((function(e){return e.length>250}))?Promise.reject("Aspect must be less than 250 characters long"):Promise.resolve()}}]},i.createElement(E.A,{mode:"multiple",maxTagCount:6},j.wc.map((function(e){return i.createElement(E.A.Option,{key:e.value,value:e.value},e.value)})))))),i.createElement(d.A.Item,{name:"otherPreferences",label:(0,C.JT)((0,O.Ru)("user_settings_other_preferences"),[{key:"bot_name",value:k.Zw}]),rules:[{max:2e3}]},i.createElement(P.A,{placeholder:(0,O.Ru)("other_preferences_example"),rows:4,maxLength:2e3,showCount:!0}))))),i.createElement("div",{className:"form-actions flex-row justify-between"},i.createElement(h.Ay,{type:"primary",htmlType:"submit",loading:Q,className:"is-deep"},(0,O.Ru)("common_save_changes")),i.createElement(h.Ay,{type:"primary",danger:!0,className:"is-deep",onClick:function(){(0,y.CI)((function(){(0,w.vU)(),z(),(0,R.P4)(),B(k.A2.path)}))}},(0,O.Ru)("logout")))))}},70276:(e,t,r)=>{r.r(t),r.d(t,{default:()=>u});var a=r(31601),n=r.n(a),l=r(76314),s=r.n(l)()(n());s.push([e.id,".user-detail-wrapper{background:var(--color-primary-bg);height:calc(100vh - 88px);padding:24px 16px;overflow-y:auto;border-radius:12px}@media(max-width: 768px){.user-detail-wrapper{height:calc(100% - 128px);height:calc(100vh - 128px);height:calc(100dvh - 128px)}}.user-detail-wrapper h2{margin-bottom:24px;color:var(--color-text);font-size:24px;font-weight:600}.user-detail-wrapper .user-settings-form{width:100%;margin:0 auto;background:var(--color-primary-bg)}.user-detail-wrapper .user-settings-form .settings-tabs .ant-tabs-nav{margin-bottom:32px}.user-detail-wrapper .user-settings-form .settings-tabs .ant-tabs-nav::before{border-bottom:1px solid var(--color-border)}.user-detail-wrapper .user-settings-form .settings-tabs .ant-tabs-nav .ant-tabs-tab{padding:12px 24px;font-size:16px}.user-detail-wrapper .user-settings-form .settings-tabs .ant-tabs-nav .ant-tabs-tab.ant-tabs-tab-active .ant-tabs-tab-btn{color:var(--color-primary);font-weight:500}.user-detail-wrapper .user-settings-form .settings-tabs .ant-tabs-ink-bar{background-color:var(--color-primary);height:3px}.user-detail-wrapper .user-settings-form .tab-content{padding:0 0 32px;min-height:400px;max-width:min(100vw,960px);margin:0 auto}.user-detail-wrapper .user-settings-form .profile-picture-section{margin-bottom:32px;text-align:center}.user-detail-wrapper .user-settings-form .profile-picture-section .ant-avatar{margin-bottom:16px;width:120px;height:120px;border:4px solid var(--color-primary-light)}.user-detail-wrapper .user-settings-form .profile-picture-section .image-upload-form-item{margin-bottom:0}.user-detail-wrapper .user-settings-form .ant-form-item{margin-bottom:24px}.user-detail-wrapper .user-settings-form .ant-form-item .ant-form-item-label>label{color:var(--color-text);font-weight:500}.user-detail-wrapper .user-settings-form .form-actions{margin-top:32px;padding-top:24px;border-top:1px solid var(--color-border)}.user-detail-wrapper .user-settings-form .form-actions button{min-width:120px}.user-detail-wrapper .ant-slider{margin:8px 0 24px}.user-detail-wrapper .ant-slider .ant-slider-track{background-color:var(--color-primary)}.user-detail-wrapper .ant-slider .ant-slider-handle{border-color:var(--color-primary)}.user-detail-wrapper .ant-slider .ant-slider-handle:hover,.user-detail-wrapper .ant-slider .ant-slider-handle:focus{border-color:var(--color-primary-bright)}.user-detail-wrapper .ant-select-multiple .ant-select-selection-item{background-color:var(--color-primary-light);border-color:var(--color-primary)}.user-detail-wrapper .ant-input-number-group-wrapper{width:100%}.user-detail-wrapper .ant-input,.user-detail-wrapper .ant-picker,.user-detail-wrapper .ant-select:not(.ant-select-customize-input) .ant-select-selector{border-radius:6px}.user-detail-wrapper .ant-input:hover,.user-detail-wrapper .ant-input:focus,.user-detail-wrapper .ant-picker:hover,.user-detail-wrapper .ant-picker:focus,.user-detail-wrapper .ant-select:not(.ant-select-customize-input) .ant-select-selector:hover,.user-detail-wrapper .ant-select:not(.ant-select-customize-input) .ant-select-selector:focus{border-color:var(--color-primary)}.user-detail-wrapper .ant-input-focused,.user-detail-wrapper .ant-input:focus,.user-detail-wrapper .ant-picker-focused,.user-detail-wrapper .ant-picker:focus,.user-detail-wrapper .ant-select-focused:not(.ant-select-disabled).ant-select:not(.ant-select-customize-input) .ant-select-selector{border-color:var(--color-primary);box-shadow:0 0 0 2px rgba(var(--color-primary-rgb), 0.2)}@media(max-width: 768px){.user-detail-wrapper{padding:16px 8px}.user-detail-wrapper .user-settings-form{padding:16px 12px}.user-detail-wrapper .user-settings-form .settings-tabs .ant-tabs-nav .ant-tabs-tab{padding:8px 12px;font-size:14px}.user-detail-wrapper .user-settings-form .profile-picture-section .ant-avatar{width:100px;height:100px}.user-detail-wrapper .form-actions{flex-direction:column;gap:16px}.user-detail-wrapper .form-actions button{width:100%}}",""]);const u=s},55081:(e,t,r)=>{var a=r(85072),n=r.n(a),l=r(97825),s=r.n(l),u=r(77659),o=r.n(u),i=r(55056),c=r.n(i),m=r(10540),p=r.n(m),d=r(41113),f=r.n(d),g=r(70276),b={};b.styleTagTransform=f(),b.setAttributes=c(),b.insert=o().bind(null,"head"),b.domAPI=s(),b.insertStyleElement=p();var v=n()(g.default,b);if(!g.default.locals||e.hot.invalidate){var _=!g.default.locals,E=_?g:g.default.locals;e.hot.accept(70276,(t=>{g=r(70276),function(e,t,r){if(!e&&t||e&&!t)return!1;var a;for(a in e)if((!r||"default"!==a)&&e[a]!==t[a])return!1;for(a in t)if(!(r&&"default"===a||e[a]))return!1;return!0}(E,_?g:g.default.locals,_)?(E=_?g:g.default.locals,v(g.default)):e.hot.invalidate()}))}e.hot.dispose((function(){v()}));g.default&&g.default.locals&&g.default.locals}}]);