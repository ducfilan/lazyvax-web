"use strict";(self.webpackChunklazyvax_ext=self.webpackChunklazyvax_ext||[]).push([[716],{45716:(e,a,r)=>{r.r(a),r.d(a,{default:()=>Te});var t=r(64467),n=r(5544),o=r(97072),l=(r(25339),r(71988)),d=r(96540),i=r(88652),c=r(6463),s=r(62542),u=r(42569),w=r(86319),p=r(71099),f=r(63170),v=r(87353),h=r(71468),y=r(84129);r(13474),r(81695),r(42198),r(82960);r(51743);var m=r(95927),k=r(83186),g=r(40864),b=r(67230),x=r(69975),E=r(49214),D=r(10467),S=r(54756),O=r.n(S),A=r(15039),C=r(91196),_=r(84972),T=r(37977),R=r(64132),M=r(78751),N=r(28073),z=r(55166),H=r(50329),j=r(68e3),P=r(78602),I=r(90096),F=r(92089),U=r(74353),W=r.n(U),Y=r(34878),q=r(21391),B=r(81631),G=r(80203),J=r(5060),L=r(11973),V=r(7566),Q=r(20274),K=r(38888),$=r(49785),X=r(38342),Z=r(97665),ee=(0,d.createContext)(void 0);function ae(e){var a=e.children,r=(0,d.useState)({draggedEvent:null,draggedFromDate:null}),t=(0,n.A)(r,2),o=t[0],l=t[1],i=!!o.draggedEvent;return d.createElement(ee.Provider,{value:{dragState:o,setDraggedEvent:function(e,a){l(null===e?{draggedEvent:null,draggedFromDate:null}:{draggedEvent:e,draggedFromDate:a})},isDragging:i,isCrossDayDrag:function(e){return!(!o.draggedFromDate||!i)&&o.draggedFromDate.toDateString()!==e.toDateString()}}},a)}var re=r(85015),te=r(51643),ne=r(42702);function oe(e,a){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),r.push.apply(r,t)}return r}function le(e){for(var a=1;a<arguments.length;a++){var r=null!=arguments[a]?arguments[a]:{};a%2?oe(Object(r),!0).forEach((function(a){(0,t.A)(e,a,r[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oe(Object(r)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))}))}return e}function de(e){var a=e.targetDate,r=e.startTotalMinutes,t=e.onEventUpdate,o=e.onEventError,l=e.onEventSuccess,c=e.weekStartDate,w=e.weekEndDate,p=(0,Z.jE)(),f=(0,h.wA)(),v=function(){var e=(0,d.useContext)(ee);if(void 0===e)throw new Error("useWeekDrag must be used within a WeekDragProvider");return e}(),m=v.dragState,k=v.setDraggedEvent,g=v.isDragging,b=v.isCrossDayDrag,x=re.A.useApp().modal,E=(0,d.useState)({draggedEvent:null,dropTime:null}),S=(0,n.A)(E,2),A=S[0],C=S[1],_=(0,d.useCallback)((function(e,r){k(r,a),e.dataTransfer.effectAllowed="move"}),[k,a]),T=(0,d.useCallback)((function(){C({draggedEvent:null,dropTime:null}),m.draggedEvent&&k(null,null)}),[k,m.draggedEvent]),R=(0,d.useCallback)((function(e,t){if(e.preventDefault(),e.dataTransfer.dropEffect="move",t&&g){var n=t.getBoundingClientRect(),o=e.clientY-n.top+t.scrollTop,l=(0,V.qI)(o/q.n.HOUR_HEIGHT*60),d=r+l,i=Math.floor(d/60),c=d%60,s=new Date(a);s.setHours(i,c,0,0),C((function(e){return le(le({},e),{},{dropTime:s})}))}}),[a,r,g]),M=(0,d.useCallback)((function(){C((function(e){return le(le({},e),{},{dropTime:null})}))}),[]),N=(0,d.useCallback)(function(){var e=(0,D.A)(O().mark((function e(a){var r,n,i,v,h,k,g,b,E;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),r=m.draggedEvent,n=A.dropTime,r&&n&&r._id){e.next=6;break}return T(),e.abrupt("return");case 6:if(i=r.endDate&&r.startDate?(0,$.o)(new Date(r.endDate),new Date(r.startDate)):q.n.DEFAULT_EVENT_DURATION,v=(0,X.z)(n,i),h=r._id,T(),t(h,{startDate:n,endDate:v},"update"),k=function(){var e=(0,D.A)(O().mark((function e(){var a;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c||!w){e.next=5;break}return e.next=3,(0,s.J7)(c,w);case 3:a=e.sent,f((0,y.H8)(a));case 5:return e.next=7,p.invalidateQueries({queryKey:["day-events"]});case 7:return e.next=9,p.invalidateQueries({queryKey:["events"]});case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=(0,D.A)(O().mark((function e(a){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("this"!==a){e.next=5;break}return e.next=3,(0,s.qM)({_id:h,startDate:n,endDate:v});case 3:e.next=7;break;case 5:return e.next=7,(0,s.X3)(h,{startDate:n,endDate:v},a);case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),e.prev=13,null===(b=r.recurrence)||void 0===b||!b.rrule){e.next=20;break}return E="this",e.next=18,new Promise((function(e,a){var r,t;x.confirm({title:(0,u.Ru)("common_confirm"),content:d.createElement(te.Ay.Group,{defaultValue:"this",onChange:function(e){return E=e.target.value}},d.createElement(ne.A,{direction:"vertical"},d.createElement(te.Ay,{value:"this"},(0,u.Ru)("recurring_event_this")),d.createElement(te.Ay,{value:"future"},(0,u.Ru)("recurring_event_following")),d.createElement(te.Ay,{value:"all"},(0,u.Ru)("recurring_event_all")))),onOk:(t=(0,D.A)(O().mark((function r(){return O().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,g(E);case 3:return r.next=5,k();case 5:l(h),e(),r.next=14;break;case 9:r.prev=9,r.t0=r.catch(0),o(h,"update"),a(r.t0);case 14:case"end":return r.stop()}}),r,null,[[0,9]])}))),function(){return t.apply(this,arguments)}),onCancel:(r=(0,D.A)(O().mark((function a(){return O().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,k();case 3:return a.prev=3,l(h),e(),a.finish(3);case 7:case"end":return a.stop()}}),a,null,[[0,,3,7]])}))),function(){return r.apply(this,arguments)}),okText:(0,u.Ru)("common_ok"),okButtonProps:{className:"is-deep"},cancelText:(0,u.Ru)("common_cancel"),cancelButtonProps:{className:"is-deep"}})}));case 18:e.next=25;break;case 20:return e.next=22,g("this");case 22:return e.next=24,k();case 24:l(h);case 25:e.next=31;break;case 27:e.prev=27,e.t0=e.catch(13),o(h,"update");case 31:case"end":return e.stop()}}),e,null,[[13,27]])})));return function(a){return e.apply(this,arguments)}}(),[m.draggedEvent,A.dropTime,t,o,l,p,T,c,w,f]),z=g&&(!b(a)&&(0,i.r)(a,m.draggedFromDate)||b(a)&&!!A.dropTime);return{dragState:{draggedEvent:m.draggedEvent,dropTime:A.dropTime},draggedFromDate:m.draggedFromDate,handleDragStart:_,handleDragEnd:T,handleDragOver:R,handleDragLeave:M,handleDrop:N,shouldShowDropIndicator:z,isCrossDayDrag:b(a)}}const ie=function(e){var a=e.date,r=e.events,t=e.startHour,n=e.endHour,o=e.onEdit,l=e.onStatusChange,c=e.onCreateEvent,s=e.updateEventOptimistic,u=e.setEventError,w=e.clearEventStatus,p=e.retryEventUpdate,f=e.getEventStatus,v=e.weekStartDate,h=e.weekEndDate,y=e.scrollContainerRef,m=(0,d.useRef)(null),k=(0,d.useMemo)((function(){return r.filter((function(e){return e.startDate&&(0,i.r)(new Date(e.startDate),a)}))}),[r,a]),g=(0,d.useMemo)((function(){return k.filter((function(e){return!e.allDayEvent}))}),[k]),b=(0,d.useMemo)((function(){return(0,Q.H$)(g)}),[g]),x=(0,d.useMemo)((function(){return(0,V.Ws)(t,q.r.START_MINUTE)}),[t]),E=de({targetDate:a,startTotalMinutes:x,onEventUpdate:s,onEventError:u,onEventSuccess:w,weekStartDate:v,weekEndDate:h});return d.createElement("div",{className:"week-day-column"},d.createElement("div",{className:"week-day-content"},d.createElement("div",{className:"week-day-body",ref:m},d.createElement(K.A,{events:g,eventLayouts:b,startHour:t,endHour:n,selectedDateIso:a.toISOString(),calendarRef:m,scrollContainerRef:y,onEditEvent:o,onStatusChange:l,onCreateEvent:c,updateEventOptimistic:s,setEventError:u,clearEventStatus:w,retryEventUpdate:p,getEventStatus:f,crossDayDragHandlers:{onDragStart:E.handleDragStart,onDragEnd:E.handleDragEnd,onDragOver:E.handleDragOver,onDragLeave:E.handleDragLeave,onDrop:E.handleDrop,shouldShowDropIndicator:E.shouldShowDropIndicator,dropTime:E.dragState.dropTime,draggedEvent:E.dragState.draggedEvent,draggedFromDate:E.draggedFromDate}}))))};var ce=r(2622);const se=function(e){var a=e.date,r=e.isToday,t=e.onClick,n=(0,ce.Ex)((0,k.vv)()),o=(0,F.GP)(a,"EEE",{locale:n}),l=(0,F.GP)(a,"d",{locale:n});return d.createElement("div",{className:"week-day-header flex gap-4 align-center ".concat(r?"is-today":""),onClick:function(){null==t||t(a)}},d.createElement("div",{className:"day-of-week"},o),d.createElement("div",{className:"day-of-month ".concat(r?"today-circle":"")},l))};var ue=r(80337),we=r(54352),pe=r(67670),fe=r(79114),ve=r(1045),he=r(16172);function ye(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w.z,r=(0,ue.k)(e,{weekStartsOn:a}),t=(0,we.$)(e,{weekStartsOn:a});return(0,pe.k)({start:r,end:t})}var me=r(55285),ke=r(67466);r(70467),r(76837),r(37819);function ge(e,a){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),r.push.apply(r,t)}return r}function be(e){for(var a=1;a<arguments.length;a++){var r=null!=arguments[a]?arguments[a]:{};a%2?ge(Object(r),!0).forEach((function(a){(0,t.A)(e,a,r[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ge(Object(r)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))}))}return e}var xe=(0,d.memo)((function(e){var a=e.date,r=e.onPrevious,n=e.onNext,o=e.onDateChange,l=e.onToday,c=e.showTodayButton,s=void 0===c||c,w=e.config,p=e.onConfigChange,f=(0,h.d4)((function(e){return e.global.weekStartsOn})),v=(0,d.useMemo)((function(){return ye(a,f)}),[a,f]),y=function(e,a){p(be(be({},w),{},{visibleDays:be(be({},w.visibleDays),{},(0,t.A)({},e,a))}))},m=d.createElement("div",{className:"week-calendar-config-popover flex-col gap-x-8"},d.createElement("div",null,d.createElement("div",{className:"flex align-center justify-between gap-x-16"},d.createElement("div",null,(0,u.Ru)("hide_completed_activities")),d.createElement(A.A,{checked:w.hideCompletedActivities,onChange:function(e){p(be(be({},w),{},{hideCompletedActivities:e}))},size:"small"}))),d.createElement("div",null,d.createElement("div",{className:"mb-8px"},(0,u.Ru)("visible_days")),d.createElement("div",{className:"flex-col pad-left-8px"},d.createElement(C.A,{checked:w.visibleDays.monday,onChange:function(e){return y("monday",e.target.checked)}},(0,u.Ru)("common_monday")),d.createElement(C.A,{checked:w.visibleDays.tuesday,onChange:function(e){return y("tuesday",e.target.checked)}},(0,u.Ru)("common_tuesday")),d.createElement(C.A,{checked:w.visibleDays.wednesday,onChange:function(e){return y("wednesday",e.target.checked)}},(0,u.Ru)("common_wednesday")),d.createElement(C.A,{checked:w.visibleDays.thursday,onChange:function(e){return y("thursday",e.target.checked)}},(0,u.Ru)("common_thursday")),d.createElement(C.A,{checked:w.visibleDays.friday,onChange:function(e){return y("friday",e.target.checked)}},(0,u.Ru)("common_friday")),d.createElement(C.A,{checked:w.visibleDays.saturday,onChange:function(e){return y("saturday",e.target.checked)}},(0,u.Ru)("common_saturday")),d.createElement(C.A,{checked:w.visibleDays.sunday,onChange:function(e){return y("sunday",e.target.checked)}},(0,u.Ru)("common_sunday")))),d.createElement("div",{className:"mt-8px"},d.createElement("div",{className:"mb-8px"},(0,u.Ru)("calendar_days_to_show")),d.createElement(_.A,{value:w.daysToShow||7,style:{width:200},onChange:function(e){return p(be(be({},w),{},{daysToShow:e}))},options:[{value:7,label:(0,u.Ru)("calendar_days_option_whole_week")},{value:1,label:(0,u.Ru)("calendar_days_option_1")},{value:2,label:(0,u.Ru)("calendar_days_option_2")},{value:3,label:(0,u.Ru)("calendar_days_option_3")},{value:5,label:(0,u.Ru)("calendar_days_option_5")}]})),d.createElement("div",{className:"mt-8px"},d.createElement("div",{className:"mb-8px"},(0,u.Ru)("calendar_hours_range")),d.createElement("div",{className:"flex gap-x-8 align-center"},d.createElement(_.A,{value:w.startHour,style:{width:95},onChange:function(e){return p(be(be({},w),{},{startHour:e}))},options:Array.from({length:24},(function(e,a){return{value:a,label:"".concat(a.toString().padStart(2,"0"),":00")}}))}),d.createElement("span",null,"-"),d.createElement(_.A,{value:w.endHour,style:{width:95},onChange:function(e){return p(be(be({},w),{},{endHour:e}))},options:Array.from({length:25},(function(e,a){return{value:a,label:24===a?"24:00":"".concat(a.toString().padStart(2,"0"),":00")}}))})))),g=(0,d.useMemo)((function(){return 7===(w.daysToShow||7)?(0,I.R)(a,new Date):(0,i.r)(a,new Date)}),[w.daysToShow,a]);return d.createElement("div",{className:"week-calendar-toolbar"},d.createElement("div",{className:"week-calendar-toolbar-content full-width flex justify-between"},d.createElement("div",{className:"week-calendar-toolbar-label flex gap-x-4 align-center"},d.createElement("span",null,(0,ce.Sn)((0,F.GP)(v[0],"MMMM",{locale:(0,ce.Ex)((0,k.vv)())}))),d.createElement("span",null,v[0].getFullYear()),d.createElement(T.A,{title:(0,u.Ru)("common_previous_week")},d.createElement(R.Ay,{shape:"circle",type:"text",icon:d.createElement(H.A,null),onClick:r})),d.createElement(T.A,{title:(0,u.Ru)("common_next_week")},d.createElement(R.Ay,{shape:"circle",type:"text",icon:d.createElement(j.A,null),onClick:n}))),d.createElement("div",{className:"flex gap-x-8 align-center"},s&&!g&&d.createElement(R.Ay,{type:"link",onClick:function(){var e=new Date;o(e),null==l||l()}},7===(w.daysToShow||7)?(0,u.Ru)("common_this_week"):(0,u.Ru)("common_today")),d.createElement(M.A,{variant:"filled",value:W()(a),onChange:function(e){e&&o(e.toDate())},allowClear:!1,picker:7===(w.daysToShow||7)?"week":"date",showWeek:!1,format:function(e){if(!e)return"";var a=w.daysToShow||7;if(7===a){var r=e.startOf("week"),t=e.endOf("week");return"".concat(r.format("MMM D")," - ").concat(t.format("MMM D, YYYY"))}var n=e.startOf("day"),o=e.add(a-1,"day").endOf("day");return"".concat(n.format("MMM D")," - ").concat(o.format("MMM D, YYYY"))}}),d.createElement(N.A,{content:m,title:(0,u.Ru)("calendar_settings"),trigger:"click",placement:"bottomRight"},d.createElement(T.A,{title:(0,u.Ru)("calendar_settings")},d.createElement(R.Ay,{shape:"circle",type:"text",icon:d.createElement(P.A,null)}))))))}));const Ee=function(e){var a=e.events,r=e.calendarStartHour,t=(void 0===r&&q.r.START_HOUR,e.calendarEndHour),o=(void 0===t&&q.r.END_HOUR,e.selectedDateIso),l=e.onDateChange,p=e.height,f=(e.title,e.titleTooltip,e.hideHeader),v=void 0!==f&&f,m=e.weekStartsOn,k=void 0===m?w.z:m,b=e.onToday,x=e.showTodayButton,E=void 0===x||x,S=(0,h.wA)(),A=(0,d.useRef)(null),C=(0,d.useMemo)((function(){return new Date(o)}),[o]),_=(0,me.lW)(),T={hideCompletedActivities:!1,visibleDays:{monday:!0,tuesday:!0,wednesday:!0,thursday:!0,friday:!0,saturday:!0,sunday:!0},daysToShow:7,startHour:q.r.START_HOUR,endHour:q.r.END_HOUR},R=(0,ke.A)("week-calendar-config",T),M=(0,n.A)(R,2),N=M[0],H=M[1],j=function(e){var a=(0,d.useState)(!1),r=(0,n.A)(a,2),t=r[0],o=r[1],l=(0,d.useState)(!1),i=(0,n.A)(l,2),c=i[0],s=i[1],u=(0,d.useState)(0),w=(0,n.A)(u,2),p=w[0],f=w[1];return(0,d.useEffect)((function(){f(function(){var e,a=document.createElement("div");a.style.visibility="hidden",a.style.overflow="scroll",a.style.msOverflowStyle="scrollbar",document.body.appendChild(a);var r=document.createElement("div");a.appendChild(r);var t=a.offsetWidth-r.offsetWidth;return null===(e=a.parentNode)||void 0===e||e.removeChild(a),t}())}),[]),(0,d.useEffect)((function(){var a=e.current;if(!a)return o(!1),void s(!1);var r=function(){var e=a.scrollHeight>a.clientHeight,r=a.scrollWidth>a.clientWidth;o(e),s(r)};r();var t=new ResizeObserver((function(){r()}));t.observe(a);var n=new MutationObserver((function(){r()}));return n.observe(a,{childList:!0,subtree:!0,attributes:!0}),function(){t.disconnect(),n.disconnect()}}),[e]),{hasVerticalScrollbar:t,hasHorizontalScrollbar:c,scrollbarWidth:p}}(A),P=j.hasVerticalScrollbar,I=(0,d.useMemo)((function(){var e=["week-calendar-wrapper"];return P&&e.push("has-vertical-scrollbar"),_.width<=768&&e.push("mobile"),e.join(" ")}),[P,_.width]),F=(0,d.useCallback)((function(e){H(e)}),[H]),U=(0,d.useMemo)((function(){var e=N.daysToShow||7;return 7===e?ye(C,k):function(e,a){for(var r=(0,c.o)(e),t=[],n=0;n<a;n+=1)t.push((0,he.f)(r,n));return t}(C,e)}),[C,k,N.daysToShow]),W=(0,d.useMemo)((function(){if(7!==(N.daysToShow||7))return U;var e={1:"monday",2:"tuesday",3:"wednesday",4:"thursday",5:"friday",6:"saturday",0:"sunday"};return U.filter((function(a){var r=e[a.getDay()];return N.visibleDays[r]}))}),[U,N.visibleDays,N.daysToShow]),V=(0,d.useMemo)((function(){return function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w.z;return{start:(0,ue.k)(e,{weekStartsOn:a}),end:(0,we.$)(e,{weekStartsOn:a})}}(C,k)}),[C,k]),Q=(0,G.p)({initEvents:a}),K=Q.events,$=Q.updateEventOptimistic,X=Q.setEventError,Z=Q.clearEventStatus,ee=Q.retryEventUpdate,re=Q.getEventStatus,te=(0,d.useMemo)((function(){return N.hideCompletedActivities?K.filter((function(e){return e.status!==w.vV})):K}),[K,N.hideCompletedActivities]),ne=(0,d.useMemo)((function(){var e=new Map;return W.forEach((function(a){var r=te.filter((function(e){return e.startDate&&(0,i.r)(new Date(e.startDate),a)&&e.allDayEvent}));e.set(a.toISOString(),r)})),e}),[te,W]),oe=(0,B.f)(),le=oe.editingEvent,de=oe.isModalVisible,ce=oe.openCreateModal,pe=oe.openEditModal,ge=oe.closeModal,be=(0,d.useCallback)((function(e){S((0,Y.un)(e.toISOString())),null==l||l(e)}),[S,l]),Ee=(0,d.useCallback)((function(){var e,a=N.daysToShow||7,r=7===a?(e=C,(0,ve.k)(e,1)):function(e,a){return(0,he.f)(e,-a)}(C,a);be(r)}),[C,be,N.daysToShow]),De=(0,d.useCallback)((function(){var e,a=N.daysToShow||7,r=7===a?(e=C,(0,fe.J)(e,1)):function(e,a){return(0,he.f)(e,a)}(C,a);be(r)}),[C,be,N.daysToShow]),Se=(0,d.useCallback)(function(){var e=(0,D.A)(O().mark((function e(a,r){var t;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.toString(),e.prev=1,$(t,{status:r},"status"),e.next=5,(0,s.JG)(t,r);case 5:Z(t),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),X(t,"status");case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(a,r){return e.apply(this,arguments)}}(),[$,Z,X]),Oe=(0,d.useCallback)(function(){var e=(0,D.A)(O().mark((function e(a){var r,t;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a._id){e.next=3;break}return e.abrupt("return");case 3:if(null!=le&&le._id?S((0,y.tQ)(a)):S((0,y.l2)(a)),e.prev=4,null===(r=a.recurrence)||void 0===r||!r.rrule){e.next=10;break}return e.next=8,(0,s.J7)(V.start,V.end);case 8:t=e.sent,S((0,y.H8)(t));case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4);case 15:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(a){return e.apply(this,arguments)}}(),[S,le,V.start,V.end]);return d.createElement(ae,null,d.createElement("div",{className:I,style:{maxHeight:p}},!v&&d.createElement(xe,{date:C,onPrevious:Ee,onNext:De,onDateChange:be,onToday:b,showTodayButton:E,config:N,onConfigChange:F}),d.createElement("div",{className:"week-headers-row"},d.createElement("div",{className:"week-time-header"}),d.createElement("div",{className:"week-day-headers"},W.map((function(e){return d.createElement(se,{key:"header-".concat(e.toISOString()),date:e,isToday:(a=e,(0,i.r)(a,new Date)),onClick:be});var a})))),d.createElement("div",{className:"week-all-day-row"},d.createElement("div",{className:"week-all-day-header"},d.createElement(z.A.Text,{className:"all-day-events-label"},(0,u.Ru)("all_day"))),d.createElement("div",{className:"week-all-day-content"},W.map((function(e){var a=ne.get(e.toISOString())||[];return d.createElement("div",{key:"allday-".concat(e.toISOString()),className:"week-day-all-day"},d.createElement(L.A,{events:a,selectedDateIso:e.toISOString(),onEdit:pe,onStatusChange:Se,getEventStatus:re,onRetry:ee}))})))),d.createElement("div",{className:"week-calendar-body",ref:A},d.createElement("div",{className:"week-time-column"},d.createElement(J.A,{startHour:N.startHour,endHour:N.endHour})),d.createElement("div",{className:"week-days-container"},W.map((function(e){return d.createElement(ie,{key:e.toISOString(),date:e,events:te,startHour:N.startHour,endHour:N.endHour,onEdit:pe,onStatusChange:Se,onCreateEvent:ce,updateEventOptimistic:$,setEventError:X,clearEventStatus:Z,retryEventUpdate:ee,getEventStatus:re,weekStartDate:V.start,weekEndDate:V.end,scrollContainerRef:A})})))),d.createElement(g.A,{visible:de,event:le,onClose:ge,onSave:Oe})))};function De(e,a){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),r.push.apply(r,t)}return r}function Se(e){for(var a=1;a<arguments.length;a++){var r=null!=arguments[a]?arguments[a]:{};a%2?De(Object(r),!0).forEach((function(a){(0,t.A)(e,a,r[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):De(Object(r)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))}))}return e}var Oe=(0,u.Ru)("week_view_tab_planning"),Ae=((0,u.Ru)("week_view_tab_calendar"),(0,u.Ru)("week_view_tab_todo"),(0,d.memo)((function(){var e=(0,m.S)(),a=e.screenWidth,r=e.user,t=(0,h.wA)(),l=(0,d.useState)(!1),i=(0,n.A)(l,2),c=i[0],g=i[1],E=(0,d.useState)(),D=(0,n.A)(E,2),S=D[0],O=D[1],A=(0,d.useState)(null),C=(0,n.A)(A,2),_=C[0],T=C[1];(0,d.useEffect)((function(){g(a<=k.NU.sm)}),[a]),(0,d.useEffect)((function(){if(r){var e=r.preferences||{timezone:void 0,weekStart:w.z},a=e.timezone,t=e.weekStart;O((0,p.Hq)(new Date,a,!t||t===w.z))}}),[r]);var R=(0,d.useCallback)((function(){S&&r&&(0,s.J7)(S.weekStartDate,S.weekEndDate).then((function(e){t((0,y.H8)(e))}))}),[t,S,r]);(0,d.useEffect)(R,[R,S]),(0,d.useEffect)((function(){S&&(0,s.cF)(S.weekStartDate,S.weekEndDate).then((function(e){e>0&&R()}))}),[R,S]);var M=(0,d.useMemo)((function(){return{conversation:_,setConversation:T,weekInfo:S,setWeekInfo:O}}),[S,_]),N=d.createElement("div",{className:"flex-col ".concat(c?"gap-row-8":"gap-row-16"," full-width overflow-y-auto")},d.createElement(Ce,{isMobile:c})),z=S?d.createElement("div",{className:"sider-panel flex",style:{minHeight:300}},d.createElement(f.A,{type:w.QM,meta:JSON.stringify({type:w.QM,meta:{startDate:S.weekStartDate}})})):d.createElement(o.A,{active:!0});return d.createElement(v.W.Provider,{value:Se({},M)},d.createElement("div",{className:"weekly-viewer-wrapper"},c?d.createElement(d.Fragment,null,N):d.createElement(d.Fragment,null,N,d.createElement(b.q,{shape:"round",initPosition:{bottom:40,right:24},icon:d.createElement("img",{src:(0,u.ID)(x),width:64}),bubbleSize:68},z))))}))),Ce=(0,d.memo)((function(e){var a=e.isMobile,r=(0,d.useState)(Oe),t=(0,n.A)(r,2);t[0],t[1];return d.createElement("div",{className:"planning-view-wrapper flex-col flex-1"},d.createElement("div",{className:"weekly-viewer-calendar-wrapper"},d.createElement(_e,{isMobile:a})))})),_e=(0,d.memo)((function(e){var a=e.isMobile,r=(0,h.d4)((function(e){return e.global.weekStartsOn})),t=(0,m.S)().user,o=(0,h.d4)((function(e){return e.weekPlanner.calendarCurrentDate})),s=(0,d.useContext)(v.W).setWeekInfo,u=(0,h.wA)(),f=l.A.useForm(),k=(0,n.A)(f,1)[0],b=d.useRef(null),x=(0,d.useState)(),D=(0,n.A)(x,2),S=D[0],O=D[1],A=(0,d.useState)(!1),C=(0,n.A)(A,2),_=C[0],T=C[1],R=(0,d.useMemo)((function(){return o?new Date(o):new Date}),[o]),M=(0,h.d4)(y.zD),N=(0,d.useMemo)((function(){return M.filter((function(e){return e.startDate&&(0,i.r)(new Date(e.startDate),R)}))}),[M,R]);(0,d.useEffect)((function(){if(o&&t){var e=new Date(o);if(!(0,i.r)(e,R)){var a=t.preferences||{timezone:void 0,weekStart:w.z},r=a.timezone,n=a.weekStart;s((0,p.Hq)(e,r,n===w.z))}}}),[o,R,s,t]),(0,d.useEffect)((function(){_&&b.current&&setTimeout((function(){var e;return null===(e=b.current)||void 0===e?void 0:e.focus()}),100)}),[_]);var z=(0,d.useCallback)((function(e){T(!1),O(void 0),k.resetFields()}),[k]),H=(0,d.useCallback)((function(){T(!1),O(void 0),k.resetFields()}),[k]),j=(0,d.useCallback)((function(e){if(t){var a=t.preferences||{timezone:void 0,weekStart:w.z},r=a.timezone,n=a.weekStart;s((0,p.Hq)(e,r,n===w.z))}u((0,y.KF)((0,c.o)(e).getTime()))}),[u,s,t]);return d.createElement(d.Fragment,null,d.createElement(g.A,{visible:_,event:S,onClose:H,onSave:z}),a?d.createElement(E.A,{events:N,selectedDateIso:R.toISOString(),height:"100%"}):d.createElement(Ee,{events:M,selectedDateIso:R.toISOString(),onDateChange:j,hideHeader:!1,weekStartsOn:r}))}));const Te=(0,d.memo)(Ae)},87624:(e,a,r)=>{r.r(a),r.d(a,{default:()=>d});var t=r(31601),n=r.n(t),o=r(76314),l=r.n(o)()(n());l.push([e.id,".week-todo-header{margin-bottom:32px;background:linear-gradient(135deg, var(--color-primary) 10%, var(--color-primary-bright) 100%);background-size:cover;background-attachment:fixed;width:100%;padding:50px 24px;position:relative;overflow:hidden;border-radius:0 0 85% 85%/30%;text-align:center;box-shadow:0 4px 1rem 0 rgba(0,0,0,.1)}.week-todo-header .week-todo-header-content{width:100%;height:100%;color:#fff}.week-todo-header .week-todo-header-content .week-todo-title{font-size:2rem;font-weight:600;display:block;margin-bottom:16px;color:#fff}.week-todo-header .week-todo-header-content .week-todo-description{font-size:1.2rem;color:rgba(255,255,255,.9);font-weight:400;margin:0}",""]);const d=l},17036:(e,a,r)=>{r.r(a),r.d(a,{default:()=>d});var t=r(31601),n=r.n(t),o=r(76314),l=r.n(o)()(n());l.push([e.id,".weekly-viewer-wrapper{height:calc(100vh - 80px);padding:16px;background:var(--color-primary-bg);border-radius:10px;overflow:hidden;max-width:100vw;display:flex;flex-direction:column}@media(max-width: 768px){.weekly-viewer-wrapper{padding:8px;height:calc(100vh - 72px)}}.weekly-viewer-wrapper [data-panel-group]{width:100%;height:100%;column-gap:16px;max-width:100%}.weekly-viewer-wrapper [data-panel]{display:flex;overflow:hidden;min-width:0}.weekly-viewer-wrapper .panel-resize-handle{width:4px;background:var(--color-border);transition:background-color .2s;flex-shrink:0}.weekly-viewer-wrapper .panel-resize-handle:hover{background:var(--color-primary)}.weekly-viewer-wrapper .week-view-sider-wrapper{flex:1;height:100%;overflow:hidden;background:var(--color-white);border-radius:8px;box-shadow:0 2px 8px rgba(0,0,0,.1);min-width:0}.weekly-viewer-wrapper .week-view-sider-wrapper .ant-card{height:100%;display:flex;flex-direction:column}.weekly-viewer-wrapper .week-view-sider-wrapper .ant-card .ant-card-body{flex:1;padding:0;overflow:hidden;display:flex;flex-direction:column}.weekly-viewer-wrapper .week-view-sider-wrapper .ant-card .ant-card-body .ant-tabs{flex:1;display:flex;flex-direction:column;overflow:hidden}.weekly-viewer-wrapper .week-view-sider-wrapper .ant-card .ant-card-body .ant-tabs .ant-tabs-content-holder{display:flex}.weekly-viewer-wrapper .week-view-sider-wrapper .ant-card .ant-card-body .ant-tabs .ant-tabs-content{flex:1;overflow:hidden}.weekly-viewer-wrapper .week-view-sider-wrapper .ant-card .ant-card-body .ant-tabs .ant-tabs-content .ant-tabs-tabpane{height:100%}.weekly-viewer-wrapper .planning-view-wrapper{flex:1;min-height:0;display:flex;flex-direction:column}@media(max-width: 768px){.weekly-viewer-wrapper .planning-view-wrapper{height:100%}}.weekly-viewer-wrapper .weekly-viewer-calendar-wrapper{flex:1;min-height:0;overflow:auto;background:var(--color-white);border-radius:8px;box-shadow:0 2px 8px rgba(0,0,0,.1)}@media(max-width: 768px){.weekly-viewer-wrapper .weekly-viewer-calendar-wrapper{border-radius:4px;box-shadow:none}.weekly-viewer-wrapper .weekly-viewer-calendar-wrapper .rbc-calendar{height:100%}}.weekly-viewer-wrapper .lzv-chat-conversation{height:100%;overflow:hidden}.ant-drawer .sider-panel{height:100%;border-radius:0;box-shadow:none}@media(max-width: 768px){.rbc-toolbar{flex-direction:column;gap:8px;padding:8px;flex-shrink:0}.rbc-toolbar .rbc-toolbar-label{font-size:18px}.rbc-toolbar .rbc-btn-group{width:100%;display:flex;justify-content:center;gap:4px}.rbc-toolbar .rbc-btn-group button{flex:1}.rbc-calendar{display:flex;flex-direction:column;height:100%}.rbc-calendar .rbc-time-view{flex:1;min-height:0;display:flex;flex-direction:column}.rbc-calendar .rbc-time-view .rbc-time-header{flex-shrink:0}.rbc-calendar .rbc-time-view .rbc-time-content{flex:1;min-height:0;overflow-y:auto}.rbc-time-content .rbc-events-container{margin-right:0}.rbc-time-header-content .rbc-header{padding:4px;font-size:12px}.rbc-time-slot{min-height:40px}.rbc-event{padding:2px 4px}.rbc-event .event-title{font-size:11px}.rbc-event .event-time{font-size:10px}.rbc-time-view .rbc-row{min-height:24px}.rbc-time-header.rbc-overflowing{margin-right:0}}",""]);const d=l},64184:(e,a,r)=>{r.r(a),r.d(a,{default:()=>d});var t=r(31601),n=r.n(t),o=r(76314),l=r.n(o)()(n());l.push([e.id,".week-calendar-wrapper{--scrollbar-width: 13px;display:flex;flex-direction:column;border-radius:8px;background-color:var(--color-primary-bg);max-height:100%}.week-calendar-wrapper .week-calendar-toolbar{background:var(--color-white);padding:12px 16px;border-radius:8px 8px 0 0}.week-calendar-wrapper .week-calendar-toolbar .week-calendar-toolbar-content{display:flex;align-items:center;justify-content:space-between;width:100%}.week-calendar-wrapper .week-calendar-toolbar .week-calendar-toolbar-content .week-calendar-toolbar-label>span:nth-child(1){font-size:24px;font-weight:bold}.week-calendar-wrapper .week-calendar-toolbar .week-calendar-toolbar-content .week-calendar-toolbar-label>span:nth-child(2){font-size:24px;line-height:1.35;font-weight:lighter}.week-calendar-wrapper .week-calendar-toolbar .week-calendar-toolbar-content .ant-btn{border-radius:6px}.week-calendar-wrapper .week-calendar-toolbar .week-calendar-toolbar-content .ant-picker{border-radius:6px}.week-calendar-wrapper .week-headers-row{display:flex;border-bottom:1px solid var(--color-border);background-color:var(--color-primary-bg);padding-right:0;transition:padding-right .1s ease}.week-calendar-wrapper .week-headers-row .week-time-header{width:60px;min-width:60px;background-color:var(--color-primary-bg)}.week-calendar-wrapper .week-headers-row .week-day-headers{flex:1;display:flex}.week-calendar-wrapper .week-headers-row .week-day-headers .week-day-header{flex:1;padding:8px 4px;background-color:var(--color-primary-bg);cursor:pointer;transition:background-color .2s ease}.week-calendar-wrapper .week-headers-row .week-day-headers .week-day-header:last-child{border-right:none}.week-calendar-wrapper .week-headers-row .week-day-headers .week-day-header.is-today{color:var(--color-primary)}.week-calendar-wrapper .week-headers-row .week-day-headers .week-day-header .day-of-week{font-size:12px;font-weight:500;color:var(--color-text-secondary);line-height:28px;text-transform:uppercase}.week-calendar-wrapper .week-headers-row .week-day-headers .week-day-header .day-of-month{font-size:16px;font-weight:600;color:var(--color-text);display:flex;align-items:center;justify-content:center;width:28px;height:28px;transition:all .2s ease}.week-calendar-wrapper .week-headers-row .week-day-headers .week-day-header .day-of-month.today-circle{background-color:var(--color-primary);color:#fff;border-radius:50%;font-weight:700}.week-calendar-wrapper .week-headers-row .week-day-headers .week-day-header.is-today .day-of-week{color:var(--color-primary)}.week-calendar-wrapper .week-all-day-row{display:flex;border-bottom:1px solid var(--color-border);background-color:var(--color-primary-bg);padding-right:0;transition:padding-right .1s ease}.week-calendar-wrapper .week-all-day-row .week-all-day-header{width:60px;min-width:60px;display:flex;align-items:center;justify-content:center;border-right:1px solid var(--color-border);background-color:var(--color-primary-bg)}.week-calendar-wrapper .week-all-day-row .week-all-day-header .all-day-events-label{font-size:11px;color:var(--color-text-secondary);font-weight:500;text-align:center;padding:0 4px}.week-calendar-wrapper .week-all-day-row .week-all-day-content{flex:1;display:flex}.week-calendar-wrapper .week-all-day-row .week-all-day-content .week-day-all-day{flex:1;border-right:1px solid var(--color-border);min-height:36px;min-width:0}.week-calendar-wrapper .week-all-day-row .week-all-day-content .week-day-all-day:last-child{border-right:none}.week-calendar-wrapper .week-all-day-row .week-all-day-content .week-day-all-day .all-day-events-container{border-bottom:none;min-height:36px;min-width:0}.week-calendar-wrapper .week-all-day-row .week-all-day-content .week-day-all-day .all-day-events-container .all-day-events-header{display:none}.week-calendar-wrapper .week-all-day-row .week-all-day-content .week-day-all-day .all-day-events-container .all-day-events-content{padding:4px 6px;flex-wrap:wrap;gap:2px;min-height:28px;max-width:100%}.week-calendar-wrapper .week-calendar-body{flex:1;display:flex;position:relative;overflow-y:auto;overflow-x:hidden}.week-calendar-wrapper .week-calendar-body::-webkit-scrollbar{display:block;width:12px}.week-calendar-wrapper .week-calendar-body::-webkit-scrollbar-track{background:rgba(0,0,0,0)}.week-calendar-wrapper .week-calendar-body::-webkit-scrollbar-thumb{background-color:var(--color-scrollbar-thumb);border-radius:10px;border:4px solid rgba(0,0,0,0);background-clip:padding-box}.week-calendar-wrapper .week-calendar-body::-webkit-scrollbar-thumb:hover{background-color:var(--color-scrollbar-thumb-hover)}.week-calendar-wrapper .week-calendar-body::-webkit-scrollbar-corner{background:rgba(0,0,0,0)}.week-calendar-wrapper .week-calendar-body .week-days-container{flex:1;display:flex;min-width:0}.week-calendar-wrapper .week-calendar-body .week-days-container .week-day-column{flex:1;display:flex;flex-direction:column;min-width:0}.week-calendar-wrapper .week-calendar-body .week-days-container .week-day-column:last-child{border-right:none}.week-calendar-wrapper .week-calendar-body .week-days-container .week-day-column .week-day-content{flex:1;display:flex;flex-direction:column;border-right:1px solid var(--color-border)}.week-calendar-wrapper .week-calendar-body .week-days-container .week-day-column .week-day-content .week-day-body{flex:1;position:relative}.week-calendar-wrapper .week-calendar-body .week-days-container .week-day-column .week-day-content .week-day-body .cross-day-events-container{width:100%;height:100%;position:relative;pointer-events:auto}.week-calendar-wrapper .week-calendar-body .week-days-container .week-day-column .week-day-content .week-day-body .cross-day-events-container.drop-target{background-color:rgba(var(--color-primary-rgb), 0.3) !important;border:3px dashed var(--color-primary) !important;border-radius:8px;transition:all .2s ease;z-index:10;box-shadow:0 0 20px rgba(var(--color-primary-rgb), 0.3) !important}.week-calendar-wrapper .week-calendar-body .week-days-container .week-day-column .week-day-content .week-day-body .cross-day-events-container.drop-target .cross-day-drop-indicator{position:absolute;top:0;left:0;right:0;bottom:0;background:linear-gradient(45deg, transparent 40%, rgba(var(--color-primary-rgb), 0.1) 50%, transparent 60%);background-size:20px 20px;animation:cross-day-drag-indicator 1s linear infinite;pointer-events:none;z-index:11}.week-calendar-wrapper.has-vertical-scrollbar .week-headers-row,.week-calendar-wrapper.has-vertical-scrollbar .week-all-day-row{padding-right:var(--scrollbar-width)}.week-calendar-wrapper.has-vertical-scrollbar.mobile .week-headers-row,.week-calendar-wrapper.has-vertical-scrollbar.mobile .week-all-day-row{padding-right:var(--scrollbar-width)}@keyframes cross-day-drag-indicator{0%{background-position:0 0}100%{background-position:20px 20px}}@media(max-width: 768px){.week-calendar-wrapper .week-calendar-header{padding:8px 12px}.week-calendar-wrapper .week-calendar-header .week-navigation{gap:12px}.week-calendar-wrapper .week-calendar-header .week-navigation .week-title .week-range-title{font-size:16px}.week-calendar-wrapper .week-headers-row .week-time-header{width:50px;min-width:50px}.week-calendar-wrapper .week-headers-row .week-day-headers .week-day-header{padding:6px 2px;min-height:40px}.week-calendar-wrapper .week-headers-row .week-day-headers .week-day-header .day-of-week{font-size:10px}.week-calendar-wrapper .week-headers-row .week-day-headers .week-day-header .day-of-month{font-size:14px;width:24px;height:24px}.week-calendar-wrapper .week-all-day-row{min-height:30px}.week-calendar-wrapper .week-all-day-row .week-all-day-header{width:50px;min-width:50px}.week-calendar-wrapper .week-all-day-row .week-all-day-header .all-day-events-label{font-size:10px;padding:0 2px}.week-calendar-wrapper .week-all-day-row .week-all-day-content .week-day-all-day{min-height:30px}.week-calendar-wrapper .week-all-day-row .week-all-day-content .week-day-all-day .all-day-events-container{min-height:30px}.week-calendar-wrapper .week-all-day-row .week-all-day-content .week-day-all-day .all-day-events-container .all-day-events-content{padding:2px 4px;min-height:24px}.week-calendar-wrapper .week-all-day-row .week-all-day-content .week-day-all-day .all-day-events-container .all-day-events-content .all-day-event{font-size:10px;padding:2px 4px;border-radius:3px}}",""]);const d=l},81695:(e,a,r)=>{var t=r(85072),n=r.n(t),o=r(97825),l=r.n(o),d=r(77659),i=r.n(d),c=r(55056),s=r.n(c),u=r(10540),w=r.n(u),p=r(41113),f=r.n(p),v=r(87624),h={};h.styleTagTransform=f(),h.setAttributes=s(),h.insert=i().bind(null,"head"),h.domAPI=l(),h.insertStyleElement=w();var y=n()(v.default,h);if(!v.default.locals||e.hot.invalidate){var m=!v.default.locals,k=m?v:v.default.locals;e.hot.accept(87624,(a=>{v=r(87624),function(e,a,r){if(!e&&a||e&&!a)return!1;var t;for(t in e)if((!r||"default"!==t)&&e[t]!==a[t])return!1;for(t in a)if(!(r&&"default"===t||e[t]))return!1;return!0}(k,m?v:v.default.locals,m)?(k=m?v:v.default.locals,y(v.default)):e.hot.invalidate()}))}e.hot.dispose((function(){y()}));v.default&&v.default.locals&&v.default.locals},51743:(e,a,r)=>{var t=r(85072),n=r.n(t),o=r(97825),l=r.n(o),d=r(77659),i=r.n(d),c=r(55056),s=r.n(c),u=r(10540),w=r.n(u),p=r(41113),f=r.n(p),v=r(17036),h={};h.styleTagTransform=f(),h.setAttributes=s(),h.insert=i().bind(null,"head"),h.domAPI=l(),h.insertStyleElement=w();var y=n()(v.default,h);if(!v.default.locals||e.hot.invalidate){var m=!v.default.locals,k=m?v:v.default.locals;e.hot.accept(17036,(a=>{v=r(17036),function(e,a,r){if(!e&&a||e&&!a)return!1;var t;for(t in e)if((!r||"default"!==t)&&e[t]!==a[t])return!1;for(t in a)if(!(r&&"default"===t||e[t]))return!1;return!0}(k,m?v:v.default.locals,m)?(k=m?v:v.default.locals,y(v.default)):e.hot.invalidate()}))}e.hot.dispose((function(){y()}));v.default&&v.default.locals&&v.default.locals},37819:(e,a,r)=>{var t=r(85072),n=r.n(t),o=r(97825),l=r.n(o),d=r(77659),i=r.n(d),c=r(55056),s=r.n(c),u=r(10540),w=r.n(u),p=r(41113),f=r.n(p),v=r(64184),h={};h.styleTagTransform=f(),h.setAttributes=s(),h.insert=i().bind(null,"head"),h.domAPI=l(),h.insertStyleElement=w();var y=n()(v.default,h);if(!v.default.locals||e.hot.invalidate){var m=!v.default.locals,k=m?v:v.default.locals;e.hot.accept(64184,(a=>{v=r(64184),function(e,a,r){if(!e&&a||e&&!a)return!1;var t;for(t in e)if((!r||"default"!==t)&&e[t]!==a[t])return!1;for(t in a)if(!(r&&"default"===t||e[t]))return!1;return!0}(k,m?v:v.default.locals,m)?(k=m?v:v.default.locals,y(v.default)):e.hot.invalidate()}))}e.hot.dispose((function(){y()}));v.default&&v.default.locals&&v.default.locals}}]);