"use strict";(self.webpackChunklazyvax_ext=self.webpackChunklazyvax_ext||[]).push([[861],{17036:(e,t,r)=>{r.r(t),r.d(t,{default:()=>i});var a=r(31601),n=r.n(a),o=r(76314),l=r.n(o)()(n());l.push([e.id,".weekly-viewer-wrapper{height:calc(100vh - 80px);padding:16px;background:var(--color-primary-bg);border-radius:18px;overflow:hidden;max-width:100vw;display:flex;flex-direction:column}@media(max-width: 768px){.weekly-viewer-wrapper{padding:8px;height:calc(100vh - 138px)}}.weekly-viewer-wrapper [data-panel-group]{width:100%;height:100%;column-gap:16px;max-width:100%}.weekly-viewer-wrapper [data-panel]{display:flex;overflow:hidden;min-width:0}.weekly-viewer-wrapper .panel-resize-handle{width:4px;background:var(--color-border);transition:background-color .2s;flex-shrink:0}.weekly-viewer-wrapper .panel-resize-handle:hover{background:var(--color-primary)}.weekly-viewer-wrapper .week-view-sider-wrapper{flex:1;height:100%;overflow:hidden;background:var(--color-white);border-radius:18px;box-shadow:0 2px 8px rgba(0,0,0,.1);min-width:0}.weekly-viewer-wrapper .week-view-sider-wrapper .ant-card{height:100%;display:flex;flex-direction:column}.weekly-viewer-wrapper .week-view-sider-wrapper .ant-card .ant-card-body{flex:1;padding:0;overflow:hidden;display:flex;flex-direction:column}.weekly-viewer-wrapper .week-view-sider-wrapper .ant-card .ant-card-body .ant-tabs{flex:1;display:flex;flex-direction:column;overflow:hidden}.weekly-viewer-wrapper .week-view-sider-wrapper .ant-card .ant-card-body .ant-tabs .ant-tabs-content-holder{display:flex}.weekly-viewer-wrapper .week-view-sider-wrapper .ant-card .ant-card-body .ant-tabs .ant-tabs-content{flex:1;overflow:hidden}.weekly-viewer-wrapper .week-view-sider-wrapper .ant-card .ant-card-body .ant-tabs .ant-tabs-content .ant-tabs-tabpane{height:100%}.weekly-viewer-wrapper .planning-view-wrapper{flex:1;min-height:0;display:flex;flex-direction:column}@media(max-width: 768px){.weekly-viewer-wrapper .planning-view-wrapper{height:100%}}.weekly-viewer-wrapper .weekly-viewer-calendar-wrapper{flex:1;min-height:0;overflow:auto;background:var(--color-white);border-radius:18px;box-shadow:0 2px 8px rgba(0,0,0,.1)}@media(max-width: 768px){.weekly-viewer-wrapper .weekly-viewer-calendar-wrapper{border-radius:4px;box-shadow:none}.weekly-viewer-wrapper .weekly-viewer-calendar-wrapper .rbc-calendar{height:100%}}.weekly-viewer-wrapper .lzv-chat-conversation{height:100%;overflow:hidden}.ant-drawer .sider-panel{height:100%;border-radius:0;box-shadow:none}@media(max-width: 768px){.rbc-toolbar{flex-direction:column;gap:8px;padding:8px;flex-shrink:0}.rbc-toolbar .rbc-toolbar-label{font-size:18px}.rbc-toolbar .rbc-btn-group{width:100%;display:flex;justify-content:center;gap:4px}.rbc-toolbar .rbc-btn-group button{flex:1}.rbc-calendar{display:flex;flex-direction:column;height:100%}.rbc-calendar .rbc-time-view{flex:1;min-height:0;display:flex;flex-direction:column}.rbc-calendar .rbc-time-view .rbc-time-header{flex-shrink:0}.rbc-calendar .rbc-time-view .rbc-time-content{flex:1;min-height:0;overflow-y:auto}.rbc-time-content .rbc-events-container{margin-right:0}.rbc-time-header-content .rbc-header{padding:4px;font-size:12px}.rbc-time-slot{min-height:40px}.rbc-event{padding:2px 4px}.rbc-event .event-title{font-size:11px}.rbc-event .event-time{font-size:10px}.rbc-time-view .rbc-row{min-height:24px}.rbc-time-header.rbc-overflowing{margin-right:0}}",""]);const i=l},37819:(e,t,r)=>{var a=r(85072),n=r.n(a),o=r(97825),l=r.n(o),i=r(77659),c=r.n(i),d=r(55056),s=r.n(d),u=r(10540),p=r.n(u),w=r(41113),v=r.n(w),f=r(64184),y={};y.styleTagTransform=v(),y.setAttributes=s(),y.insert=c().bind(null,"head"),y.domAPI=l(),y.insertStyleElement=p();var g=n()(f.default,y);if(!f.default.locals||e.hot.invalidate){var m=!f.default.locals,k=m?f:f.default.locals;e.hot.accept(64184,t=>{f=r(64184),function(e,t,r){if(!e&&t||e&&!t)return!1;var a;for(a in e)if((!r||"default"!==a)&&e[a]!==t[a])return!1;for(a in t)if(!(r&&"default"===a||e[a]))return!1;return!0}(k,m?f:f.default.locals,m)?(k=m?f:f.default.locals,g(f.default)):e.hot.invalidate()})}e.hot.dispose(function(){g()});f.default&&f.default.locals&&f.default.locals},51743:(e,t,r)=>{var a=r(85072),n=r.n(a),o=r(97825),l=r.n(o),i=r(77659),c=r.n(i),d=r(55056),s=r.n(d),u=r(10540),p=r.n(u),w=r(41113),v=r.n(w),f=r(17036),y={};y.styleTagTransform=v(),y.setAttributes=s(),y.insert=c().bind(null,"head"),y.domAPI=l(),y.insertStyleElement=p();var g=n()(f.default,y);if(!f.default.locals||e.hot.invalidate){var m=!f.default.locals,k=m?f:f.default.locals;e.hot.accept(17036,t=>{f=r(17036),function(e,t,r){if(!e&&t||e&&!t)return!1;var a;for(a in e)if((!r||"default"!==a)&&e[a]!==t[a])return!1;for(a in t)if(!(r&&"default"===a||e[a]))return!1;return!0}(k,m?f:f.default.locals,m)?(k=m?f:f.default.locals,g(f.default)):e.hot.invalidate()})}e.hot.dispose(function(){g()});f.default&&f.default.locals&&f.default.locals},64184:(e,t,r)=>{r.r(t),r.d(t,{default:()=>i});var a=r(31601),n=r.n(a),o=r(76314),l=r.n(o)()(n());l.push([e.id,".week-calendar-wrapper{--scrollbar-width: 13px;display:flex;flex-direction:column;border-radius:8px;background-color:var(--color-primary-bg);max-height:100%}.week-calendar-wrapper .week-calendar-toolbar{background:var(--color-white);padding:12px 16px;border-radius:8px 8px 0 0}.week-calendar-wrapper .week-calendar-toolbar .week-calendar-toolbar-content{display:flex;align-items:center;justify-content:space-between;width:100%}.week-calendar-wrapper .week-calendar-toolbar .week-calendar-toolbar-content .week-calendar-toolbar-label>span:nth-child(1){font-size:24px;font-weight:bold}.week-calendar-wrapper .week-calendar-toolbar .week-calendar-toolbar-content .week-calendar-toolbar-label>span:nth-child(2){font-size:24px;line-height:1.35;font-weight:lighter}.week-calendar-wrapper .week-calendar-toolbar .week-calendar-toolbar-content .ant-btn{border-radius:6px}.week-calendar-wrapper .week-calendar-toolbar .week-calendar-toolbar-content .ant-picker{border-radius:6px}.week-calendar-wrapper .week-headers-row{display:flex;border-bottom:1px solid var(--color-border);background-color:var(--color-primary-bg);padding-right:0;transition:padding-right .1s ease}.week-calendar-wrapper .week-headers-row .week-time-header{width:60px;min-width:60px;background-color:var(--color-primary-bg)}.week-calendar-wrapper .week-headers-row .week-day-headers{flex:1;display:flex}.week-calendar-wrapper .week-headers-row .week-day-headers .week-day-header{flex:1;padding:8px 4px;background-color:var(--color-primary-bg);cursor:pointer;transition:background-color .2s ease}.week-calendar-wrapper .week-headers-row .week-day-headers .week-day-header:last-child{border-right:none}.week-calendar-wrapper .week-headers-row .week-day-headers .week-day-header.is-today{color:var(--color-primary)}.week-calendar-wrapper .week-headers-row .week-day-headers .week-day-header .day-of-week{font-size:12px;font-weight:500;color:var(--color-text-secondary);line-height:28px;text-transform:uppercase}.week-calendar-wrapper .week-headers-row .week-day-headers .week-day-header .day-of-month{font-size:16px;font-weight:600;color:var(--color-text);display:flex;align-items:center;justify-content:center;width:28px;height:28px;transition:all .2s ease}.week-calendar-wrapper .week-headers-row .week-day-headers .week-day-header .day-of-month.today-circle{background-color:var(--color-primary);color:#fff;border-radius:50%;font-weight:700}.week-calendar-wrapper .week-headers-row .week-day-headers .week-day-header.is-today .day-of-week{color:var(--color-primary)}.week-calendar-wrapper .week-all-day-row{display:flex;border-bottom:1px solid var(--color-border);background-color:var(--color-primary-bg);padding-right:0;transition:padding-right .1s ease;max-height:140px}.week-calendar-wrapper .week-all-day-row .week-all-day-header{width:60px;min-width:60px;display:flex;align-items:center;justify-content:center;border-right:1px solid var(--color-border);background-color:var(--color-primary-bg)}.week-calendar-wrapper .week-all-day-row .week-all-day-header .all-day-events-label{font-size:11px;color:var(--color-text-secondary);font-weight:500;text-align:center;padding:0 4px}.week-calendar-wrapper .week-all-day-row .week-all-day-grid{flex:1;display:grid;gap:2px 4px;padding:4px 8px;position:relative;min-height:28px;max-height:120px;overflow-y:auto;overflow-x:hidden}.week-calendar-wrapper .week-all-day-row .week-all-day-grid::-webkit-scrollbar{display:block;width:12px}.week-calendar-wrapper .week-all-day-row .week-all-day-grid::-webkit-scrollbar-track{background:rgba(0,0,0,0)}.week-calendar-wrapper .week-all-day-row .week-all-day-grid::-webkit-scrollbar-thumb{background-color:var(--color-scrollbar-thumb);border-radius:10px;border:4px solid rgba(0,0,0,0);background-clip:padding-box}.week-calendar-wrapper .week-all-day-row .week-all-day-grid::-webkit-scrollbar-thumb:hover{background-color:var(--color-scrollbar-thumb-hover)}.week-calendar-wrapper .week-all-day-row .week-all-day-grid::-webkit-scrollbar-corner{background:rgba(0,0,0,0)}.week-calendar-wrapper .week-all-day-row .week-all-day-grid .spanning-all-day-event{display:flex;align-items:center;background-color:var(--color-primary-light);border-radius:4px;padding:4px 8px;font-size:12px;font-weight:500;color:var(--color-text);cursor:pointer;transition:all .2s ease;border:1px solid rgba(0,0,0,0);position:relative;overflow:hidden;min-height:24px;box-shadow:0 1px 2px rgba(0,0,0,.05)}.week-calendar-wrapper .week-all-day-row .week-all-day-grid .spanning-all-day-event:hover{background-color:var(--color-primary-hover);transform:translateY(-1px);box-shadow:0 2px 6px rgba(0,0,0,.12);z-index:10}.week-calendar-wrapper .week-all-day-row .week-all-day-grid .spanning-all-day-event.is-done{opacity:.7;text-decoration:line-through;background-color:var(--color-success-bg);color:var(--color-text-secondary)}.week-calendar-wrapper .week-all-day-row .week-all-day-grid .spanning-all-day-event.loading{opacity:.6;pointer-events:none;background-color:var(--color-bg-gray-light)}.week-calendar-wrapper .week-all-day-row .week-all-day-grid .spanning-all-day-event.error{background-color:var(--color-error-bg);border-color:var(--color-error);color:var(--color-error)}.week-calendar-wrapper .week-all-day-row .week-all-day-grid .spanning-all-day-event.done-animation{animation:statusChangeAnimation .3s cubic-bezier(0.34, 1.56, 0.64, 1)}.week-calendar-wrapper .week-all-day-row .week-all-day-grid .spanning-all-day-event.continues-left{border-top-left-radius:0;border-bottom-left-radius:0;padding-left:24px}.week-calendar-wrapper .week-all-day-row .week-all-day-grid .spanning-all-day-event.continues-left .continues-indicator.left{position:absolute;left:6px;font-size:10px;opacity:.6}.week-calendar-wrapper .week-all-day-row .week-all-day-grid .spanning-all-day-event.continues-right{border-top-right-radius:0;border-bottom-right-radius:0;padding-right:24px}.week-calendar-wrapper .week-all-day-row .week-all-day-grid .spanning-all-day-event.continues-right .continues-indicator.right{position:absolute;right:6px;font-size:10px;opacity:.6}.week-calendar-wrapper .week-all-day-row .week-all-day-grid .spanning-all-day-event.timed{background-color:var(--color-bg-gray-light);border-left:3px solid var(--color-primary);padding-left:6px}.week-calendar-wrapper .week-all-day-row .week-all-day-grid .spanning-all-day-event.timed:hover{background-color:var(--color-bg-gray)}.week-calendar-wrapper .week-all-day-row .week-all-day-grid .spanning-all-day-event .spanning-event-content{display:flex;align-items:center;gap:4px;flex:1;overflow:hidden;z-index:1}.week-calendar-wrapper .week-all-day-row .week-all-day-grid .spanning-all-day-event .spanning-event-content .event-time-icon{font-size:11px;color:var(--color-primary);flex-shrink:0;opacity:.8}.week-calendar-wrapper .week-all-day-row .week-all-day-grid .spanning-all-day-event .spanning-event-content .event-emoji{font-size:14px;line-height:1;flex-shrink:0}.week-calendar-wrapper .week-all-day-row .week-all-day-grid .spanning-all-day-event .spanning-event-content .event-title{flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;line-height:1.2}.week-calendar-wrapper .week-all-day-row .week-all-day-grid .spanning-all-day-event .spanning-event-content .event-time-label{font-size:10px;color:var(--color-text-secondary);flex-shrink:0;margin-left:4px;white-space:nowrap;opacity:.9}.week-calendar-wrapper .week-all-day-row .week-all-day-grid .spanning-all-day-event .spanning-event-content .retry-button{background:none;border:none;color:inherit;cursor:pointer;font-size:10px;text-decoration:underline;padding:0;margin-left:4px}.week-calendar-wrapper .week-all-day-row .week-all-day-grid .spanning-all-day-event .spanning-event-content .retry-button:hover{opacity:.8}.week-calendar-wrapper .week-all-day-row .week-all-day-grid .spanning-all-day-event .continues-indicator{display:flex;align-items:center;justify-content:center;color:currentColor;z-index:2}.week-calendar-wrapper .week-calendar-body{flex:1;display:flex;position:relative;overflow-y:auto;overflow-x:hidden}.week-calendar-wrapper .week-calendar-body::-webkit-scrollbar{display:block;width:12px}.week-calendar-wrapper .week-calendar-body::-webkit-scrollbar-track{background:rgba(0,0,0,0)}.week-calendar-wrapper .week-calendar-body::-webkit-scrollbar-thumb{background-color:var(--color-scrollbar-thumb);border-radius:10px;border:4px solid rgba(0,0,0,0);background-clip:padding-box}.week-calendar-wrapper .week-calendar-body::-webkit-scrollbar-thumb:hover{background-color:var(--color-scrollbar-thumb-hover)}.week-calendar-wrapper .week-calendar-body::-webkit-scrollbar-corner{background:rgba(0,0,0,0)}.week-calendar-wrapper .week-calendar-body .week-days-container{flex:1;display:flex;min-width:0}.week-calendar-wrapper .week-calendar-body .week-days-container .week-day-column{flex:1;display:flex;flex-direction:column;min-width:0}.week-calendar-wrapper .week-calendar-body .week-days-container .week-day-column:last-child{border-right:none}.week-calendar-wrapper .week-calendar-body .week-days-container .week-day-column .week-day-content{flex:1;display:flex;flex-direction:column;border-right:1px solid var(--color-border)}.week-calendar-wrapper .week-calendar-body .week-days-container .week-day-column .week-day-content .week-day-body{flex:1;position:relative}.week-calendar-wrapper .week-calendar-body .week-days-container .week-day-column .week-day-content .week-day-body .cross-day-events-container{width:100%;height:100%;position:relative;pointer-events:auto}.week-calendar-wrapper .week-calendar-body .week-days-container .week-day-column .week-day-content .week-day-body .cross-day-events-container.drop-target{background-color:rgba(var(--color-primary-rgb), 0.3) !important;border:3px dashed var(--color-primary) !important;border-radius:8px;transition:all .2s ease;z-index:10;box-shadow:0 0 20px rgba(var(--color-primary-rgb), 0.3) !important}.week-calendar-wrapper .week-calendar-body .week-days-container .week-day-column .week-day-content .week-day-body .cross-day-events-container.drop-target .cross-day-drop-indicator{position:absolute;top:0;left:0;right:0;bottom:0;background:linear-gradient(45deg, transparent 40%, rgba(var(--color-primary-rgb), 0.1) 50%, transparent 60%);background-size:20px 20px;animation:cross-day-drag-indicator 1s linear infinite;pointer-events:none;z-index:11}.week-calendar-wrapper.has-vertical-scrollbar .week-headers-row,.week-calendar-wrapper.has-vertical-scrollbar .week-all-day-row{padding-right:var(--scrollbar-width)}.week-calendar-wrapper.has-vertical-scrollbar.mobile .week-headers-row,.week-calendar-wrapper.has-vertical-scrollbar.mobile .week-all-day-row{padding-right:var(--scrollbar-width)}@keyframes cross-day-drag-indicator{0%{background-position:0 0}100%{background-position:20px 20px}}@media(max-width: 768px){.week-calendar-wrapper .week-calendar-header{padding:8px 12px}.week-calendar-wrapper .week-calendar-header .week-navigation{gap:12px}.week-calendar-wrapper .week-calendar-header .week-navigation .week-title .week-range-title{font-size:16px}.week-calendar-wrapper .week-headers-row .week-time-header{width:50px;min-width:50px}.week-calendar-wrapper .week-headers-row .week-day-headers .week-day-header{padding:6px 2px;min-height:40px}.week-calendar-wrapper .week-headers-row .week-day-headers .week-day-header .day-of-week{font-size:10px}.week-calendar-wrapper .week-headers-row .week-day-headers .week-day-header .day-of-month{font-size:14px;width:24px;height:24px}.week-calendar-wrapper .week-all-day-row{max-height:120px}.week-calendar-wrapper .week-all-day-row .week-all-day-header{width:50px;min-width:50px}.week-calendar-wrapper .week-all-day-row .week-all-day-header .all-day-events-label{font-size:10px;padding:0 2px}.week-calendar-wrapper .week-all-day-row .week-all-day-grid{gap:2px 3px;padding:3px 6px;min-height:24px;max-height:100px}.week-calendar-wrapper .week-all-day-row .week-all-day-grid .spanning-all-day-event{font-size:10px;padding:3px 6px;min-height:20px;border-radius:3px}.week-calendar-wrapper .week-all-day-row .week-all-day-grid .spanning-all-day-event.timed{border-left-width:2px;padding-left:4px}.week-calendar-wrapper .week-all-day-row .week-all-day-grid .spanning-all-day-event.continues-left{padding-left:20px}.week-calendar-wrapper .week-all-day-row .week-all-day-grid .spanning-all-day-event.continues-left .continues-indicator.left{left:4px;font-size:8px}.week-calendar-wrapper .week-all-day-row .week-all-day-grid .spanning-all-day-event.continues-right{padding-right:20px}.week-calendar-wrapper .week-all-day-row .week-all-day-grid .spanning-all-day-event.continues-right .continues-indicator.right{right:4px;font-size:8px}.week-calendar-wrapper .week-all-day-row .week-all-day-grid .spanning-all-day-event .spanning-event-content{gap:3px}.week-calendar-wrapper .week-all-day-row .week-all-day-grid .spanning-all-day-event .spanning-event-content .event-time-icon{font-size:9px}.week-calendar-wrapper .week-all-day-row .week-all-day-grid .spanning-all-day-event .spanning-event-content .event-emoji{font-size:12px}.week-calendar-wrapper .week-all-day-row .week-all-day-grid .spanning-all-day-event .spanning-event-content .event-title{font-size:10px}.week-calendar-wrapper .week-all-day-row .week-all-day-grid .spanning-all-day-event .spanning-event-content .event-time-label{font-size:8px;margin-left:2px}.week-calendar-wrapper .week-all-day-row .week-all-day-grid .spanning-all-day-event .spanning-event-content .retry-button{font-size:9px}}",""]);const i=l},79861:(e,t,r)=>{r.r(t),r.d(t,{default:()=>ot});var a=r(64467),n=r(5544),o=r(97072),l=r(83937),i=r(96540),c=r(88652),d=r(6463),s=r(62542),u=r(42569),p=r(86319),w=r(71099),v=r(44069),f=r(87353),y=r(71468),g=r(84129);r(13474),r(81695),r(42198),r(82960);r(51743);var m=r(95927),k=r(83186),h=r(19166),b=r(67230),x=r(69975),E=r(61400),D=r(10467),_=r(54756),S=r.n(_),A=r(47767),O=r(15039),C=r(91196),R=r(71925),T=r(62977),N=r(21468),j=r(15118),z=r(28073),M=r(50329),P=r(68e3),H=r(87851),I=r(78602),F=r(90096),q=r(92089),U=r(74353),Q=r.n(U),W=r(34878),V=r(21391),Y=r(81631),L=r(80203),B=r(5060),K=r(7566),G=r(20274),J=r(38888),X=r(49785),$=r(38342),Z=r(97665),ee=(0,i.createContext)(void 0);function te(e){var t=e.children,r=(0,i.useState)({draggedEvent:null,draggedFromDate:null}),a=(0,n.A)(r,2),o=a[0],l=a[1],c=!!o.draggedEvent;return i.createElement(ee.Provider,{value:{dragState:o,setDraggedEvent:function(e,t){l(null===e?{draggedEvent:null,draggedFromDate:null}:{draggedEvent:e,draggedFromDate:t})},isDragging:c,isCrossDayDrag:function(e){return!(!o.draggedFromDate||!c)&&o.draggedFromDate.toDateString()!==e.toDateString()}}},t)}var re=r(85015),ae=r(51643),ne=r(6984);function oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function le(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(r),!0).forEach(function(t){(0,a.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oe(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function ie(e){var t=e.targetDate,r=e.startTotalMinutes,a=e.onEventUpdate,o=e.onEventError,l=e.onEventSuccess,d=e.weekStartDate,p=e.weekEndDate,w=(0,Z.jE)(),v=(0,y.wA)(),f=function(){var e=(0,i.useContext)(ee);if(void 0===e)throw new Error("useWeekDrag must be used within a WeekDragProvider");return e}(),m=f.dragState,k=f.setDraggedEvent,h=f.isDragging,b=f.isCrossDayDrag,x=re.A.useApp().modal,E=(0,i.useState)({draggedEvent:null,dropTime:null}),_=(0,n.A)(E,2),A=_[0],O=_[1],C=(0,i.useCallback)(function(e,r){k(r,t),e.dataTransfer.effectAllowed="move"},[k,t]),R=(0,i.useCallback)(function(){O({draggedEvent:null,dropTime:null}),m.draggedEvent&&k(null,null)},[k,m.draggedEvent]),T=(0,i.useCallback)(function(e,a){if(e.preventDefault(),e.dataTransfer.dropEffect="move",a&&h){var n=a.getBoundingClientRect(),o=e.clientY-n.top+a.scrollTop,l=(0,K.qI)(o/V.n.HOUR_HEIGHT*60),i=r+l,c=Math.floor(i/60),d=i%60,s=new Date(t);s.setHours(c,d,0,0),O(function(e){return le(le({},e),{},{dropTime:s})})}},[t,r,h]),N=(0,i.useCallback)(function(){O(function(e){return le(le({},e),{},{dropTime:null})})},[]),j=(0,i.useCallback)(function(){var e=(0,D.A)(S().mark(function e(t){var r,n,c,f,y,k,h,b,E;return S().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r=m.draggedEvent,n=A.dropTime,r&&n&&r._id){e.next=1;break}return R(),e.abrupt("return");case 1:if(c=r.endDate&&r.startDate?(0,X.o)(new Date(r.endDate),new Date(r.startDate)):V.n.DEFAULT_EVENT_DURATION,f=(0,$.z)(n,c),y=r._id,R(),a(y,{startDate:n,endDate:f},"update"),k=function(){var e=(0,D.A)(S().mark(function e(){var t;return S().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!d||!p){e.next=2;break}return e.next=1,(0,s.J7)(d,p);case 1:t=e.sent,v((0,g.H8)(t));case 2:return e.next=3,w.invalidateQueries({queryKey:["day-events"]});case 3:return e.next=4,w.invalidateQueries({queryKey:["events"]});case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),h=function(){var e=(0,D.A)(S().mark(function e(t){return S().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("this"!==t){e.next=2;break}return e.next=1,(0,s.qM)({_id:y,startDate:n,endDate:f});case 1:e.next=3;break;case 2:return e.next=3,(0,s.X3)(y,{startDate:n,endDate:f},t);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),e.prev=2,null===(b=r.recurrence)||void 0===b||!b.rrule){e.next=4;break}return E="this",e.next=3,new Promise(function(e,t){var r,a;x.confirm({title:(0,u.Ru)("common_confirm"),content:i.createElement(ae.Ay.Group,{defaultValue:"this",onChange:function(e){return E=e.target.value}},i.createElement(ne.A,{direction:"vertical"},i.createElement(ae.Ay,{value:"this"},(0,u.Ru)("recurring_event_this")),i.createElement(ae.Ay,{value:"future"},(0,u.Ru)("recurring_event_following")),i.createElement(ae.Ay,{value:"all"},(0,u.Ru)("recurring_event_all")))),onOk:(a=(0,D.A)(S().mark(function r(){var a;return S().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=1,h(E);case 1:return r.next=2,k();case 2:l(y),e(),r.next=4;break;case 3:r.prev=3,a=r.catch(0),o(y,"update"),t(a);case 4:case"end":return r.stop()}},r,null,[[0,3]])})),function(){return a.apply(this,arguments)}),onCancel:(r=(0,D.A)(S().mark(function t(){return S().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=1,k();case 1:return t.prev=1,l(y),e(),t.finish(1);case 2:case"end":return t.stop()}},t,null,[[0,,1,2]])})),function(){return r.apply(this,arguments)}),okText:(0,u.Ru)("common_ok"),okButtonProps:{className:"is-deep"},cancelText:(0,u.Ru)("common_cancel"),cancelButtonProps:{className:"is-deep"}})});case 3:e.next=7;break;case 4:return e.next=5,h("this");case 5:return e.next=6,k();case 6:l(y);case 7:e.next=9;break;case 8:e.prev=8,e.catch(2),o(y,"update");case 9:case"end":return e.stop()}},e,null,[[2,8]])}));return function(t){return e.apply(this,arguments)}}(),[m.draggedEvent,A.dropTime,a,o,l,w,R,d,p,v]),z=h&&(!b(t)&&(0,c.r)(t,m.draggedFromDate)||b(t)&&!!A.dropTime);return{dragState:{draggedEvent:m.draggedEvent,dropTime:A.dropTime},draggedFromDate:m.draggedFromDate,handleDragStart:C,handleDragEnd:R,handleDragOver:T,handleDragLeave:N,handleDrop:j,shouldShowDropIndicator:z,isCrossDayDrag:b(t)}}const ce=function(e){var t=e.date,r=e.events,a=e.startHour,n=e.endHour,o=e.onEdit,l=e.onStatusChange,d=e.onCreateEvent,s=e.updateEventOptimistic,u=e.setEventError,p=e.clearEventStatus,w=e.retryEventUpdate,v=e.getEventStatus,f=e.weekStartDate,y=e.weekEndDate,g=e.scrollContainerRef,m=(0,i.useRef)(null),k=(0,i.useMemo)(function(){return r.filter(function(e){return e.startDate&&(0,c.r)(new Date(e.startDate),t)})},[r,t]),h=(0,i.useMemo)(function(){return k.filter(function(e){return!e.allDayEvent})},[k]),b=(0,i.useMemo)(function(){return(0,G.H$)(h)},[h]),x=(0,i.useMemo)(function(){return(0,K.Ws)(a,V.r.START_MINUTE)},[a]),E=ie({targetDate:t,startTotalMinutes:x,onEventUpdate:s,onEventError:u,onEventSuccess:p,weekStartDate:f,weekEndDate:y});return i.createElement("div",{className:"week-day-column"},i.createElement("div",{className:"week-day-content"},i.createElement("div",{className:"week-day-body",ref:m},i.createElement(J.A,{events:h,eventLayouts:b,startHour:a,endHour:n,selectedDateIso:t.toISOString(),calendarRef:m,scrollContainerRef:g,onEditEvent:o,onStatusChange:l,onCreateEvent:d,updateEventOptimistic:s,setEventError:u,clearEventStatus:p,retryEventUpdate:w,getEventStatus:v,crossDayDragHandlers:{onDragStart:E.handleDragStart,onDragEnd:E.handleDragEnd,onDragOver:E.handleDragOver,onDragLeave:E.handleDragLeave,onDrop:E.handleDrop,shouldShowDropIndicator:E.shouldShowDropIndicator,dropTime:E.dragState.dropTime,draggedEvent:E.dragState.draggedEvent,draggedFromDate:E.draggedFromDate}}))))};var de=r(2622);const se=function(e){var t=e.date,r=e.isToday,a=e.onClick,n=(0,de.Ex)((0,k.vv)()),o=(0,q.GP)(t,"EEE",{locale:n}),l=(0,q.GP)(t,"d",{locale:n});return i.createElement("div",{className:"week-day-header flex gap-4 align-center ".concat(r?"is-today":""),onClick:function(){null==a||a(t)}},i.createElement("div",{className:"day-of-week"},o),i.createElement("div",{className:"day-of-month ".concat(r?"today-circle":"")},l))};var ue=r(60436),pe=r(93016),we=r(98163),ve=r(48497),fe=r(47402),ye=r(2831),ge=r(12268);function me(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function ke(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?me(Object(r),!0).forEach(function(t){(0,a.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):me(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function he(e){return!(!e.startDate||!e.endDate)&&(!e.allDayEvent&&(0,we.M)(new Date(e.endDate),new Date(e.startDate))>24)}function be(e,t){var r=[];return e.forEach(function(e){var a=function(e,t){if(!e.startDate||!e.endDate)return null;if(!e.allDayEvent&&!he(e))return null;var r=!e.allDayEvent&&he(e),a=(0,d.o)(new Date(e.startDate)),n=(0,d.o)(new Date(e.endDate)),o=t[0],l=t[t.length-1],i=(0,ve.Y)(a,o),s=(0,fe.d)(n,l),u=i?o:a,p=s?l:n,w=t.findIndex(function(e){return(0,c.r)(e,u)});if(-1===w)return null;var v=e.allDayEvent?(0,ye.m)(p,u):(0,ye.m)(p,u)+1,f=Math.min(v,t.length-w);return f<=0?null:{startCol:w,spanCols:f,continuesLeft:i,continuesRight:s,visibleStartDate:u,visibleEndDate:p,isTimedEvent:r}}(e,t);if(a){for(var n=ke(ke({event:e},a),{},{row:0}),o=0,l=!1;!l;){0===r.filter(function(e){return e.row===o&&(r=n,a=(t=e).startCol+t.spanCols-1,l=r.startCol+r.spanCols-1,!(a<r.startCol||l<t.startCol));var t,r,a,l}).length?(n.row=o,l=!0):o++}r.push(n)}}),r}var xe=r(87959),Ee=r(31882),De=r(32977),_e=r(26067),Se=r(40261),Ae=r(93598),Oe=r(82734),Ce=r(55646),Re=r(17825),Te=r(7080),Ne=r(66019);function je(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function ze(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?je(Object(r),!0).forEach(function(t){(0,a.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):je(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var Me=(0,i.memo)(function(e){var t=e.layout,r=e.onEdit,a=e.onStatusChange,o=e.getEventStatus,l=e.onRetry,c=t.event,d=t.continuesLeft,w=t.continuesRight,v=t.isTimedEvent,f=re.A.useApp().modal,h=(0,m.S)(),b=h.user,x=h.themeColor,E=(0,A.Zp)(),_=(0,y.wA)(),O=(0,Z.jE)(),C=(0,i.useState)(!1),R=(0,n.A)(C,2),j=R[0],H=R[1],I=(0,i.useState)(!1),F=(0,n.A)(I,2),U=F[0],Q=F[1],W=(0,i.useState)(!1),V=(0,n.A)(W,2),Y=V[0],L=V[1],B=(0,i.useState)(!1),K=(0,n.A)(B,2),G=K[0],J=K[1],X=(0,i.useMemo)(function(){return(0,de.ad)(c.title)},[c.title]),$=X.emoji,ee=X.text,te=(0,i.useMemo)(function(){if(!v||!c.startDate||!c.endDate)return null;var e=(0,q.GP)(new Date(c.startDate),"MMM d, h:mm a"),t=(0,q.GP)(new Date(c.endDate),"MMM d, h:mm a");return"".concat(e," - ").concat(t)},[v,c.startDate,c.endDate]);if(!c._id||!b)return null;var oe=o(c._id),le=(0,Re.nM)(c,b),ie=c.title.split(" "),ce=(0,de.Ve)(ie[0]),se=ce?ie.slice(1).join(" "):c.title,ue=ce?ie[0]:"",pe=function(){var e=(0,D.A)(S().mark(function e(t,r){var n;return S().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.stopPropagation(),L(!0),H(!1),n=r===p.vV?p.c:p.vV,c._id&&(null==a||a(c._id,n)),setTimeout(function(){L(!1)},300);case 1:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}(),we=function(){var e=(0,D.A)(S().mark(function e(t){var r,a;return S().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.stopPropagation(),le&&c._id){e.next=1;break}return e.abrupt("return");case 1:H(!1),Q(!1),null!==(r=c.recurrence)&&void 0!==r&&r.rrule?(a="this",f.confirm({title:(0,u.Ru)("delete_recurring_event_title"),content:i.createElement(ae.Ay.Group,{defaultValue:"this",onChange:function(e){return a=e.target.value}},i.createElement(ne.A,{direction:"vertical"},i.createElement(ae.Ay,{value:"this"},(0,u.Ru)("recurring_event_this")),i.createElement(ae.Ay,{value:"future"},(0,u.Ru)("recurring_event_following")),i.createElement(ae.Ay,{value:"all"},(0,u.Ru)("recurring_event_all")))),onOk:function(){var e=(0,D.A)(S().mark(function e(){var t,r,n;return S().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=1,(0,s.SX)(c._id,a);case 1:"this"===a?_((0,g.yQ)(c._id)):"future"!==a&&"all"!==a||(n=(null===(t=c.recurrence)||void 0===t?void 0:t.recurrenceId)||c._id,_((0,g.Vw)({recurrenceId:n,deleteType:a,fromStartDate:"future"===a?null===(r=c.startDate)||void 0===r?void 0:r.toISOString():void 0}))),O.invalidateQueries({queryKey:["day-events"]}),e.next=3;break;case 2:e.prev=2,e.catch(0);case 3:case"end":return e.stop()}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}(),okText:(0,u.Ru)("ok"),okButtonProps:{className:"is-deep"},cancelText:(0,u.Ru)("cancel"),cancelButtonProps:{className:"is-deep"}})):f.confirm({title:(0,u.Ru)("delete_event_confirm_title"),content:(0,u.Ru)("delete_event_confirm_content"),onOk:function(){var e=(0,D.A)(S().mark(function e(){return S().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=1,(0,s.SX)(c._id);case 1:_((0,g.yQ)(c._id)),O.invalidateQueries({queryKey:["day-events"]}),e.next=3;break;case 2:e.prev=2,e.catch(0);case 3:case"end":return e.stop()}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}(),okText:(0,u.Ru)("ok"),okButtonProps:{className:"is-deep"},cancelText:(0,u.Ru)("cancel"),cancelButtonProps:{className:"is-deep"}});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),ve=function(){var e=(0,D.A)(S().mark(function e(t){var r;return S().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(c._id){e.next=1;break}return e.abrupt("return");case 1:return J(!1),r=(0,Ne.YR)(t),_((0,g.tQ)(ze(ze({},c),{},{color:r||void 0}))),e.prev=2,e.next=3,(0,s.qM)({_id:c._id,color:r||void 0});case 3:e.next=5;break;case 4:return e.prev=4,e.catch(2),xe.Ay.error((0,u.Ru)("error_updating_events")),e.next=5,O.invalidateQueries({queryKey:["day-events"]});case 5:case"end":return e.stop()}},e,null,[[2,4]])}));return function(t){return e.apply(this,arguments)}}(),fe=function(){var e=(0,D.A)(S().mark(function e(t){var r;return S().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(c._id){e.next=1;break}return e.abrupt("return");case 1:return J(!1),r=t?"".concat(t," ").concat(ee):ee,_((0,g.tQ)(ze(ze({},c),{},{title:r}))),e.prev=2,e.next=3,(0,s.qM)({_id:c._id,title:r});case 3:e.next=5;break;case 4:return e.prev=4,e.catch(2),xe.Ay.error((0,u.Ru)("error_updating_events")),e.next=5,O.invalidateQueries({queryKey:["day-events"]});case 5:case"end":return e.stop()}},e,null,[[2,4]])}));return function(t){return e.apply(this,arguments)}}(),ye=function(){var e=(0,D.A)(S().mark(function e(){return S().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(c._id){e.next=1;break}return e.abrupt("return");case 1:return J(!1),_((0,g.tQ)(ze(ze({},c),{},{title:ee}))),e.prev=2,e.next=3,(0,s.qM)({_id:c._id,title:ee});case 3:e.next=5;break;case 4:return e.prev=4,e.catch(2),xe.Ay.error((0,u.Ru)("error_updating_events")),e.next=5,O.invalidateQueries({queryKey:["day-events"]});case 5:case"end":return e.stop()}},e,null,[[2,4]])}));return function(){return e.apply(this,arguments)}}(),ge=i.createElement(ne.A,{size:"small"},i.createElement(z.A,{content:i.createElement(Ne.Ay,{selectedColor:(0,Ne.EC)(c.color||""),selectedIcon:$,onColorSelect:ve,onIconSelect:fe,onIconClear:ye}),trigger:"click",placement:"top",open:G,onOpenChange:function(e){J(e),e&&H(!1)}},i.createElement(T.A,{title:le?(0,u.Ru)("icon_picker_open"):(0,u.Ru)("event_not_owner_tooltip")},i.createElement("span",null,i.createElement(N.Ay,{type:"text",className:"no-effect",icon:i.createElement(Ee.A,null),size:"small",disabled:!le})))),i.createElement(T.A,{title:(0,u.Ru)("start_working_on_this")},i.createElement("span",null,i.createElement(N.Ay,{type:"text",className:"no-effect",icon:i.createElement(De.A,{style:{color:"var(--color-primary)"}}),onClick:function(e){e.stopPropagation(),le&&(_((0,Te.Lz)((0,Te.l9)(c))),E(k.zb.path))},size:"small",disabled:!le}))),i.createElement(T.A,{title:(0,u.Ru)(c.status===p.vV?"mark_as_not_done":"mark_as_done")},i.createElement(N.Ay,{type:"text",icon:i.createElement(_e.A,null),onClick:function(e){return pe(e,c.status)},size:"small",className:"action-done ".concat(c.status===p.vV?"is-done":"")})),i.createElement(T.A,{title:le?(0,u.Ru)("event_edit"):(0,u.Ru)("event_not_owner_tooltip")},i.createElement("span",null,i.createElement(N.Ay,{type:"text",icon:i.createElement(Se.A,null),onClick:function(e){e.stopPropagation(),le&&(H(!1),Q(!1),r(c,t.visibleStartDate))},size:"small",disabled:!le}))),i.createElement(T.A,{title:le?(0,u.Ru)("event_remove"):(0,u.Ru)("event_not_owner_tooltip")},i.createElement("span",null,i.createElement(N.Ay,{type:"text",className:"no-effect",icon:i.createElement(Ae.A,null),onClick:we,danger:!0,size:"small",disabled:!le})))),me=i.createElement("div",{className:"event-details-popover"},i.createElement("h3",null,c.title),i.createElement("p",{className:"event-time-details"},v&&te?te:(0,u.Ru)("all_day")),c.description&&i.createElement(Ce.A,{description:c.description}),i.createElement("div",{className:"event-details-actions"},ge)),ke=function(e){return{gridColumn:"".concat(e.startCol+1," / span ").concat(e.spanCols),gridRow:e.row+1}}(t),he=i.createElement("div",{className:"spanning-all-day-event ".concat(v?"timed":""," ").concat(Y?"done-animation":""," ").concat(c.status===p.vV?"is-done":""," ").concat(d?"continues-left":""," ").concat(w?"continues-right":""," ").concat(oe.isLoading?"loading":""," ").concat(oe.isError?"error":""),style:{gridColumn:ke.gridColumn,gridRow:ke.gridRow,backgroundColor:c.color?(0,Ne.EC)(c.color):void 0},onClick:function(e){e.stopPropagation(),Q(!U)}},d&&i.createElement(T.A,{title:(0,u.Ru)("continues_from_previous_week")},i.createElement(M.A,{className:"continues-indicator left"})),i.createElement("div",{className:"spanning-event-content"},v&&i.createElement(Oe.A,{className:"event-time-icon"}),ue&&i.createElement("span",{className:"event-emoji"},ue),i.createElement("span",{className:"event-title"},se),v&&te&&i.createElement("span",{className:"event-time-label"},te),oe.isError&&i.createElement("button",{className:"retry-button",onClick:function(e){e.stopPropagation(),l(c._id)}},(0,u.Ru)("common_retry"))),w&&i.createElement(T.A,{title:(0,u.Ru)("continues_to_next_week")},i.createElement(P.A,{className:"continues-indicator right"})));return i.createElement(z.A,{content:me,title:null,trigger:"click",placement:"bottom",open:U,onOpenChange:Q,mouseLeaveDelay:.5,classNames:{root:"event-details-popover"}},i.createElement(z.A,{content:ge,trigger:"hover",placement:"top",open:j&&!U,onOpenChange:H,mouseLeaveDelay:.5,classNames:{root:"event-actions-popover lzv-theme-".concat(x)}},he))});Me.displayName="SpanningAllDayEvent";const Pe=Me;var He=(0,i.memo)(function(e){var t=e.events,r=e.weekDays,a=e.onEdit,n=e.onStatusChange,o=e.getEventStatus,l=e.onRetry,c=(0,i.useMemo)(function(){return function(e,t){if(0===t.length)return[];var r=(0,d.o)(t[0]),a=(0,ge.D)(t[t.length-1]);return e.filter(function(e){if(!e.startDate||!e.endDate)return!1;if(!e.allDayEvent&&!he(e))return!1;var t=(0,d.o)(new Date(e.startDate)),n=(0,d.o)(new Date(e.endDate));return!((0,fe.d)(t,a)||(0,ve.Y)(n,r))})}(t,r)},[t,r]),s=(0,i.useMemo)(function(){return be(c,r)},[c,r]),p=(0,i.useMemo)(function(){return 0===s.length?1:Math.max.apply(Math,(0,ue.A)(s.map(function(e){return e.row})))+1},[s]),w=(0,i.useMemo)(function(){return"repeat(".concat(p,", minmax(28px, auto))")},[p]);return i.createElement("div",{className:"week-all-day-row"},i.createElement("div",{className:"week-all-day-header"},i.createElement(pe.A.Text,{className:"all-day-events-label"},(0,u.Ru)("all_day"))),i.createElement("div",{className:"week-all-day-grid",style:{gridTemplateColumns:"repeat(".concat(r.length,", 1fr)"),gridTemplateRows:w}},s.map(function(e){return i.createElement(Pe,{key:"".concat(e.event._id,"-").concat(e.startCol),layout:e,onEdit:a,onStatusChange:n,getEventStatus:o,onRetry:l})})))});He.displayName="AllDayRowsContainer";const Ie=He;var Fe=r(80337),qe=r(54352),Ue=r(67670),Qe=r(79114),We=r(1045),Ve=r(16172);function Ye(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p.z,r=(0,Fe.k)(e,{weekStartsOn:t}),a=(0,qe.$)(e,{weekStartsOn:t});return(0,Ue.k)({start:r,end:a})}var Le=r(55285),Be=r(67466);r(70467),r(76837),r(37819);function Ke(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function Ge(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ke(Object(r),!0).forEach(function(t){(0,a.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ke(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var Je=(0,i.memo)(function(e){var t,r=e.date,n=e.onPrevious,o=e.onNext,l=e.onDateChange,d=e.onToday,s=e.showTodayButton,p=void 0===s||s,w=e.config,v=e.onConfigChange,f=(0,A.Zp)(),g=(0,m.S)().user,h=(0,y.d4)(function(e){return e.global.weekStartsOn}),b=(0,i.useMemo)(function(){return Ye(r,h)},[r,h]),x=function(e,t){v(Ge(Ge({},w),{},{visibleDays:Ge(Ge({},w.visibleDays),{},(0,a.A)({},e,t))}))},E=i.createElement("div",{className:"week-calendar-config-popover flex-col gap-x-8"},i.createElement("div",null,i.createElement("div",{className:"flex align-center justify-between gap-x-16"},i.createElement("div",null,(0,u.Ru)("hide_completed_activities")),i.createElement(O.A,{checked:w.hideCompletedActivities,onChange:function(e){v(Ge(Ge({},w),{},{hideCompletedActivities:e}))},size:"small"}))),i.createElement("div",null,i.createElement("div",{className:"mb-8px"},(0,u.Ru)("visible_days")),i.createElement("div",{className:"flex-col pad-left-8px"},i.createElement(C.A,{checked:w.visibleDays.monday,onChange:function(e){return x("monday",e.target.checked)}},(0,u.Ru)("common_monday")),i.createElement(C.A,{checked:w.visibleDays.tuesday,onChange:function(e){return x("tuesday",e.target.checked)}},(0,u.Ru)("common_tuesday")),i.createElement(C.A,{checked:w.visibleDays.wednesday,onChange:function(e){return x("wednesday",e.target.checked)}},(0,u.Ru)("common_wednesday")),i.createElement(C.A,{checked:w.visibleDays.thursday,onChange:function(e){return x("thursday",e.target.checked)}},(0,u.Ru)("common_thursday")),i.createElement(C.A,{checked:w.visibleDays.friday,onChange:function(e){return x("friday",e.target.checked)}},(0,u.Ru)("common_friday")),i.createElement(C.A,{checked:w.visibleDays.saturday,onChange:function(e){return x("saturday",e.target.checked)}},(0,u.Ru)("common_saturday")),i.createElement(C.A,{checked:w.visibleDays.sunday,onChange:function(e){return x("sunday",e.target.checked)}},(0,u.Ru)("common_sunday")))),i.createElement("div",{className:"mt-8px"},i.createElement("div",{className:"mb-8px"},(0,u.Ru)("calendar_days_to_show")),i.createElement(R.A,{value:w.daysToShow||7,style:{width:200},onChange:function(e){return v(Ge(Ge({},w),{},{daysToShow:e}))},options:[{value:7,label:(0,u.Ru)("calendar_days_option_whole_week")},{value:1,label:(0,u.Ru)("calendar_days_option_1")},{value:2,label:(0,u.Ru)("calendar_days_option_2")},{value:3,label:(0,u.Ru)("calendar_days_option_3")},{value:5,label:(0,u.Ru)("calendar_days_option_5")}]})),i.createElement("div",{className:"mt-8px"},i.createElement("div",{className:"mb-8px"},(0,u.Ru)("calendar_hours_range")),i.createElement("div",{className:"flex gap-x-8 align-center"},i.createElement(R.A,{value:w.startHour,style:{width:95},onChange:function(e){return v(Ge(Ge({},w),{},{startHour:e}))},options:Array.from({length:24},function(e,t){return{value:t,label:"".concat(t.toString().padStart(2,"0"),":00")}})}),i.createElement("span",null,"-"),i.createElement(R.A,{value:w.endHour,style:{width:95},onChange:function(e){return v(Ge(Ge({},w),{},{endHour:e}))},options:Array.from({length:25},function(e,t){return{value:t,label:24===t?"24:00":"".concat(t.toString().padStart(2,"0"),":00")}})})))),D=(0,i.useMemo)(function(){return 7===(w.daysToShow||7)?(0,F.R)(r,new Date):(0,c.r)(r,new Date)},[w.daysToShow,r]);return i.createElement("div",{className:"week-calendar-toolbar"},i.createElement("div",{className:"week-calendar-toolbar-content full-width flex justify-between"},i.createElement("div",{className:"week-calendar-toolbar-label flex gap-x-4 align-center"},i.createElement("span",null,(0,de.Sn)((0,q.GP)(b[0],"MMMM",{locale:(0,de.Ex)((0,k.vv)())}))),i.createElement("span",null,b[0].getFullYear()),i.createElement(T.A,{title:(0,u.Ru)("common_previous_week")},i.createElement(N.Ay,{shape:"circle",type:"text",icon:i.createElement(M.A,null),onClick:n})),i.createElement(T.A,{title:(0,u.Ru)("common_next_week")},i.createElement(N.Ay,{shape:"circle",type:"text",icon:i.createElement(P.A,null),onClick:o}))),i.createElement("div",{className:"flex gap-x-8 align-center"},!(null!=g&&null!==(t=g.preferences)&&void 0!==t&&t.calendarSyncEnabled)&&i.createElement(N.Ay,{type:"primary",icon:i.createElement(H.A,null),onClick:function(){return f(k.e1.path)}},(0,u.Ru)("calendar_sync_enabled")),p&&!D&&i.createElement(N.Ay,{type:"link",onClick:function(){var e=new Date;l(e),null==d||d()}},7===(w.daysToShow||7)?(0,u.Ru)("common_this_week"):(0,u.Ru)("common_today")),i.createElement(j.A,{variant:"filled",value:Q()(r),onChange:function(e){e&&l(e.toDate())},allowClear:!1,picker:7===(w.daysToShow||7)?"week":"date",showWeek:!1,format:function(e){if(!e)return"";var t=w.daysToShow||7;if(7===t){var r=e.startOf("week"),a=e.endOf("week");return"".concat(r.format("MMM D")," - ").concat(a.format("MMM D, YYYY"))}var n=e.startOf("day"),o=e.add(t-1,"day").endOf("day");return"".concat(n.format("MMM D")," - ").concat(o.format("MMM D, YYYY"))}}),i.createElement(z.A,{content:E,title:(0,u.Ru)("calendar_settings"),trigger:"click",placement:"bottomRight"},i.createElement(T.A,{title:(0,u.Ru)("calendar_settings")},i.createElement(N.Ay,{shape:"circle",type:"text",icon:i.createElement(I.A,null)}))))))});const Xe=function(e){var t,r,a=e.events,o=e.selectedDateIso,l=e.onDateChange,u=e.height,w=(e.title,e.titleTooltip,e.hideHeader),v=void 0!==w&&w,f=e.weekStartsOn,m=void 0===f?p.z:f,k=e.onToday,b=e.showTodayButton,x=void 0===b||b,E=(0,y.wA)(),_=(0,i.useRef)(null),A=(0,i.useMemo)(function(){return new Date(o)},[o]),O=(0,Le.lW)(),C={hideCompletedActivities:!1,visibleDays:{monday:!0,tuesday:!0,wednesday:!0,thursday:!0,friday:!0,saturday:!0,sunday:!0},daysToShow:7,startHour:V.r.START_HOUR,endHour:V.r.END_HOUR},R=(0,Be.A)("week-calendar-config",C),T=(0,n.A)(R,2),N=T[0],j=T[1],z=function(e){var t=(0,i.useState)(!1),r=(0,n.A)(t,2),a=r[0],o=r[1],l=(0,i.useState)(!1),c=(0,n.A)(l,2),d=c[0],s=c[1],u=(0,i.useState)(0),p=(0,n.A)(u,2),w=p[0],v=p[1];return(0,i.useEffect)(function(){v(function(){var e,t=document.createElement("div");t.style.visibility="hidden",t.style.overflow="scroll",t.style.msOverflowStyle="scrollbar",document.body.appendChild(t);var r=document.createElement("div");t.appendChild(r);var a=t.offsetWidth-r.offsetWidth;return null===(e=t.parentNode)||void 0===e||e.removeChild(t),a}())},[]),(0,i.useEffect)(function(){var t=e.current;if(!t)return o(!1),void s(!1);var r=function(){var e=t.scrollHeight>t.clientHeight,r=t.scrollWidth>t.clientWidth;o(e),s(r)};r();var a=new ResizeObserver(function(){r()});a.observe(t);var n=new MutationObserver(function(){r()});return n.observe(t,{childList:!0,subtree:!0,attributes:!0}),function(){a.disconnect(),n.disconnect()}},[e]),{hasVerticalScrollbar:a,hasHorizontalScrollbar:d,scrollbarWidth:w}}(_),M=z.hasVerticalScrollbar,P=(0,i.useMemo)(function(){var e=["week-calendar-wrapper"];return M&&e.push("has-vertical-scrollbar"),O.width<=768&&e.push("mobile"),e.join(" ")},[M,O.width]),H=(0,i.useCallback)(function(e){j(e)},[j]),I=(0,i.useMemo)(function(){var e=N.daysToShow||7;return 7===e?Ye(A,m):function(e,t){for(var r=(0,d.o)(e),a=[],n=0;n<t;n+=1)a.push((0,Ve.f)(r,n));return a}(A,e)},[A,m,N.daysToShow]),F=(0,i.useMemo)(function(){if(7!==(N.daysToShow||7))return I;var e={1:"monday",2:"tuesday",3:"wednesday",4:"thursday",5:"friday",6:"saturday",0:"sunday"};return I.filter(function(t){var r=e[t.getDay()];return N.visibleDays[r]})},[I,N.visibleDays,N.daysToShow]),q=(0,i.useMemo)(function(){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p.z;return{start:(0,Fe.k)(e,{weekStartsOn:t}),end:(0,qe.$)(e,{weekStartsOn:t})}}(A,m)},[A,m]),U=(0,L.p)({initEvents:a}),Q=U.events,K=U.updateEventOptimistic,G=U.setEventError,J=U.clearEventStatus,X=U.retryEventUpdate,$=U.getEventStatus,Z=(0,i.useMemo)(function(){return N.hideCompletedActivities?Q.filter(function(e){return e.status!==p.vV}):Q},[Q,N.hideCompletedActivities]),ee=(0,Y.f)(),re=ee.editingEvent,ae=ee.isModalVisible,ne=ee.openCreateModal,oe=ee.openEditModal,le=ee.closeModal,ie=(0,i.useCallback)(function(e){E((0,W.un)(e.toISOString())),null==l||l(e)},[E,l]),de=(0,i.useCallback)(function(){var e,t=N.daysToShow||7,r=7===t?(e=A,(0,We.k)(e,1)):function(e,t){return(0,Ve.f)(e,-t)}(A,t);ie(r)},[A,ie,N.daysToShow]),ue=(0,i.useCallback)(function(){var e,t=N.daysToShow||7,r=7===t?(e=A,(0,Qe.J)(e,1)):function(e,t){return(0,Ve.f)(e,t)}(A,t);ie(r)},[A,ie,N.daysToShow]),pe=(0,i.useCallback)(function(){var e=(0,D.A)(S().mark(function e(t,r){var a;return S().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.toString(),e.prev=1,K(a,{status:r},"status"),e.next=2,(0,s.JG)(a,r);case 2:J(a),e.next=4;break;case 3:e.prev=3,e.catch(1),G(a,"status");case 4:case"end":return e.stop()}},e,null,[[1,3]])}));return function(t,r){return e.apply(this,arguments)}}(),[K,J,G]),we=(0,i.useCallback)(function(){var e=(0,D.A)(S().mark(function e(t){var r,a;return S().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t._id){e.next=1;break}return e.abrupt("return");case 1:if(null!=re&&re._id?E((0,g.tQ)(t)):E((0,g.l2)(t)),e.prev=2,null===(r=t.recurrence)||void 0===r||!r.rrule){e.next=4;break}return e.next=3,(0,s.J7)(q.start,q.end);case 3:a=e.sent,E((0,g.H8)(a));case 4:e.next=6;break;case 5:e.prev=5,e.catch(2);case 6:case"end":return e.stop()}},e,null,[[2,5]])}));return function(t){return e.apply(this,arguments)}}(),[E,re,q.start,q.end]);return i.createElement(te,null,i.createElement("div",{className:P,style:{maxHeight:u}},!v&&i.createElement(Je,{date:A,onPrevious:de,onNext:ue,onDateChange:ie,onToday:k,showTodayButton:x,config:N,onConfigChange:H}),i.createElement("div",{className:"week-headers-row"},i.createElement("div",{className:"week-time-header"}),i.createElement("div",{className:"week-day-headers"},F.map(function(e){return i.createElement(se,{key:"header-".concat(e.toISOString()),date:e,isToday:(t=e,(0,c.r)(t,new Date)),onClick:ie});var t}))),i.createElement(Ie,{events:Z,weekDays:F,onEdit:oe,onStatusChange:pe,getEventStatus:$,onRetry:X}),i.createElement("div",{className:"week-calendar-body",ref:_},i.createElement("div",{className:"week-time-column"},i.createElement(B.A,{startHour:null!==(t=N.startHour)&&void 0!==t?t:V.r.START_HOUR,endHour:null!==(r=N.endHour)&&void 0!==r?r:V.r.END_HOUR})),i.createElement("div",{className:"week-days-container"},F.map(function(e){var t,r;return i.createElement(ce,{key:e.toISOString(),date:e,events:Z,startHour:null!==(t=N.startHour)&&void 0!==t?t:V.r.START_HOUR,endHour:null!==(r=N.endHour)&&void 0!==r?r:V.r.END_HOUR,onEdit:oe,onStatusChange:pe,onCreateEvent:ne,updateEventOptimistic:K,setEventError:G,clearEventStatus:J,retryEventUpdate:X,getEventStatus:$,weekStartDate:q.start,weekEndDate:q.end,scrollContainerRef:_})}))),i.createElement(h.A,{visible:ae,event:re,onClose:le,onSave:we})))};var $e=r(33930);function Ze(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function et(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ze(Object(r),!0).forEach(function(t){(0,a.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ze(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var tt=(0,u.Ru)("week_view_tab_planning"),rt=((0,u.Ru)("week_view_tab_calendar"),(0,u.Ru)("week_view_tab_todo"),(0,i.memo)(function(){var e=(0,m.S)(),t=e.screenWidth,r=e.user,a=(0,y.wA)(),l=(0,Z.jE)(),c=(0,i.useState)(!1),d=(0,n.A)(c,2),h=d[0],E=d[1],D=(0,i.useState)(),_=(0,n.A)(D,2),S=_[0],A=_[1],O=(0,i.useState)(null),C=(0,n.A)(O,2),R=C[0],T=C[1];(0,i.useEffect)(function(){E(t<=k.NU.sm)},[t]),(0,i.useEffect)(function(){if(r){var e=r.preferences||{timezone:void 0,weekStart:p.z},t=e.timezone,a=e.weekStart;A((0,w.Hq)(new Date,t,!a||a===p.z))}},[r]);var N=null==S?void 0:S.weekStartDate.toISOString(),j=null==S?void 0:S.weekEndDate.toISOString(),z=(0,$e.I)({queryKey:["week-events",N,j],queryFn:function(){return S?(0,s.J7)(S.weekStartDate,S.weekEndDate):[]},enabled:!!S&&!!r,staleTime:3e5,refetchOnWindowFocus:!1,retry:3,retryDelay:function(e){return Math.min(1e3*Math.pow(2,e),3e4)}}).data,M=void 0===z?[]:z;(0,i.useEffect)(function(){M.length>=0&&a((0,g.H8)(M))},[M,a]),(0,i.useEffect)(function(){var e;S&&r&&!0===(null===(e=r.preferences)||void 0===e?void 0:e.calendarSyncEnabled)&&(0,s.cF)(S.weekStartDate,S.weekEndDate).then(function(e){e>0&&l.invalidateQueries({queryKey:["week-events",N,j]})})},[S,N,j,l,r]);var P=(0,i.useMemo)(function(){return{conversation:R,setConversation:T,weekInfo:S,setWeekInfo:A}},[S,R]),H=i.createElement("div",{className:"flex-col ".concat(h?"gap-row-8":"gap-row-16"," full-width overflow-y-auto")},i.createElement(at,{isMobile:h})),I=S?i.createElement("div",{className:"sider-panel flex",style:{minHeight:300}},i.createElement(v.A,{type:p.QM,meta:JSON.stringify({type:p.QM,meta:{startDate:S.weekStartDate}})})):i.createElement(o.A,{active:!0});return i.createElement(f.W.Provider,{value:et({},P)},i.createElement("div",{className:"weekly-viewer-wrapper"},h?i.createElement(i.Fragment,null,H):i.createElement(i.Fragment,null,H,i.createElement(b.q,{shape:"round",initPosition:{bottom:40,right:24},icon:i.createElement("img",{src:(0,u.ID)(x),width:64}),bubbleSize:68},I))))})),at=(0,i.memo)(function(e){var t=e.isMobile,r=(0,i.useState)(tt),a=(0,n.A)(r,2);a[0],a[1];return i.createElement("div",{className:"planning-view-wrapper flex-col flex-1"},i.createElement("div",{className:"weekly-viewer-calendar-wrapper"},i.createElement(nt,{isMobile:t})))}),nt=(0,i.memo)(function(e){var t=e.isMobile,r=(0,y.d4)(function(e){return e.global.weekStartsOn}),a=(0,m.S)().user,o=(0,y.d4)(function(e){return e.weekPlanner.calendarCurrentDate}),s=(0,i.useContext)(f.W).setWeekInfo,u=(0,y.wA)(),v=l.A.useForm(),k=(0,n.A)(v,1)[0],b=i.useRef(null),x=(0,i.useState)(),D=(0,n.A)(x,2),_=D[0],S=D[1],A=(0,i.useState)(!1),O=(0,n.A)(A,2),C=O[0],R=O[1],T=(0,i.useMemo)(function(){return o?new Date(o):new Date},[o]),N=(0,y.d4)(g.zD),j=(0,i.useMemo)(function(){return N.filter(function(e){return e.startDate&&(0,c.r)(new Date(e.startDate),T)})},[N,T]);(0,i.useEffect)(function(){C&&b.current&&setTimeout(function(){var e;return null===(e=b.current)||void 0===e?void 0:e.focus()},100)},[C]);var z=(0,i.useCallback)(function(e){R(!1),S(void 0),k.resetFields()},[k]),M=(0,i.useCallback)(function(){R(!1),S(void 0),k.resetFields()},[k]),P=(0,i.useCallback)(function(e){if(a){var t=a.preferences||{timezone:void 0,weekStart:p.z},r=t.timezone,n=t.weekStart;s((0,w.Hq)(e,r,!n||n===p.z))}u((0,g.KF)((0,d.o)(e).getTime()))},[u,s,a]);return i.createElement(i.Fragment,null,i.createElement(h.A,{visible:C,event:_,onClose:M,onSave:z}),t?i.createElement(E.A,{events:j,selectedDateIso:T.toISOString(),height:"100%"}):i.createElement(Xe,{events:N,selectedDateIso:T.toISOString(),onDateChange:P,hideHeader:!1,weekStartsOn:r}))});const ot=(0,i.memo)(rt)},81695:(e,t,r)=>{var a=r(85072),n=r.n(a),o=r(97825),l=r.n(o),i=r(77659),c=r.n(i),d=r(55056),s=r.n(d),u=r(10540),p=r.n(u),w=r(41113),v=r.n(w),f=r(87624),y={};y.styleTagTransform=v(),y.setAttributes=s(),y.insert=c().bind(null,"head"),y.domAPI=l(),y.insertStyleElement=p();var g=n()(f.default,y);if(!f.default.locals||e.hot.invalidate){var m=!f.default.locals,k=m?f:f.default.locals;e.hot.accept(87624,t=>{f=r(87624),function(e,t,r){if(!e&&t||e&&!t)return!1;var a;for(a in e)if((!r||"default"!==a)&&e[a]!==t[a])return!1;for(a in t)if(!(r&&"default"===a||e[a]))return!1;return!0}(k,m?f:f.default.locals,m)?(k=m?f:f.default.locals,g(f.default)):e.hot.invalidate()})}e.hot.dispose(function(){g()});f.default&&f.default.locals&&f.default.locals},87624:(e,t,r)=>{r.r(t),r.d(t,{default:()=>i});var a=r(31601),n=r.n(a),o=r(76314),l=r.n(o)()(n());l.push([e.id,".week-todo-header{margin-bottom:32px;background:linear-gradient(135deg, var(--color-primary) 10%, var(--color-primary-bright) 100%);background-size:cover;background-attachment:fixed;width:100%;padding:50px 24px;position:relative;overflow:hidden;border-radius:0 0 85% 85%/30%;text-align:center;box-shadow:0 4px 1rem 0 rgba(0,0,0,.1)}.week-todo-header .week-todo-header-content{width:100%;height:100%;color:#fff}.week-todo-header .week-todo-header-content .week-todo-title{font-size:2rem;font-weight:600;display:block;margin-bottom:16px;color:#fff}.week-todo-header .week-todo-header-content .week-todo-description{font-size:1.2rem;color:hsla(0,0%,100%,.9);font-weight:400;margin:0}",""]);const i=l}}]);