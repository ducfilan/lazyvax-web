"use strict";(self.webpackChunklazyvax_ext=self.webpackChunklazyvax_ext||[]).push([[861],{17036:(e,t,a)=>{a.r(t),a.d(t,{default:()=>i});var r=a(31601),n=a.n(r),o=a(76314),l=a.n(o)()(n());l.push([e.id,".weekly-viewer-wrapper{height:calc(100vh - 80px);padding:16px;background:var(--color-primary-bg);border-radius:18px;overflow:hidden;max-width:100vw;display:flex;flex-direction:column}@media(max-width: 768px){.weekly-viewer-wrapper{padding:8px;height:calc(100vh - 138px)}}.weekly-viewer-wrapper [data-panel-group]{width:100%;height:100%;column-gap:16px;max-width:100%}.weekly-viewer-wrapper [data-panel]{display:flex;overflow:hidden;min-width:0}.weekly-viewer-wrapper .panel-resize-handle{width:4px;background:var(--color-border);transition:background-color .2s;flex-shrink:0}.weekly-viewer-wrapper .panel-resize-handle:hover{background:var(--color-primary)}.weekly-viewer-wrapper .week-view-sider-wrapper{flex:1;height:100%;overflow:hidden;background:var(--color-white);border-radius:18px;box-shadow:0 2px 8px rgba(0,0,0,.1);min-width:0}.weekly-viewer-wrapper .week-view-sider-wrapper .ant-card{height:100%;display:flex;flex-direction:column}.weekly-viewer-wrapper .week-view-sider-wrapper .ant-card .ant-card-body{flex:1;padding:0;overflow:hidden;display:flex;flex-direction:column}.weekly-viewer-wrapper .week-view-sider-wrapper .ant-card .ant-card-body .ant-tabs{flex:1;display:flex;flex-direction:column;overflow:hidden}.weekly-viewer-wrapper .week-view-sider-wrapper .ant-card .ant-card-body .ant-tabs .ant-tabs-content-holder{display:flex}.weekly-viewer-wrapper .week-view-sider-wrapper .ant-card .ant-card-body .ant-tabs .ant-tabs-content{flex:1;overflow:hidden}.weekly-viewer-wrapper .week-view-sider-wrapper .ant-card .ant-card-body .ant-tabs .ant-tabs-content .ant-tabs-tabpane{height:100%}.weekly-viewer-wrapper .planning-view-wrapper{flex:1;min-height:0;display:flex;flex-direction:column}@media(max-width: 768px){.weekly-viewer-wrapper .planning-view-wrapper{height:100%}}.weekly-viewer-wrapper .weekly-viewer-calendar-wrapper{flex:1;min-height:0;overflow:auto;background:var(--color-white);border-radius:18px;box-shadow:0 2px 8px rgba(0,0,0,.1)}@media(max-width: 768px){.weekly-viewer-wrapper .weekly-viewer-calendar-wrapper{border-radius:4px;box-shadow:none}.weekly-viewer-wrapper .weekly-viewer-calendar-wrapper .rbc-calendar{height:100%}}.weekly-viewer-wrapper .lzv-chat-conversation{height:100%;overflow:hidden}.ant-drawer .sider-panel{height:100%;border-radius:0;box-shadow:none}@media(max-width: 768px){.rbc-toolbar{flex-direction:column;gap:8px;padding:8px;flex-shrink:0}.rbc-toolbar .rbc-toolbar-label{font-size:18px}.rbc-toolbar .rbc-btn-group{width:100%;display:flex;justify-content:center;gap:4px}.rbc-toolbar .rbc-btn-group button{flex:1}.rbc-calendar{display:flex;flex-direction:column;height:100%}.rbc-calendar .rbc-time-view{flex:1;min-height:0;display:flex;flex-direction:column}.rbc-calendar .rbc-time-view .rbc-time-header{flex-shrink:0}.rbc-calendar .rbc-time-view .rbc-time-content{flex:1;min-height:0;overflow-y:auto}.rbc-time-content .rbc-events-container{margin-right:0}.rbc-time-header-content .rbc-header{padding:4px;font-size:12px}.rbc-time-slot{min-height:40px}.rbc-event{padding:2px 4px}.rbc-event .event-title{font-size:11px}.rbc-event .event-time{font-size:10px}.rbc-time-view .rbc-row{min-height:24px}.rbc-time-header.rbc-overflowing{margin-right:0}}",""]);const i=l},37819:(e,t,a)=>{var r=a(85072),n=a.n(r),o=a(97825),l=a.n(o),i=a(77659),c=a.n(i),d=a(55056),s=a.n(d),u=a(10540),p=a.n(u),w=a(41113),v=a.n(w),f=a(64184),m={};m.styleTagTransform=v(),m.setAttributes=s(),m.insert=c().bind(null,"head"),m.domAPI=l(),m.insertStyleElement=p();var y=n()(f.default,m);if(!f.default.locals||e.hot.invalidate){var g=!f.default.locals,k=g?f:f.default.locals;e.hot.accept(64184,t=>{f=a(64184),function(e,t,a){if(!e&&t||e&&!t)return!1;var r;for(r in e)if((!a||"default"!==r)&&e[r]!==t[r])return!1;for(r in t)if(!(a&&"default"===r||e[r]))return!1;return!0}(k,g?f:f.default.locals,g)?(k=g?f:f.default.locals,y(f.default)):e.hot.invalidate()})}e.hot.dispose(function(){y()});f.default&&f.default.locals&&f.default.locals},51743:(e,t,a)=>{var r=a(85072),n=a.n(r),o=a(97825),l=a.n(o),i=a(77659),c=a.n(i),d=a(55056),s=a.n(d),u=a(10540),p=a.n(u),w=a(41113),v=a.n(w),f=a(17036),m={};m.styleTagTransform=v(),m.setAttributes=s(),m.insert=c().bind(null,"head"),m.domAPI=l(),m.insertStyleElement=p();var y=n()(f.default,m);if(!f.default.locals||e.hot.invalidate){var g=!f.default.locals,k=g?f:f.default.locals;e.hot.accept(17036,t=>{f=a(17036),function(e,t,a){if(!e&&t||e&&!t)return!1;var r;for(r in e)if((!a||"default"!==r)&&e[r]!==t[r])return!1;for(r in t)if(!(a&&"default"===r||e[r]))return!1;return!0}(k,g?f:f.default.locals,g)?(k=g?f:f.default.locals,y(f.default)):e.hot.invalidate()})}e.hot.dispose(function(){y()});f.default&&f.default.locals&&f.default.locals},64184:(e,t,a)=>{a.r(t),a.d(t,{default:()=>i});var r=a(31601),n=a.n(r),o=a(76314),l=a.n(o)()(n());l.push([e.id,".week-calendar-wrapper{--scrollbar-width: 13px;display:flex;flex-direction:column;border-radius:8px;background-color:var(--color-primary-bg);max-height:100%}.week-calendar-wrapper .week-calendar-toolbar{background:var(--color-white);padding:12px 16px;border-radius:8px 8px 0 0}.week-calendar-wrapper .week-calendar-toolbar .week-calendar-toolbar-content{display:flex;align-items:center;justify-content:space-between;width:100%}.week-calendar-wrapper .week-calendar-toolbar .week-calendar-toolbar-content .week-calendar-toolbar-label>span:nth-child(1){font-size:24px;font-weight:bold}.week-calendar-wrapper .week-calendar-toolbar .week-calendar-toolbar-content .week-calendar-toolbar-label>span:nth-child(2){font-size:24px;line-height:1.35;font-weight:lighter}.week-calendar-wrapper .week-calendar-toolbar .week-calendar-toolbar-content .ant-btn{border-radius:6px}.week-calendar-wrapper .week-calendar-toolbar .week-calendar-toolbar-content .ant-picker{border-radius:6px}.week-calendar-wrapper .week-headers-row{display:flex;border-bottom:1px solid var(--color-border);background-color:var(--color-primary-bg);padding-right:0;transition:padding-right .1s ease}.week-calendar-wrapper .week-headers-row .week-time-header{width:60px;min-width:60px;background-color:var(--color-primary-bg)}.week-calendar-wrapper .week-headers-row .week-day-headers{flex:1;display:flex}.week-calendar-wrapper .week-headers-row .week-day-headers .week-day-header{flex:1;padding:8px 4px;background-color:var(--color-primary-bg);cursor:pointer;transition:background-color .2s ease}.week-calendar-wrapper .week-headers-row .week-day-headers .week-day-header:last-child{border-right:none}.week-calendar-wrapper .week-headers-row .week-day-headers .week-day-header.is-today{color:var(--color-primary)}.week-calendar-wrapper .week-headers-row .week-day-headers .week-day-header .day-of-week{font-size:12px;font-weight:500;color:var(--color-text-secondary);line-height:28px;text-transform:uppercase}.week-calendar-wrapper .week-headers-row .week-day-headers .week-day-header .day-of-month{font-size:16px;font-weight:600;color:var(--color-text);display:flex;align-items:center;justify-content:center;width:28px;height:28px;transition:all .2s ease}.week-calendar-wrapper .week-headers-row .week-day-headers .week-day-header .day-of-month.today-circle{background-color:var(--color-primary);color:#fff;border-radius:50%;font-weight:700}.week-calendar-wrapper .week-headers-row .week-day-headers .week-day-header.is-today .day-of-week{color:var(--color-primary)}.week-calendar-wrapper .week-all-day-row{display:flex;border-bottom:1px solid var(--color-border);background-color:var(--color-primary-bg);padding-right:0;transition:padding-right .1s ease;max-height:140px}.week-calendar-wrapper .week-all-day-row .week-all-day-header{width:60px;min-width:60px;display:flex;align-items:center;justify-content:center;border-right:1px solid var(--color-border);background-color:var(--color-primary-bg)}.week-calendar-wrapper .week-all-day-row .week-all-day-header .all-day-events-label{font-size:11px;color:var(--color-text-secondary);font-weight:500;text-align:center;padding:0 4px}.week-calendar-wrapper .week-all-day-row .week-all-day-grid{flex:1;display:grid;gap:2px 4px;padding:4px 8px;position:relative;min-height:28px;max-height:120px;overflow-y:auto;overflow-x:hidden}.week-calendar-wrapper .week-all-day-row .week-all-day-grid::-webkit-scrollbar{display:block;width:12px}.week-calendar-wrapper .week-all-day-row .week-all-day-grid::-webkit-scrollbar-track{background:rgba(0,0,0,0)}.week-calendar-wrapper .week-all-day-row .week-all-day-grid::-webkit-scrollbar-thumb{background-color:var(--color-scrollbar-thumb);border-radius:10px;border:4px solid rgba(0,0,0,0);background-clip:padding-box}.week-calendar-wrapper .week-all-day-row .week-all-day-grid::-webkit-scrollbar-thumb:hover{background-color:var(--color-scrollbar-thumb-hover)}.week-calendar-wrapper .week-all-day-row .week-all-day-grid::-webkit-scrollbar-corner{background:rgba(0,0,0,0)}.week-calendar-wrapper .week-all-day-row .week-all-day-grid .spanning-all-day-event{display:flex;align-items:center;background-color:var(--color-primary-light);border-radius:4px;padding:4px 8px;font-size:12px;font-weight:500;color:var(--color-text);cursor:pointer;transition:all .2s ease;border:1px solid rgba(0,0,0,0);position:relative;overflow:hidden;min-height:24px;box-shadow:0 1px 2px rgba(0,0,0,.05)}.week-calendar-wrapper .week-all-day-row .week-all-day-grid .spanning-all-day-event:hover{background-color:var(--color-primary-hover);transform:translateY(-1px);box-shadow:0 2px 6px rgba(0,0,0,.12);z-index:10}.week-calendar-wrapper .week-all-day-row .week-all-day-grid .spanning-all-day-event.is-done{opacity:.7;text-decoration:line-through;background-color:var(--color-success-bg);color:var(--color-text-secondary)}.week-calendar-wrapper .week-all-day-row .week-all-day-grid .spanning-all-day-event.loading{opacity:.6;pointer-events:none;background-color:var(--color-bg-gray-light)}.week-calendar-wrapper .week-all-day-row .week-all-day-grid .spanning-all-day-event.error{background-color:var(--color-error-bg);border-color:var(--color-error);color:var(--color-error)}.week-calendar-wrapper .week-all-day-row .week-all-day-grid .spanning-all-day-event.done-animation{animation:statusChangeAnimation .3s cubic-bezier(0.34, 1.56, 0.64, 1)}.week-calendar-wrapper .week-all-day-row .week-all-day-grid .spanning-all-day-event.continues-left{border-top-left-radius:0;border-bottom-left-radius:0;padding-left:24px}.week-calendar-wrapper .week-all-day-row .week-all-day-grid .spanning-all-day-event.continues-left .continues-indicator.left{position:absolute;left:6px;font-size:10px;opacity:.6}.week-calendar-wrapper .week-all-day-row .week-all-day-grid .spanning-all-day-event.continues-right{border-top-right-radius:0;border-bottom-right-radius:0;padding-right:24px}.week-calendar-wrapper .week-all-day-row .week-all-day-grid .spanning-all-day-event.continues-right .continues-indicator.right{position:absolute;right:6px;font-size:10px;opacity:.6}.week-calendar-wrapper .week-all-day-row .week-all-day-grid .spanning-all-day-event.timed{background-color:var(--color-bg-gray-light);border-left:3px solid var(--color-primary);padding-left:6px}.week-calendar-wrapper .week-all-day-row .week-all-day-grid .spanning-all-day-event.timed:hover{background-color:var(--color-bg-gray)}.week-calendar-wrapper .week-all-day-row .week-all-day-grid .spanning-all-day-event.has-accent{border-left:3px solid;padding-left:6px}.week-calendar-wrapper .week-all-day-row .week-all-day-grid .spanning-all-day-event .spanning-event-content{display:flex;align-items:center;gap:4px;flex:1;overflow:hidden;z-index:1}.week-calendar-wrapper .week-all-day-row .week-all-day-grid .spanning-all-day-event .spanning-event-content .event-time-icon{font-size:11px;color:var(--color-primary);flex-shrink:0;opacity:.8}.week-calendar-wrapper .week-all-day-row .week-all-day-grid .spanning-all-day-event .spanning-event-content .event-emoji{font-size:14px;line-height:1;flex-shrink:0}.week-calendar-wrapper .week-all-day-row .week-all-day-grid .spanning-all-day-event .spanning-event-content .event-title{flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;line-height:1.2}.week-calendar-wrapper .week-all-day-row .week-all-day-grid .spanning-all-day-event .spanning-event-content .event-time-label{font-size:10px;color:var(--color-text-secondary);flex-shrink:0;margin-left:4px;white-space:nowrap;opacity:.9}.week-calendar-wrapper .week-all-day-row .week-all-day-grid .spanning-all-day-event .spanning-event-content .retry-button{background:none;border:none;color:inherit;cursor:pointer;font-size:10px;text-decoration:underline;padding:0;margin-left:4px}.week-calendar-wrapper .week-all-day-row .week-all-day-grid .spanning-all-day-event .spanning-event-content .retry-button:hover{opacity:.8}.week-calendar-wrapper .week-all-day-row .week-all-day-grid .spanning-all-day-event .continues-indicator{display:flex;align-items:center;justify-content:center;color:currentColor;z-index:2}.week-calendar-wrapper .week-calendar-body{flex:1;display:flex;position:relative;overflow-y:auto;overflow-x:hidden}.week-calendar-wrapper .week-calendar-body::-webkit-scrollbar{display:block;width:12px}.week-calendar-wrapper .week-calendar-body::-webkit-scrollbar-track{background:rgba(0,0,0,0)}.week-calendar-wrapper .week-calendar-body::-webkit-scrollbar-thumb{background-color:var(--color-scrollbar-thumb);border-radius:10px;border:4px solid rgba(0,0,0,0);background-clip:padding-box}.week-calendar-wrapper .week-calendar-body::-webkit-scrollbar-thumb:hover{background-color:var(--color-scrollbar-thumb-hover)}.week-calendar-wrapper .week-calendar-body::-webkit-scrollbar-corner{background:rgba(0,0,0,0)}.week-calendar-wrapper .week-calendar-body .week-days-container{flex:1;display:flex;min-width:0}.week-calendar-wrapper .week-calendar-body .week-days-container .week-day-column{flex:1;display:flex;flex-direction:column;min-width:0}.week-calendar-wrapper .week-calendar-body .week-days-container .week-day-column:last-child{border-right:none}.week-calendar-wrapper .week-calendar-body .week-days-container .week-day-column .week-day-content{flex:1;display:flex;flex-direction:column;border-right:1px solid var(--color-border)}.week-calendar-wrapper .week-calendar-body .week-days-container .week-day-column .week-day-content .week-day-body{flex:1;position:relative}.week-calendar-wrapper .week-calendar-body .week-days-container .week-day-column .week-day-content .week-day-body .cross-day-events-container{width:100%;height:100%;position:relative;pointer-events:auto}.week-calendar-wrapper .week-calendar-body .week-days-container .week-day-column .week-day-content .week-day-body .cross-day-events-container.drop-target{background-color:rgba(var(--color-primary-rgb), 0.3) !important;border:3px dashed var(--color-primary) !important;border-radius:8px;transition:all .2s ease;z-index:10;box-shadow:0 0 20px rgba(var(--color-primary-rgb), 0.3) !important}.week-calendar-wrapper .week-calendar-body .week-days-container .week-day-column .week-day-content .week-day-body .cross-day-events-container.drop-target .cross-day-drop-indicator{position:absolute;top:0;left:0;right:0;bottom:0;background:linear-gradient(45deg, transparent 40%, rgba(var(--color-primary-rgb), 0.1) 50%, transparent 60%);background-size:20px 20px;animation:cross-day-drag-indicator 1s linear infinite;pointer-events:none;z-index:11}.week-calendar-wrapper.has-vertical-scrollbar .week-headers-row,.week-calendar-wrapper.has-vertical-scrollbar .week-all-day-row{padding-right:var(--scrollbar-width)}.week-calendar-wrapper.has-vertical-scrollbar.mobile .week-headers-row,.week-calendar-wrapper.has-vertical-scrollbar.mobile .week-all-day-row{padding-right:var(--scrollbar-width)}@keyframes cross-day-drag-indicator{0%{background-position:0 0}100%{background-position:20px 20px}}@media(max-width: 768px){.week-calendar-wrapper .week-calendar-header{padding:8px 12px}.week-calendar-wrapper .week-calendar-header .week-navigation{gap:12px}.week-calendar-wrapper .week-calendar-header .week-navigation .week-title .week-range-title{font-size:16px}.week-calendar-wrapper .week-headers-row .week-time-header{width:50px;min-width:50px}.week-calendar-wrapper .week-headers-row .week-day-headers .week-day-header{padding:6px 2px;min-height:40px}.week-calendar-wrapper .week-headers-row .week-day-headers .week-day-header .day-of-week{font-size:10px}.week-calendar-wrapper .week-headers-row .week-day-headers .week-day-header .day-of-month{font-size:14px;width:24px;height:24px}.week-calendar-wrapper .week-all-day-row{max-height:120px}.week-calendar-wrapper .week-all-day-row .week-all-day-header{width:50px;min-width:50px}.week-calendar-wrapper .week-all-day-row .week-all-day-header .all-day-events-label{font-size:10px;padding:0 2px}.week-calendar-wrapper .week-all-day-row .week-all-day-grid{gap:2px 3px;padding:3px 6px;min-height:24px;max-height:100px}.week-calendar-wrapper .week-all-day-row .week-all-day-grid .spanning-all-day-event{font-size:10px;padding:3px 6px;min-height:20px;border-radius:3px}.week-calendar-wrapper .week-all-day-row .week-all-day-grid .spanning-all-day-event.timed{border-left-width:2px;padding-left:4px}.week-calendar-wrapper .week-all-day-row .week-all-day-grid .spanning-all-day-event.continues-left{padding-left:20px}.week-calendar-wrapper .week-all-day-row .week-all-day-grid .spanning-all-day-event.continues-left .continues-indicator.left{left:4px;font-size:8px}.week-calendar-wrapper .week-all-day-row .week-all-day-grid .spanning-all-day-event.continues-right{padding-right:20px}.week-calendar-wrapper .week-all-day-row .week-all-day-grid .spanning-all-day-event.continues-right .continues-indicator.right{right:4px;font-size:8px}.week-calendar-wrapper .week-all-day-row .week-all-day-grid .spanning-all-day-event .spanning-event-content{gap:3px}.week-calendar-wrapper .week-all-day-row .week-all-day-grid .spanning-all-day-event .spanning-event-content .event-time-icon{font-size:9px}.week-calendar-wrapper .week-all-day-row .week-all-day-grid .spanning-all-day-event .spanning-event-content .event-emoji{font-size:12px}.week-calendar-wrapper .week-all-day-row .week-all-day-grid .spanning-all-day-event .spanning-event-content .event-title{font-size:10px}.week-calendar-wrapper .week-all-day-row .week-all-day-grid .spanning-all-day-event .spanning-event-content .event-time-label{font-size:8px;margin-left:2px}.week-calendar-wrapper .week-all-day-row .week-all-day-grid .spanning-all-day-event .spanning-event-content .retry-button{font-size:9px}}.week-calendar-config-popover .calendar-filter-item{display:inline-flex;align-items:center;gap:6px}.week-calendar-config-popover .calendar-filter-item .calendar-color-dot{width:10px;height:10px;border-radius:50%;flex-shrink:0}",""]);const i=l},79861:(e,t,a)=>{a.r(t),a.d(t,{default:()=>it});var r=a(64467),n=a(5544),o=a(97072),l=a(83937),i=a(96540),c=a(88652),d=a(6463),s=a(62542),u=a(47003),p=a(42569),w=a(86319),v=a(71099),f=a(44069),m=a(87353),y=a(71468),g=a(84129);a(13474),a(81695),a(42198),a(82960);a(51743);var k=a(95927),h=a(83186),b=a(19166),x=a(67230),E=a(69975),D=a(61400),_=a(10467),S=a(60436),A=a(54756),C=a.n(A),O=a(47767),R=a(15039),N=a(91196),T=a(71925),j=a(62977),M=a(21468),z=a(15118),P=a(28073),I=a(50329),H=a(68e3),F=a(87851),q=a(78602),U=a(90096),Q=a(92089),W=a(74353),V=a.n(W),Y=a(34878),L=a(21391),B=a(81631),K=a(80203),G=a(5060),J=a(7566),X=a(20274),$=a(38888),Z=a(49785),ee=a(38342),te=a(97665),ae=(0,i.createContext)(void 0);function re(e){var t=e.children,a=(0,i.useState)({draggedEvent:null,draggedFromDate:null}),r=(0,n.A)(a,2),o=r[0],l=r[1],c=!!o.draggedEvent;return i.createElement(ae.Provider,{value:{dragState:o,setDraggedEvent:function(e,t){l(null===e?{draggedEvent:null,draggedFromDate:null}:{draggedEvent:e,draggedFromDate:t})},isDragging:c,isCrossDayDrag:function(e){return!(!o.draggedFromDate||!c)&&o.draggedFromDate.toDateString()!==e.toDateString()}}},t)}var ne=a(85015),oe=a(51643),le=a(6984);function ie(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function ce(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(a),!0).forEach(function(t){(0,r.A)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ie(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function de(e){var t=e.targetDate,a=e.startTotalMinutes,r=e.onEventUpdate,o=e.onEventError,l=e.onEventSuccess,d=e.weekStartDate,u=e.weekEndDate,w=(0,te.jE)(),v=(0,y.wA)(),f=function(){var e=(0,i.useContext)(ae);if(void 0===e)throw new Error("useWeekDrag must be used within a WeekDragProvider");return e}(),m=f.dragState,k=f.setDraggedEvent,h=f.isDragging,b=f.isCrossDayDrag,x=ne.A.useApp().modal,E=(0,i.useState)({draggedEvent:null,dropTime:null}),D=(0,n.A)(E,2),S=D[0],A=D[1],O=(0,i.useCallback)(function(e,a){k(a,t),e.dataTransfer.effectAllowed="move"},[k,t]),R=(0,i.useCallback)(function(){A({draggedEvent:null,dropTime:null}),m.draggedEvent&&k(null,null)},[k,m.draggedEvent]),N=(0,i.useCallback)(function(e,r){if(e.preventDefault(),e.dataTransfer.dropEffect="move",r&&h){var n=r.getBoundingClientRect(),o=e.clientY-n.top+r.scrollTop,l=(0,J.qI)(o/L.n.HOUR_HEIGHT*60),i=a+l,c=Math.floor(i/60),d=i%60,s=new Date(t);s.setHours(c,d,0,0),A(function(e){return ce(ce({},e),{},{dropTime:s})})}},[t,a,h]),T=(0,i.useCallback)(function(){A(function(e){return ce(ce({},e),{},{dropTime:null})})},[]),j=(0,i.useCallback)(function(){var e=(0,_.A)(C().mark(function e(t){var a,n,c,f,y,k,h,b,E;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=m.draggedEvent,n=S.dropTime,a&&n&&a._id){e.next=1;break}return R(),e.abrupt("return");case 1:if(c=a.endDate&&a.startDate?(0,Z.o)(new Date(a.endDate),new Date(a.startDate)):L.n.DEFAULT_EVENT_DURATION,f=(0,ee.z)(n,c),y=a._id,R(),r(y,{startDate:n,endDate:f},"update"),k=function(){var e=(0,_.A)(C().mark(function e(){var t;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!d||!u){e.next=2;break}return e.next=1,(0,s.J7)(d,u);case 1:t=e.sent,v((0,g.H8)(t));case 2:return e.next=3,w.invalidateQueries({queryKey:["day-events"]});case 3:return e.next=4,w.invalidateQueries({queryKey:["events"]});case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),h=function(){var e=(0,_.A)(C().mark(function e(t){return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("this"!==t){e.next=2;break}return e.next=1,(0,s.qM)({_id:y,startDate:n,endDate:f});case 1:e.next=3;break;case 2:return e.next=3,(0,s.X3)(y,{startDate:n,endDate:f},t);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),e.prev=2,null===(b=a.recurrence)||void 0===b||!b.rrule){e.next=4;break}return E="this",e.next=3,new Promise(function(e,t){var a,r;x.confirm({title:(0,p.Ru)("common_confirm"),content:i.createElement(oe.Ay.Group,{defaultValue:"this",onChange:function(e){return E=e.target.value}},i.createElement(le.A,{direction:"vertical"},i.createElement(oe.Ay,{value:"this"},(0,p.Ru)("recurring_event_this")),i.createElement(oe.Ay,{value:"future"},(0,p.Ru)("recurring_event_following")),i.createElement(oe.Ay,{value:"all"},(0,p.Ru)("recurring_event_all")))),onOk:(r=(0,_.A)(C().mark(function a(){var r;return C().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=1,h(E);case 1:return a.next=2,k();case 2:l(y),e(),a.next=4;break;case 3:a.prev=3,r=a.catch(0),o(y,"update"),t(r);case 4:case"end":return a.stop()}},a,null,[[0,3]])})),function(){return r.apply(this,arguments)}),onCancel:(a=(0,_.A)(C().mark(function t(){return C().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=1,k();case 1:return t.prev=1,l(y),e(),t.finish(1);case 2:case"end":return t.stop()}},t,null,[[0,,1,2]])})),function(){return a.apply(this,arguments)}),okText:(0,p.Ru)("common_ok"),okButtonProps:{className:"is-deep"},cancelText:(0,p.Ru)("common_cancel"),cancelButtonProps:{className:"is-deep"}})});case 3:e.next=7;break;case 4:return e.next=5,h("this");case 5:return e.next=6,k();case 6:l(y);case 7:e.next=9;break;case 8:e.prev=8,e.catch(2),o(y,"update");case 9:case"end":return e.stop()}},e,null,[[2,8]])}));return function(t){return e.apply(this,arguments)}}(),[m.draggedEvent,S.dropTime,r,o,l,w,R,d,u,v]),M=h&&(!b(t)&&(0,c.r)(t,m.draggedFromDate)||b(t)&&!!S.dropTime);return{dragState:{draggedEvent:m.draggedEvent,dropTime:S.dropTime},draggedFromDate:m.draggedFromDate,handleDragStart:O,handleDragEnd:R,handleDragOver:N,handleDragLeave:T,handleDrop:j,shouldShowDropIndicator:M,isCrossDayDrag:b(t)}}const se=function(e){var t=e.date,a=e.events,r=e.startHour,n=e.endHour,o=e.onEdit,l=e.onStatusChange,d=e.onCreateEvent,s=e.updateEventOptimistic,u=e.setEventError,p=e.clearEventStatus,w=e.retryEventUpdate,v=e.getEventStatus,f=e.weekStartDate,m=e.weekEndDate,y=e.scrollContainerRef,g=(0,i.useRef)(null),k=(0,i.useMemo)(function(){return a.filter(function(e){return e.startDate&&(0,c.r)(new Date(e.startDate),t)})},[a,t]),h=(0,i.useMemo)(function(){return k.filter(function(e){return!e.allDayEvent})},[k]),b=(0,i.useMemo)(function(){return(0,X.H$)(h)},[h]),x=(0,i.useMemo)(function(){return(0,J.Ws)(r,L.r.START_MINUTE)},[r]),E=de({targetDate:t,startTotalMinutes:x,onEventUpdate:s,onEventError:u,onEventSuccess:p,weekStartDate:f,weekEndDate:m});return i.createElement("div",{className:"week-day-column"},i.createElement("div",{className:"week-day-content"},i.createElement("div",{className:"week-day-body",ref:g},i.createElement($.A,{events:h,eventLayouts:b,startHour:r,endHour:n,selectedDateIso:t.toISOString(),calendarRef:g,scrollContainerRef:y,onEditEvent:o,onStatusChange:l,onCreateEvent:d,updateEventOptimistic:s,setEventError:u,clearEventStatus:p,retryEventUpdate:w,getEventStatus:v,crossDayDragHandlers:{onDragStart:E.handleDragStart,onDragEnd:E.handleDragEnd,onDragOver:E.handleDragOver,onDragLeave:E.handleDragLeave,onDrop:E.handleDrop,shouldShowDropIndicator:E.shouldShowDropIndicator,dropTime:E.dragState.dropTime,draggedEvent:E.dragState.draggedEvent,draggedFromDate:E.draggedFromDate}}))))};var ue=a(2622);const pe=function(e){var t=e.date,a=e.isToday,r=e.onClick,n=(0,ue.Ex)((0,h.vv)()),o=(0,Q.GP)(t,"EEE",{locale:n}),l=(0,Q.GP)(t,"d",{locale:n});return i.createElement("div",{className:"week-day-header flex gap-4 align-center ".concat(a?"is-today":""),onClick:function(){null==r||r(t)}},i.createElement("div",{className:"day-of-week"},o),i.createElement("div",{className:"day-of-month ".concat(a?"today-circle":"")},l))};var we=a(93016),ve=a(98163),fe=a(48497),me=a(47402),ye=a(2831),ge=a(12268);function ke(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function he(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ke(Object(a),!0).forEach(function(t){(0,r.A)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ke(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function be(e){return!(!e.startDate||!e.endDate)&&(!e.allDayEvent&&(0,ve.M)(new Date(e.endDate),new Date(e.startDate))>24)}function xe(e,t){var a=[];return e.forEach(function(e){var r=function(e,t){if(!e.startDate||!e.endDate)return null;if(!e.allDayEvent&&!be(e))return null;var a=!e.allDayEvent&&be(e),r=(0,d.o)(new Date(e.startDate)),n=(0,d.o)(new Date(e.endDate)),o=t[0],l=t[t.length-1],i=(0,fe.Y)(r,o),s=(0,me.d)(n,l),u=i?o:r,p=s?l:n,w=t.findIndex(function(e){return(0,c.r)(e,u)});if(-1===w)return null;var v=e.allDayEvent?(0,ye.m)(p,u):(0,ye.m)(p,u)+1,f=Math.min(v,t.length-w);return f<=0?null:{startCol:w,spanCols:f,continuesLeft:i,continuesRight:s,visibleStartDate:u,visibleEndDate:p,isTimedEvent:a}}(e,t);if(r){for(var n=he(he({event:e},r),{},{row:0}),o=0,l=!1;!l;){0===a.filter(function(e){return e.row===o&&(a=n,r=(t=e).startCol+t.spanCols-1,l=a.startCol+a.spanCols-1,!(r<a.startCol||l<t.startCol));var t,a,r,l}).length?(n.row=o,l=!0):o++}a.push(n)}}),a}var Ee=a(31882),De=a(32977),_e=a(26067),Se=a(40261),Ae=a(93598),Ce=a(82734),Oe=a(55646),Re=a(17825),Ne=a(7080),Te=a(66019),je=a(16480);function Me(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function ze(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(a),!0).forEach(function(t){(0,r.A)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Me(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Pe=(0,i.memo)(function(e){var t=e.layout,a=e.onEdit,r=e.onStatusChange,o=e.getEventStatus,l=e.onRetry,c=t.event,d=t.continuesLeft,u=t.continuesRight,v=t.isTimedEvent,f=ne.A.useApp(),m=f.modal,b=f.message,x=(0,k.S)(),E=x.user,D=x.themeColor,S=(0,O.Zp)(),A=(0,y.wA)(),R=(0,te.jE)(),N=(0,je.E)().getCalendarById,T=(0,i.useState)(!1),z=(0,n.A)(T,2),F=z[0],q=z[1],U=(0,i.useState)(!1),W=(0,n.A)(U,2),V=W[0],Y=W[1],L=(0,i.useState)(!1),B=(0,n.A)(L,2),K=B[0],G=B[1],J=(0,i.useState)(!1),X=(0,n.A)(J,2),$=X[0],Z=X[1],ee=N(c.connectedCalendarId),ae=(0,i.useMemo)(function(){return(0,ue.ad)(c.title)},[c.title]),re=ae.emoji,ie=ae.text,ce=(0,i.useMemo)(function(){if(!v||!c.startDate||!c.endDate)return null;var e=(0,Q.GP)(new Date(c.startDate),"MMM d, h:mm a"),t=(0,Q.GP)(new Date(c.endDate),"MMM d, h:mm a");return"".concat(e," - ").concat(t)},[v,c.startDate,c.endDate]);if(!c._id||!E)return null;var de=o(c._id),se=(0,Re.nM)(c,E),pe=c.title.split(" "),we=(0,ue.Ve)(pe[0]),ve=we?pe.slice(1).join(" "):c.title,fe=we?pe[0]:"",me=function(){var e=(0,_.A)(C().mark(function e(t,a){var n;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.stopPropagation(),G(!0),q(!1),n=a===w.vV?w.c:w.vV,c._id&&(null==r||r(c._id,n)),setTimeout(function(){G(!1)},300);case 1:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),ye=function(){var e=(0,_.A)(C().mark(function e(t){var a,r;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.stopPropagation(),se&&c._id){e.next=1;break}return e.abrupt("return");case 1:q(!1),Y(!1),null!==(a=c.recurrence)&&void 0!==a&&a.rrule?(r="this",m.confirm({title:(0,p.Ru)("delete_recurring_event_title"),content:i.createElement(oe.Ay.Group,{defaultValue:"this",onChange:function(e){return r=e.target.value}},i.createElement(le.A,{direction:"vertical"},i.createElement(oe.Ay,{value:"this"},(0,p.Ru)("recurring_event_this")),i.createElement(oe.Ay,{value:"future"},(0,p.Ru)("recurring_event_following")),i.createElement(oe.Ay,{value:"all"},(0,p.Ru)("recurring_event_all")))),onOk:function(){var e=(0,_.A)(C().mark(function e(){var t,a,n;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=1,(0,s.SX)(c._id,r);case 1:"this"===r?A((0,g.yQ)(c._id)):"future"!==r&&"all"!==r||(n=(null===(t=c.recurrence)||void 0===t?void 0:t.recurrenceId)||c._id,A((0,g.Vw)({recurrenceId:n,deleteType:r,fromStartDate:"future"===r?null===(a=c.startDate)||void 0===a?void 0:a.toISOString():void 0}))),R.invalidateQueries({queryKey:["day-events"]}),e.next=3;break;case 2:e.prev=2,e.catch(0);case 3:case"end":return e.stop()}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}(),okText:(0,p.Ru)("ok"),okButtonProps:{className:"is-deep"},cancelText:(0,p.Ru)("cancel"),cancelButtonProps:{className:"is-deep"}})):m.confirm({title:(0,p.Ru)("delete_event_confirm_title"),content:(0,p.Ru)("delete_event_confirm_content"),onOk:function(){var e=(0,_.A)(C().mark(function e(){return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=1,(0,s.SX)(c._id);case 1:A((0,g.yQ)(c._id)),R.invalidateQueries({queryKey:["day-events"]}),e.next=3;break;case 2:e.prev=2,e.catch(0);case 3:case"end":return e.stop()}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}(),okText:(0,p.Ru)("ok"),okButtonProps:{className:"is-deep"},cancelText:(0,p.Ru)("cancel"),cancelButtonProps:{className:"is-deep"}});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),ge=function(){var e=(0,_.A)(C().mark(function e(t){var a;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(c._id){e.next=1;break}return e.abrupt("return");case 1:return Z(!1),a=(0,Te.YR)(t),A((0,g.tQ)(ze(ze({},c),{},{color:a||void 0}))),e.prev=2,e.next=3,(0,s.qM)({_id:c._id,color:a||void 0});case 3:e.next=5;break;case 4:return e.prev=4,e.catch(2),b.error((0,p.Ru)("error_updating_events")),e.next=5,R.invalidateQueries({queryKey:["day-events"]});case 5:case"end":return e.stop()}},e,null,[[2,4]])}));return function(t){return e.apply(this,arguments)}}(),ke=function(){var e=(0,_.A)(C().mark(function e(t){var a;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(c._id){e.next=1;break}return e.abrupt("return");case 1:return Z(!1),a=t?"".concat(t," ").concat(ie):ie,A((0,g.tQ)(ze(ze({},c),{},{title:a}))),e.prev=2,e.next=3,(0,s.qM)({_id:c._id,title:a});case 3:e.next=5;break;case 4:return e.prev=4,e.catch(2),b.error((0,p.Ru)("error_updating_events")),e.next=5,R.invalidateQueries({queryKey:["day-events"]});case 5:case"end":return e.stop()}},e,null,[[2,4]])}));return function(t){return e.apply(this,arguments)}}(),he=function(){var e=(0,_.A)(C().mark(function e(){return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(c._id){e.next=1;break}return e.abrupt("return");case 1:return Z(!1),A((0,g.tQ)(ze(ze({},c),{},{title:ie}))),e.prev=2,e.next=3,(0,s.qM)({_id:c._id,title:ie});case 3:e.next=5;break;case 4:return e.prev=4,e.catch(2),b.error((0,p.Ru)("error_updating_events")),e.next=5,R.invalidateQueries({queryKey:["day-events"]});case 5:case"end":return e.stop()}},e,null,[[2,4]])}));return function(){return e.apply(this,arguments)}}(),be=i.createElement(le.A,{size:"small"},i.createElement(P.A,{content:i.createElement(Te.Ay,{selectedColor:(0,Te.EC)(c.color||""),selectedIcon:re,onColorSelect:ge,onIconSelect:ke,onIconClear:he}),trigger:"click",placement:"top",open:$,onOpenChange:function(e){Z(e),e&&q(!1)}},i.createElement(j.A,{title:se?(0,p.Ru)("icon_picker_open"):(0,p.Ru)("event_not_owner_tooltip")},i.createElement("span",null,i.createElement(M.Ay,{type:"text",className:"no-effect",icon:i.createElement(Ee.A,null),size:"small",disabled:!se})))),i.createElement(j.A,{title:(0,p.Ru)("start_working_on_this")},i.createElement("span",null,i.createElement(M.Ay,{type:"text",className:"no-effect",icon:i.createElement(De.A,{style:{color:"var(--color-primary)"}}),onClick:function(e){e.stopPropagation(),se&&(A((0,Ne.Lz)((0,Ne.l9)(c))),S(h.zb.path))},size:"small",disabled:!se}))),i.createElement(j.A,{title:(0,p.Ru)(c.status===w.vV?"mark_as_not_done":"mark_as_done")},i.createElement(M.Ay,{type:"text",icon:i.createElement(_e.A,null),onClick:function(e){return me(e,c.status)},size:"small",className:"action-done ".concat(c.status===w.vV?"is-done":"")})),i.createElement(j.A,{title:se?(0,p.Ru)("event_edit"):(0,p.Ru)("event_not_owner_tooltip")},i.createElement("span",null,i.createElement(M.Ay,{type:"text",icon:i.createElement(Se.A,null),onClick:function(e){e.stopPropagation(),se&&(q(!1),Y(!1),a(c,t.visibleStartDate))},size:"small",disabled:!se}))),i.createElement(j.A,{title:se?(0,p.Ru)("event_remove"):(0,p.Ru)("event_not_owner_tooltip")},i.createElement("span",null,i.createElement(M.Ay,{type:"text",className:"no-effect",icon:i.createElement(Ae.A,null),onClick:ye,danger:!0,size:"small",disabled:!se})))),xe=i.createElement("div",{className:"event-details-popover"},i.createElement("h3",null,c.title),i.createElement("p",{className:"event-time-details"},v&&ce?ce:(0,p.Ru)("all_day")),ee&&i.createElement("p",{className:"event-calendar-info"},i.createElement("span",{className:"calendar-color-dot",style:{backgroundColor:ee.color}}),i.createElement("span",null,ee.name||ee.email)),c.description&&i.createElement(Oe.A,{description:c.description}),i.createElement("div",{className:"event-details-actions"},be)),Me=function(e){return{gridColumn:"".concat(e.startCol+1," / span ").concat(e.spanCols),gridRow:e.row+1}}(t),Pe=i.createElement("div",{className:"spanning-all-day-event ".concat(v?"timed":""," ").concat(K?"done-animation":""," ").concat(c.status===w.vV?"is-done":""," ").concat(d?"continues-left":""," ").concat(u?"continues-right":""," ").concat(de.isLoading?"loading":""," ").concat(de.isError?"error":""," ").concat(c.color?"has-accent":""),style:{gridColumn:Me.gridColumn,gridRow:Me.gridRow,backgroundColor:c.calendarColor?(0,Te.ar)(c.calendarColor,.2):void 0,borderLeftColor:c.color?c.color:void 0},onClick:function(e){e.stopPropagation(),Y(!V)}},d&&i.createElement(j.A,{title:(0,p.Ru)("continues_from_previous_week")},i.createElement(I.A,{className:"continues-indicator left"})),i.createElement("div",{className:"spanning-event-content"},v&&i.createElement(Ce.A,{className:"event-time-icon"}),fe&&i.createElement("span",{className:"event-emoji"},fe),i.createElement("span",{className:"event-title"},ve),v&&ce&&i.createElement("span",{className:"event-time-label"},ce),de.isError&&i.createElement("button",{className:"retry-button",onClick:function(e){e.stopPropagation(),l(c._id)}},(0,p.Ru)("common_retry"))),u&&i.createElement(j.A,{title:(0,p.Ru)("continues_to_next_week")},i.createElement(H.A,{className:"continues-indicator right"})));return i.createElement(P.A,{content:xe,title:null,trigger:"click",placement:"bottom",open:V,onOpenChange:Y,mouseLeaveDelay:.5,classNames:{root:"event-details-popover"}},i.createElement(P.A,{content:be,trigger:"hover",placement:"top",open:F&&!V,onOpenChange:q,mouseLeaveDelay:.5,classNames:{root:"event-actions-popover lzv-theme-".concat(D)}},Pe))});Pe.displayName="SpanningAllDayEvent";const Ie=Pe;var He=(0,i.memo)(function(e){var t=e.events,a=e.weekDays,r=e.onEdit,n=e.onStatusChange,o=e.getEventStatus,l=e.onRetry,c=(0,i.useMemo)(function(){return function(e,t){if(0===t.length)return[];var a=(0,d.o)(t[0]),r=(0,ge.D)(t[t.length-1]);return e.filter(function(e){if(!e.startDate||!e.endDate)return!1;if(!e.allDayEvent&&!be(e))return!1;var t=(0,d.o)(new Date(e.startDate)),n=(0,d.o)(new Date(e.endDate));return!((0,me.d)(t,r)||(0,fe.Y)(n,a))})}(t,a)},[t,a]),s=(0,i.useMemo)(function(){return xe(c,a)},[c,a]),u=(0,i.useMemo)(function(){return 0===s.length?1:Math.max.apply(Math,(0,S.A)(s.map(function(e){return e.row})))+1},[s]),w=(0,i.useMemo)(function(){return"repeat(".concat(u,", minmax(28px, auto))")},[u]);return i.createElement("div",{className:"week-all-day-row"},i.createElement("div",{className:"week-all-day-header"},i.createElement(we.A.Text,{className:"all-day-events-label"},(0,p.Ru)("all_day"))),i.createElement("div",{className:"week-all-day-grid",style:{gridTemplateColumns:"repeat(".concat(a.length,", 1fr)"),gridTemplateRows:w}},s.map(function(e){return i.createElement(Ie,{key:"".concat(e.event._id,"-").concat(e.startCol),layout:e,onEdit:r,onStatusChange:n,getEventStatus:o,onRetry:l})})))});He.displayName="AllDayRowsContainer";const Fe=He;var qe=a(80337),Ue=a(54352),Qe=a(67670),We=a(79114),Ve=a(1045),Ye=a(16172);function Le(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w.z,a=(0,qe.k)(e,{weekStartsOn:t}),r=(0,Ue.$)(e,{weekStartsOn:t});return(0,Qe.k)({start:a,end:r})}var Be=a(55285),Ke=a(67466),Ge=a(33930),Je=a(31598);a(70467),a(76837),a(37819);function Xe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function $e(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Xe(Object(a),!0).forEach(function(t){(0,r.A)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Xe(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Ze=(0,i.memo)(function(e){var t=e.date,a=e.onPrevious,n=e.onNext,o=e.onDateChange,l=e.onToday,d=e.showTodayButton,s=void 0===d||d,u=e.config,w=e.onConfigChange,v=e.connectedCalendars,f=void 0===v?[]:v,m=(0,O.Zp)(),g=(0,y.d4)(function(e){return e.global.weekStartsOn}),k=(0,i.useMemo)(function(){return Le(t,g)},[t,g]),b=function(e,t){w($e($e({},u),{},{visibleDays:$e($e({},u.visibleDays),{},(0,r.A)({},e,t))}))},x=i.createElement("div",{className:"week-calendar-config-popover flex-col gap-x-8"},i.createElement("div",null,i.createElement("div",{className:"flex align-center justify-between gap-x-16"},i.createElement("div",null,(0,p.Ru)("hide_completed_activities")),i.createElement(R.A,{checked:u.hideCompletedActivities,onChange:function(e){w($e($e({},u),{},{hideCompletedActivities:e}))},size:"small"}))),i.createElement("div",null,i.createElement("div",{className:"mb-8px"},(0,p.Ru)("visible_days")),i.createElement("div",{className:"flex-col pad-left-8px"},i.createElement(N.A,{checked:u.visibleDays.monday,onChange:function(e){return b("monday",e.target.checked)}},(0,p.Ru)("common_monday")),i.createElement(N.A,{checked:u.visibleDays.tuesday,onChange:function(e){return b("tuesday",e.target.checked)}},(0,p.Ru)("common_tuesday")),i.createElement(N.A,{checked:u.visibleDays.wednesday,onChange:function(e){return b("wednesday",e.target.checked)}},(0,p.Ru)("common_wednesday")),i.createElement(N.A,{checked:u.visibleDays.thursday,onChange:function(e){return b("thursday",e.target.checked)}},(0,p.Ru)("common_thursday")),i.createElement(N.A,{checked:u.visibleDays.friday,onChange:function(e){return b("friday",e.target.checked)}},(0,p.Ru)("common_friday")),i.createElement(N.A,{checked:u.visibleDays.saturday,onChange:function(e){return b("saturday",e.target.checked)}},(0,p.Ru)("common_saturday")),i.createElement(N.A,{checked:u.visibleDays.sunday,onChange:function(e){return b("sunday",e.target.checked)}},(0,p.Ru)("common_sunday")))),i.createElement("div",{className:"mt-8px"},i.createElement("div",{className:"mb-8px"},(0,p.Ru)("calendar_days_to_show")),i.createElement(T.A,{value:u.daysToShow||7,style:{width:200},onChange:function(e){return w($e($e({},u),{},{daysToShow:e}))},options:[{value:7,label:(0,p.Ru)("calendar_days_option_whole_week")},{value:1,label:(0,p.Ru)("calendar_days_option_1")},{value:2,label:(0,p.Ru)("calendar_days_option_2")},{value:3,label:(0,p.Ru)("calendar_days_option_3")},{value:5,label:(0,p.Ru)("calendar_days_option_5")}]})),i.createElement("div",{className:"mt-8px"},i.createElement("div",{className:"mb-8px"},(0,p.Ru)("calendar_hours_range")),i.createElement("div",{className:"flex gap-x-8 align-center"},i.createElement(T.A,{value:u.startHour,style:{width:95},onChange:function(e){return w($e($e({},u),{},{startHour:e}))},options:Array.from({length:24},function(e,t){return{value:t,label:"".concat(t.toString().padStart(2,"0"),":00")}})}),i.createElement("span",null,"-"),i.createElement(T.A,{value:u.endHour,style:{width:95},onChange:function(e){return w($e($e({},u),{},{endHour:e}))},options:Array.from({length:25},function(e,t){return{value:t,label:24===t?"24:00":"".concat(t.toString().padStart(2,"0"),":00")}})}))),f.length>0&&i.createElement("div",{className:"mt-8px"},i.createElement("div",{className:"mb-8px"},(0,p.Ru)("visible_calendars")),i.createElement("div",{className:"flex-col pad-left-8px"},f.map(function(e){var t=(u.visibleCalendarIds||f.map(function(e){return e._id})).includes(e._id);return i.createElement(N.A,{key:e._id,checked:t,onChange:function(t){return a=e._id,r=t.target.checked,n=u.visibleCalendarIds||f.map(function(e){return e._id}),o=r?[].concat((0,S.A)(n),[a]):n.filter(function(e){return e!==a}),void w($e($e({},u),{},{visibleCalendarIds:o}));var a,r,n,o}},i.createElement("span",{className:"calendar-filter-item"},i.createElement("span",{className:"calendar-color-dot",style:{backgroundColor:e.color}}),i.createElement("span",null,e.name)))})))),E=(0,i.useMemo)(function(){return 7===(u.daysToShow||7)?(0,U.R)(t,new Date):(0,c.r)(t,new Date)},[u.daysToShow,t]);return i.createElement("div",{className:"week-calendar-toolbar"},i.createElement("div",{className:"week-calendar-toolbar-content full-width flex justify-between"},i.createElement("div",{className:"week-calendar-toolbar-label flex gap-x-4 align-center"},i.createElement("span",null,(0,ue.Sn)((0,Q.GP)(k[0],"MMMM",{locale:(0,ue.Ex)((0,h.vv)())}))),i.createElement("span",null,k[0].getFullYear()),i.createElement(j.A,{title:(0,p.Ru)("common_previous_week")},i.createElement(M.Ay,{shape:"circle",type:"text",icon:i.createElement(I.A,null),onClick:a})),i.createElement(j.A,{title:(0,p.Ru)("common_next_week")},i.createElement(M.Ay,{shape:"circle",type:"text",icon:i.createElement(H.A,null),onClick:n}))),i.createElement("div",{className:"flex gap-x-8 align-center"},0===f.length&&i.createElement(M.Ay,{type:"primary",icon:i.createElement(F.A,null),onClick:function(){return m(h.e1.path)}},(0,p.Ru)("calendar_sync_enabled")),s&&!E&&i.createElement(M.Ay,{type:"link",onClick:function(){var e=new Date;o(e),null==l||l()}},7===(u.daysToShow||7)?(0,p.Ru)("common_this_week"):(0,p.Ru)("common_today")),i.createElement(z.A,{variant:"filled",value:V()(t),onChange:function(e){e&&o(e.toDate())},allowClear:!1,picker:7===(u.daysToShow||7)?"week":"date",showWeek:!1,format:function(e){if(!e)return"";var t=u.daysToShow||7;if(7===t){var a=e.startOf("week"),r=e.endOf("week");return"".concat(a.format("MMM D")," - ").concat(r.format("MMM D, YYYY"))}var n=e.startOf("day"),o=e.add(t-1,"day").endOf("day");return"".concat(n.format("MMM D")," - ").concat(o.format("MMM D, YYYY"))}}),i.createElement(P.A,{content:x,title:(0,p.Ru)("calendar_settings"),trigger:"click",placement:"bottomRight"},i.createElement(j.A,{title:(0,p.Ru)("calendar_settings")},i.createElement(M.Ay,{shape:"circle",type:"text",icon:i.createElement(q.A,null)}))))))});const et=function(e){var t,a,r=e.events,o=e.selectedDateIso,l=e.onDateChange,p=e.height,v=(e.title,e.titleTooltip,e.hideHeader),f=void 0!==v&&v,m=e.weekStartsOn,k=void 0===m?w.z:m,h=e.onToday,x=e.showTodayButton,E=void 0===x||x,D=(0,y.wA)(),S=(0,i.useRef)(null),A=(0,i.useMemo)(function(){return new Date(o)},[o]),O=(0,Ge.I)({queryKey:[Je.uI],queryFn:u.j1}).data,R=void 0===O?[]:O,N=(0,i.useMemo)(function(){var e={};return R.forEach(function(t){e[t._id]=t.color}),e},[R]),T=(0,Be.lW)(),j={hideCompletedActivities:!1,visibleDays:{monday:!0,tuesday:!0,wednesday:!0,thursday:!0,friday:!0,saturday:!0,sunday:!0},daysToShow:7,startHour:L.r.START_HOUR,endHour:L.r.END_HOUR},M=(0,Ke.A)("week-calendar-config",j),z=(0,n.A)(M,2),P=z[0],I=z[1],H=function(e){var t=(0,i.useState)(!1),a=(0,n.A)(t,2),r=a[0],o=a[1],l=(0,i.useState)(!1),c=(0,n.A)(l,2),d=c[0],s=c[1],u=(0,i.useState)(0),p=(0,n.A)(u,2),w=p[0],v=p[1];return(0,i.useEffect)(function(){v(function(){var e,t=document.createElement("div");t.style.visibility="hidden",t.style.overflow="scroll",t.style.msOverflowStyle="scrollbar",document.body.appendChild(t);var a=document.createElement("div");t.appendChild(a);var r=t.offsetWidth-a.offsetWidth;return null===(e=t.parentNode)||void 0===e||e.removeChild(t),r}())},[]),(0,i.useEffect)(function(){var t=e.current;if(!t)return o(!1),void s(!1);var a=function(){var e=t.scrollHeight>t.clientHeight,a=t.scrollWidth>t.clientWidth;o(e),s(a)};a();var r=new ResizeObserver(function(){a()});r.observe(t);var n=new MutationObserver(function(){a()});return n.observe(t,{childList:!0,subtree:!0,attributes:!0}),function(){r.disconnect(),n.disconnect()}},[e]),{hasVerticalScrollbar:r,hasHorizontalScrollbar:d,scrollbarWidth:w}}(S),F=H.hasVerticalScrollbar,q=(0,i.useMemo)(function(){var e=["week-calendar-wrapper"];return F&&e.push("has-vertical-scrollbar"),T.width<=768&&e.push("mobile"),e.join(" ")},[F,T.width]),U=(0,i.useCallback)(function(e){I(e)},[I]),Q=(0,i.useMemo)(function(){var e=P.daysToShow||7;return 7===e?Le(A,k):function(e,t){for(var a=(0,d.o)(e),r=[],n=0;n<t;n+=1)r.push((0,Ye.f)(a,n));return r}(A,e)},[A,k,P.daysToShow]),W=(0,i.useMemo)(function(){if(7!==(P.daysToShow||7))return Q;var e={1:"monday",2:"tuesday",3:"wednesday",4:"thursday",5:"friday",6:"saturday",0:"sunday"};return Q.filter(function(t){var a=e[t.getDay()];return P.visibleDays[a]})},[Q,P.visibleDays,P.daysToShow]),V=(0,i.useMemo)(function(){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w.z;return{start:(0,qe.k)(e,{weekStartsOn:t}),end:(0,Ue.$)(e,{weekStartsOn:t})}}(A,k)},[A,k]),J=(0,K.p)({initEvents:r}),X=J.events,$=J.updateEventOptimistic,Z=J.setEventError,ee=J.clearEventStatus,te=J.retryEventUpdate,ae=J.getEventStatus,ne=(0,i.useMemo)(function(){var e=X;return P.hideCompletedActivities&&(e=e.filter(function(e){return e.status!==w.vV})),P.visibleCalendarIds&&P.visibleCalendarIds.length>0&&R.length>0&&(e=e.filter(function(e){var t;return!e.connectedCalendarId||(null===(t=P.visibleCalendarIds)||void 0===t?void 0:t.includes(e.connectedCalendarId))})),e.map(function(e){return e.connectedCalendarId&&N[e.connectedCalendarId]?$e($e({},e),{},{calendarColor:N[e.connectedCalendarId]}):e})},[X,P.hideCompletedActivities,P.visibleCalendarIds,R,N]),oe=(0,B.f)(),le=oe.editingEvent,ie=oe.isModalVisible,ce=oe.openCreateModal,de=oe.openEditModal,ue=oe.closeModal,we=(0,i.useCallback)(function(e){D((0,Y.un)(e.toISOString())),null==l||l(e)},[D,l]),ve=(0,i.useCallback)(function(){var e,t=P.daysToShow||7,a=7===t?(e=A,(0,Ve.k)(e,1)):function(e,t){return(0,Ye.f)(e,-t)}(A,t);we(a)},[A,we,P.daysToShow]),fe=(0,i.useCallback)(function(){var e,t=P.daysToShow||7,a=7===t?(e=A,(0,We.J)(e,1)):function(e,t){return(0,Ye.f)(e,t)}(A,t);we(a)},[A,we,P.daysToShow]),me=(0,i.useCallback)(function(){var e=(0,_.A)(C().mark(function e(t,a){var r;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.toString(),e.prev=1,$(r,{status:a},"status"),e.next=2,(0,s.JG)(r,a);case 2:ee(r),e.next=4;break;case 3:e.prev=3,e.catch(1),Z(r,"status");case 4:case"end":return e.stop()}},e,null,[[1,3]])}));return function(t,a){return e.apply(this,arguments)}}(),[$,ee,Z]),ye=(0,i.useCallback)(function(){var e=(0,_.A)(C().mark(function e(t){var a,r;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t._id){e.next=1;break}return e.abrupt("return");case 1:if(null!=le&&le._id?D((0,g.tQ)(t)):D((0,g.l2)(t)),e.prev=2,null===(a=t.recurrence)||void 0===a||!a.rrule){e.next=4;break}return e.next=3,(0,s.J7)(V.start,V.end);case 3:r=e.sent,D((0,g.H8)(r));case 4:e.next=6;break;case 5:e.prev=5,e.catch(2);case 6:case"end":return e.stop()}},e,null,[[2,5]])}));return function(t){return e.apply(this,arguments)}}(),[D,le,V.start,V.end]);return i.createElement(re,null,i.createElement("div",{className:q,style:{maxHeight:p}},!f&&i.createElement(Ze,{date:A,onPrevious:ve,onNext:fe,onDateChange:we,onToday:h,showTodayButton:E,config:P,onConfigChange:U,connectedCalendars:R}),i.createElement("div",{className:"week-headers-row"},i.createElement("div",{className:"week-time-header"}),i.createElement("div",{className:"week-day-headers"},W.map(function(e){return i.createElement(pe,{key:"header-".concat(e.toISOString()),date:e,isToday:(t=e,(0,c.r)(t,new Date)),onClick:we});var t}))),i.createElement(Fe,{events:ne,weekDays:W,onEdit:de,onStatusChange:me,getEventStatus:ae,onRetry:te}),i.createElement("div",{className:"week-calendar-body",ref:S},i.createElement("div",{className:"week-time-column"},i.createElement(G.A,{startHour:null!==(t=P.startHour)&&void 0!==t?t:L.r.START_HOUR,endHour:null!==(a=P.endHour)&&void 0!==a?a:L.r.END_HOUR})),i.createElement("div",{className:"week-days-container"},W.map(function(e){var t,a;return i.createElement(se,{key:e.toISOString(),date:e,events:ne,startHour:null!==(t=P.startHour)&&void 0!==t?t:L.r.START_HOUR,endHour:null!==(a=P.endHour)&&void 0!==a?a:L.r.END_HOUR,onEdit:de,onStatusChange:me,onCreateEvent:ce,updateEventOptimistic:$,setEventError:Z,clearEventStatus:ee,retryEventUpdate:te,getEventStatus:ae,weekStartDate:V.start,weekEndDate:V.end,scrollContainerRef:S})}))),i.createElement(b.A,{visible:ie,event:le,onClose:ue,onSave:ye})))};function tt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function at(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(a),!0).forEach(function(t){(0,r.A)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):tt(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var rt=(0,p.Ru)("week_view_tab_planning"),nt=((0,p.Ru)("week_view_tab_calendar"),(0,p.Ru)("week_view_tab_todo"),(0,i.memo)(function(){var e=(0,k.S)(),t=e.screenWidth,a=e.user,r=(0,y.wA)(),l=(0,te.jE)(),c=(0,i.useState)(!1),d=(0,n.A)(c,2),b=d[0],D=d[1],_=(0,i.useState)(),S=(0,n.A)(_,2),A=S[0],C=S[1],O=(0,i.useState)(null),R=(0,n.A)(O,2),N=R[0],T=R[1];(0,i.useEffect)(function(){D(t<=h.NU.sm)},[t]),(0,i.useEffect)(function(){if(a){var e=a.preferences||{timezone:void 0,weekStart:w.z},t=e.timezone,r=e.weekStart;C((0,v.Hq)(new Date,t,!r||r===w.z))}},[a]);var j=null==A?void 0:A.weekStartDate.toISOString(),M=null==A?void 0:A.weekEndDate.toISOString(),z=(0,Ge.I)({queryKey:["week-events",j,M],queryFn:function(){return A?(0,s.J7)(A.weekStartDate,A.weekEndDate):[]},enabled:!!A&&!!a,staleTime:3e5,refetchOnWindowFocus:!1,retry:3,retryDelay:function(e){return Math.min(1e3*Math.pow(2,e),3e4)}}).data,P=void 0===z?[]:z;(0,i.useEffect)(function(){P.length>=0&&r((0,g.H8)(P))},[P,r]),(0,i.useEffect)(function(){A&&a&&(0,u.j1)().then(function(e){return e.some(function(e){return e.syncEnabled})?(0,s.cF)(A.weekStartDate,A.weekEndDate):0}).then(function(e){e>0&&l.invalidateQueries({queryKey:["week-events",j,M]})}).catch(console.error)},[A,j,M,l,a]);var I=(0,i.useMemo)(function(){return{conversation:N,setConversation:T,weekInfo:A,setWeekInfo:C}},[A,N]),H=i.createElement("div",{className:"flex-col ".concat(b?"gap-row-8":"gap-row-16"," full-width overflow-y-auto")},i.createElement(ot,{isMobile:b})),F=A?i.createElement("div",{className:"sider-panel flex",style:{minHeight:300}},i.createElement(f.A,{type:w.QM,meta:JSON.stringify({type:w.QM,meta:{startDate:A.weekStartDate}})})):i.createElement(o.A,{active:!0});return i.createElement(m.W.Provider,{value:at({},I)},i.createElement("div",{className:"weekly-viewer-wrapper"},b?i.createElement(i.Fragment,null,H):i.createElement(i.Fragment,null,H,i.createElement(x.q,{shape:"round",initPosition:{bottom:40,right:24},icon:i.createElement("img",{src:(0,p.ID)(E),width:64}),bubbleSize:68},F))))})),ot=(0,i.memo)(function(e){var t=e.isMobile,a=(0,i.useState)(rt),r=(0,n.A)(a,2);r[0],r[1];return i.createElement("div",{className:"planning-view-wrapper flex-col flex-1"},i.createElement("div",{className:"weekly-viewer-calendar-wrapper"},i.createElement(lt,{isMobile:t})))}),lt=(0,i.memo)(function(e){var t=e.isMobile,a=(0,y.d4)(function(e){return e.global.weekStartsOn}),r=(0,k.S)().user,o=(0,y.d4)(function(e){return e.weekPlanner.calendarCurrentDate}),s=(0,i.useContext)(m.W).setWeekInfo,u=(0,y.wA)(),p=l.A.useForm(),f=(0,n.A)(p,1)[0],h=i.useRef(null),x=(0,i.useState)(),E=(0,n.A)(x,2),_=E[0],S=E[1],A=(0,i.useState)(!1),C=(0,n.A)(A,2),O=C[0],R=C[1],N=(0,i.useMemo)(function(){return o?new Date(o):new Date},[o]),T=(0,y.d4)(g.zD),j=(0,i.useMemo)(function(){return T.filter(function(e){return e.startDate&&(0,c.r)(new Date(e.startDate),N)})},[T,N]);(0,i.useEffect)(function(){O&&h.current&&setTimeout(function(){var e;return null===(e=h.current)||void 0===e?void 0:e.focus()},100)},[O]);var M=(0,i.useCallback)(function(e){R(!1),S(void 0),f.resetFields()},[f]),z=(0,i.useCallback)(function(){R(!1),S(void 0),f.resetFields()},[f]),P=(0,i.useCallback)(function(e){if(r){var t=r.preferences||{timezone:void 0,weekStart:w.z},a=t.timezone,n=t.weekStart;s((0,v.Hq)(e,a,!n||n===w.z))}u((0,g.KF)((0,d.o)(e).getTime()))},[u,s,r]);return i.createElement(i.Fragment,null,i.createElement(b.A,{visible:O,event:_,onClose:z,onSave:M}),t?i.createElement(D.A,{events:j,selectedDateIso:N.toISOString(),height:"100%"}):i.createElement(et,{events:T,selectedDateIso:N.toISOString(),onDateChange:P,hideHeader:!1,weekStartsOn:a}))});const it=(0,i.memo)(nt)},81695:(e,t,a)=>{var r=a(85072),n=a.n(r),o=a(97825),l=a.n(o),i=a(77659),c=a.n(i),d=a(55056),s=a.n(d),u=a(10540),p=a.n(u),w=a(41113),v=a.n(w),f=a(87624),m={};m.styleTagTransform=v(),m.setAttributes=s(),m.insert=c().bind(null,"head"),m.domAPI=l(),m.insertStyleElement=p();var y=n()(f.default,m);if(!f.default.locals||e.hot.invalidate){var g=!f.default.locals,k=g?f:f.default.locals;e.hot.accept(87624,t=>{f=a(87624),function(e,t,a){if(!e&&t||e&&!t)return!1;var r;for(r in e)if((!a||"default"!==r)&&e[r]!==t[r])return!1;for(r in t)if(!(a&&"default"===r||e[r]))return!1;return!0}(k,g?f:f.default.locals,g)?(k=g?f:f.default.locals,y(f.default)):e.hot.invalidate()})}e.hot.dispose(function(){y()});f.default&&f.default.locals&&f.default.locals},87624:(e,t,a)=>{a.r(t),a.d(t,{default:()=>i});var r=a(31601),n=a.n(r),o=a(76314),l=a.n(o)()(n());l.push([e.id,".week-todo-header{margin-bottom:32px;background:linear-gradient(135deg, var(--color-primary) 10%, var(--color-primary-bright) 100%);background-size:cover;background-attachment:fixed;width:100%;padding:50px 24px;position:relative;overflow:hidden;border-radius:0 0 85% 85%/30%;text-align:center;box-shadow:0 4px 1rem 0 rgba(0,0,0,.1)}.week-todo-header .week-todo-header-content{width:100%;height:100%;color:#fff}.week-todo-header .week-todo-header-content .week-todo-title{font-size:2rem;font-weight:600;display:block;margin-bottom:16px;color:#fff}.week-todo-header .week-todo-header-content .week-todo-description{font-size:1.2rem;color:hsla(0,0%,100%,.9);font-weight:400;margin:0}",""]);const i=l}}]);